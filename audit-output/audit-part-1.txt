CODE AUDIT FOR BODY TWEAKER PROJECT
Generated: 2026-01-29T04:54:25.464Z
================================================================================


================================================================================
FILE: src/main.tsx (23 lines)
================================================================================

import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.tsx'
import './index.css'
import WebApp from '@twa-dev/sdk'
import { Analytics } from '@vercel/analytics/react'
import { ThemeProvider } from './contexts/ThemeContext'

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
WebApp.ready();

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ –≤–∏–¥–∞ (—Ä–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω)
WebApp.expand();

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <ThemeProvider>
      <App />
    </ThemeProvider>
    <Analytics />
  </React.StrictMode>,
)



================================================================================
FILE: src/App.tsx (41 lines)
================================================================================

// src/App.tsx
import { useState, useEffect } from 'react';
import { BrowserRouter, Routes, Route } from 'react-router-dom';
import { Layout } from './app/Layout';
import { WelcomeScreen } from './app/WelcomeScreen';
import { TimerProvider } from './features/fasting/context/TimerContext';
import { storageGet } from './utils/storage'; // üëà NEW

function App() {
  const [showWelcome, setShowWelcome] = useState<boolean | null>(null);

  useEffect(() => {
      const checkFirstRun = async () => {
          const accepted = await storageGet('has_accepted_terms');
          setShowWelcome(accepted !== 'true');
      };
      checkFirstRun();
  }, []);

  if (showWelcome === null) {
      // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ª–æ–∞–¥–µ—Ä, –Ω–æ –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω –Ω–∞ < 100ms —Ç–æ–∂–µ –æ–∫
      return null; 
  }

  if (showWelcome) {
      return <WelcomeScreen onComplete={() => setShowWelcome(false)} />;
  }

  return (
    <TimerProvider>
      <BrowserRouter>
        <Routes>
          <Route path="*" element={<Layout />} />
        </Routes>
      </BrowserRouter>
    </TimerProvider>
  );
}

export default App;



================================================================================
FILE: src/app/Layout.tsx (238 lines)
================================================================================

// src/app/Layout.tsx
import { useState, useRef, useEffect, memo } from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import { Map, Timer, Wind, History } from 'lucide-react';
import { motion, AnimatePresence, useSpring, useMotionValue, useTransform } from 'framer-motion';
import type { Variants } from 'framer-motion';
import { cn } from '../utils/cn';
import { storageGet, storageSet } from '../utils/storage';
import WebApp from '@twa-dev/sdk';

import { MetabolismMapPage } from '../features/fasting/MetabolismMapPage';
import { FastingPage } from '../features/fasting/FastingPage';
import { BreathingPage } from '../features/breathing/BreathingPage';
import { HistoryPage } from '../features/history/HistoryPage';
// –ò–ó–ú–ï–ù–ï–ù–ò–ï: –ò–º–ø–æ—Ä—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
import { ArticleDetailPage } from '../features/articles/pages/ArticleDetailPage';

import { useFastingTimerContext } from '../features/fasting/context/TimerContext';
import { ToastNotification } from '../components/ui/ToastNotification';

const PageView = memo(({ isActive, children }: { isActive: boolean, children: React.ReactNode }) => {
    return (
        <div 
          className={cn(
              "w-full h-full absolute inset-0 overflow-y-auto overflow-x-hidden scrollbar-hide", 
              "pb-32 px-4 pt-2",
              isActive ? "z-10 opacity-100 pointer-events-auto" : "-z-10 opacity-0 pointer-events-none"
          )}
          style={{ visibility: isActive ? 'visible' : 'hidden' }}
        >
            {children}
        </div>
    );
});

export const Layout = () => {
  const location = useLocation();
  const navigate = useNavigate();

  const { notification, closeNotification, setPhaseToOpen } = useFastingTimerContext();

  const navRef = useRef<HTMLDivElement>(null);
  const [isDragging, setIsDragging] = useState(false);
  
  const xPercent = useMotionValue(0);
  const springPercent = useSpring(xPercent, { 
      stiffness: isDragging ? 2000 : 500, 
      damping: isDragging ? 50 : 40 
  });

  const navItems = [
    { id: 'map', path: '/', icon: Map },
    { id: 'timer', path: '/timer', icon: Timer },
    { id: 'breath', path: '/breathing', icon: Wind },
    { id: 'history', path: '/history', icon: History },
  ];

  // –ò–ó–ú–ï–ù–ï–ù–ò–ï: –ü—Ä–æ–≤–µ—Ä–∫–∞, –æ—Ç–∫—Ä—ã—Ç–∞ –ª–∏ —Å—Ç–∞—Ç—å—è
  const isArticleDetail = location.pathname.startsWith('/articles/');

  const activeIndex = navItems.findIndex(i => i.path === location.pathname);
  const safeActiveIndex = activeIndex === -1 ? 0 : activeIndex;

  useEffect(() => {
    if (!isDragging) {
        xPercent.set(safeActiveIndex * 25);
    }
  }, [safeActiveIndex, isDragging]);

  useEffect(() => {
    try {
        WebApp.ready();
        WebApp.expand();

        const checkUser = async () => {
            if (WebApp.initDataUnsafe?.user) {
                const existingName = await storageGet('user_name');
                if (!existingName) {
                    await storageSet('user_name', WebApp.initDataUnsafe.user.first_name);
                }
            }
        };
        checkUser();

    } catch { /* ignore */ }
  }, []);

  const handleNotificationClick = () => {
      if (notification?.phaseId) {
          setPhaseToOpen(notification.phaseId);
          navigate('/');
      }
  };

  useEffect(() => {
    const handleMove = (e: PointerEvent) => {
      if (!isDragging || !navRef.current) return;
      const rect = navRef.current.getBoundingClientRect();
      const contentWidth = rect.width - 16;
      if (contentWidth <= 0) return;
      const relativeX = e.clientX - rect.left - 8 - (contentWidth / 8);
      const percent = (relativeX / contentWidth) * 100;
      xPercent.set(percent);
    };

    const handleUp = (e: PointerEvent) => {
      if (!isDragging || !navRef.current) return;
      setIsDragging(false);
      const rect = navRef.current.getBoundingClientRect();
      const contentWidth = rect.width - 16;
      const itemWidth = contentWidth / 4;
      const relativeX = e.clientX - rect.left - 8;
      let index = Math.floor(relativeX / itemWidth);
      index = Math.max(0, Math.min(index, 3));
      const targetPath = navItems[index].path;
      
      if (targetPath !== location.pathname) {
        if (navigator.vibrate) navigator.vibrate(15);
        navigate(targetPath);
      } else {
        xPercent.set(index * 25);
      }
    };

    if (isDragging) {
        window.addEventListener('pointermove', handleMove);
        window.addEventListener('pointerup', handleUp);
        window.addEventListener('pointercancel', handleUp);
    }
    return () => {
        window.removeEventListener('pointermove', handleMove);
        window.removeEventListener('pointerup', handleUp);
        window.removeEventListener('pointercancel', handleUp);
    };
  }, [isDragging, location.pathname, navigate]);

  const leftStyle = useTransform(springPercent, (v) => `calc(${v}% + 8px)`);

  return (
    <div className="bg-[#F2F2F7] dark:bg-[#1C1C1E] flex justify-center font-sans text-slate-900 dark:text-white h-[100dvh] w-screen overflow-hidden fixed inset-0">

      <div className="w-full max-w-md bg-[#F2F2F7] dark:bg-[#1C1C1E] h-full relative flex flex-col shadow-2xl overflow-hidden">

        <main className="flex-1 relative w-full overflow-hidden">
            {/* –ò–ó–ú–ï–ù–ï–ù–ò–ï: –°–∫—Ä—ã–≤–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã, –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–∞ —Å—Ç–∞—Ç—å—è */}
            <PageView isActive={!isArticleDetail && (location.pathname === '/' || location.pathname === '')}>
                <MetabolismMapPage />
            </PageView>
            <PageView isActive={!isArticleDetail && location.pathname === '/timer'}>
                <FastingPage />
            </PageView>
            <PageView isActive={!isArticleDetail && location.pathname === '/breathing'}>
                <BreathingPage />
            </PageView>
            <PageView isActive={!isArticleDetail && location.pathname === '/history'}>
                <HistoryPage />
            </PageView>

            {/* –ò–ó–ú–ï–ù–ï–ù–ò–ï: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å—Ç–∞—Ç—å–∏ */}
            <AnimatePresence>
                {isArticleDetail && (
                    <div className="w-full h-full absolute inset-0 z-40 bg-[#F2F2F7] dark:bg-[#1C1C1E]">
                        <ArticleDetailPage />
                    </div>
                )}
            </AnimatePresence>
        </main>

        {/* –ò–ó–ú–ï–ù–ï–ù–ò–ï: –°–∫—Ä—ã–≤–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Å—Ç–∞—Ç—å–∏ */}
        {!isArticleDetail && (
          <div className="fixed bottom-8 left-0 right-0 z-40 flex justify-center pointer-events-none">
            <motion.nav
              ref={navRef}
              animate={{ scale: isDragging ? 0.98 : 1, y: isDragging ? 2 : 0 }}
              transition={{ type: "spring", stiffness: 400, damping: 25 }}
              style={{ touchAction: 'none' }}
              onPointerDown={(e) => {
                  e.preventDefault();
                  setIsDragging(true);
                  const rect = e.currentTarget.getBoundingClientRect();
                  const contentWidth = rect.width - 16;
                  const relativeX = e.clientX - rect.left - 8 - (contentWidth / 8);
                  const percent = (relativeX / contentWidth) * 100;
                  xPercent.set(percent);
              }}
              className="pointer-events-auto bg-white/90 dark:bg-[#2C2C2E]/85 backdrop-blur-2xl border border-white/40 dark:border-white/10 shadow-[0_20px_40px_-10px_rgba(0,0,0,0.15)] dark:shadow-[0_20px_40px_-10px_rgba(0,0,0,0.5)] rounded-[2.5rem] px-2 py-2 flex items-center mx-4 max-w-sm w-full relative h-20 cursor-grab active:cursor-grabbing select-none"
            >
              <motion.div
                  className="absolute top-2 bottom-2 bg-white dark:bg-[#2C2C2E] shadow-[0_4px_15px_-3px_rgba(0,0,0,0.1)] dark:shadow-[0_4px_15px_-3px_rgba(0,0,0,0.3)] rounded-[2rem] border border-slate-100 dark:border-white/10 z-0 pointer-events-none"
                  style={{
                      left: leftStyle,
                      width: 'calc(25% - 16px)',
                      scale: isDragging ? 1.05 : 1
                  }}
              />
              {navItems.map((item) => {
                const isActive = location.pathname === item.path;
                const getIconAnimation = (): Variants | Record<string, unknown> => {
                    if (!isActive) return {};
                    switch (item.id) {
                        case 'map': return { scaleX: [1, 1.2, 0.9, 1], transition: { duration: 0.6 } };
                        case 'timer': return { rotate: [0, 360], transition: { duration: 0.8, ease: "backOut" } };
                        case 'breath': return { x: [0, 5, -5, 0], rotate: [0, 10, -10, 0], transition: { duration: 0.6 } };
                        case 'history': return { rotate: [0, -20, 360, 360], transition: { duration: 1, times: [0, 0.2, 0.8, 1] } };
                        default: return { scale: 1.2, y: -4 };
                    }
                };

                return (
                  <div key={item.id} className="relative flex-1 flex flex-col items-center justify-center h-full z-10 pointer-events-none">
                    <motion.div animate={isActive ? { ...getIconAnimation(), y: -4, scale: 1.1 } : { y: 0, scale: 1, rotate: 0 }}>
                      <item.icon className={cn("w-6 h-6 transition-colors duration-200", isActive ? "text-blue-600 dark:text-blue-500 fill-blue-600/10 dark:fill-blue-500/10" : "text-slate-400 dark:text-slate-500")} strokeWidth={isActive ? 2.5 : 2} />
                    </motion.div>
                    <AnimatePresence>
                      {isActive && (
                        <motion.div initial={{ scale: 0 }} animate={{ scale: 1 }} exit={{ scale: 0 }} className="w-1 h-1 bg-blue-600 dark:bg-blue-500 rounded-full absolute bottom-3" />
                      )}
                    </AnimatePresence>
                  </div>
                );
              })}
            </motion.nav>
          </div>
        )}

        <ToastNotification
            isVisible={!!notification}
            title={notification?.title || ""}
            message={notification?.message || ""}
            onClose={closeNotification}
            onPress={handleNotificationClick}
        />

      </div>
    </div>
  );
};



================================================================================
FILE: src/app/WelcomeScreen.tsx (177 lines)
================================================================================

// src/app/WelcomeScreen.tsx
import { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { ShieldCheck, Activity, ChevronRight } from 'lucide-react';
import { storageSet } from '../utils/storage';
import { useTheme } from '../contexts/ThemeContext';

interface Props {
  onComplete: () => void;
}

export const WelcomeScreen = ({ onComplete }: Props) => {
  const [step, setStep] = useState(0);
  const { theme } = useTheme();

  const handleNext = () => setStep(1);

  // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏—è
  const handleAgree = async () => {
    await storageSet('has_accepted_terms', 'true');
    onComplete();
  };

  return (
    <div className={`fixed inset-0 z-[9999] flex flex-col justify-between p-6 overflow-hidden transition-colors duration-300 ${
      theme === 'dark' ? 'bg-[#1C1C1E]' : 'bg-[#FFE5E0]'
    }`}>

      <AnimatePresence mode="wait">

        {/* STEP 1: INTRO (Telegram-style) */}
        {step === 0 && (
          <motion.div
            key="intro"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            exit={{ opacity: 0, x: -50 }}
            className="flex-1 flex flex-col items-center justify-center text-center"
          >
            {/* –õ–æ–≥–æ—Ç–∏–ø –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */}
            <div className="relative mb-12">
              {/* –õ–æ–≥–æ—Ç–∏–ø —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–π –ø–æ–¥–ª–æ–∂–∫–æ–π */}
              <div className={`w-56 h-56 rounded-[3rem] flex items-center justify-center relative shadow-2xl transition-colors duration-300 ${
                theme === 'dark'
                  ? 'bg-gradient-to-br from-[#2C2C2E] to-slate-800 border-4 border-white/10'
                  : 'bg-gradient-to-br from-slate-100 to-slate-200 border-4 border-white'
              }`}>
                <img
                  src="/logo.svg?v=2"
                  alt="Body Tweaker Logo"
                  className="w-40 h-40 rounded-3xl shadow-2xl"
                />
              </div>
            </div>

            {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ */}
            <div className="mb-8">
              <h1 className={`text-4xl font-black tracking-tight leading-tight mb-4 transition-colors duration-300 ${
                theme === 'dark' ? 'text-white' : 'text-[#1a1a1a]'
              }`}>
                Body Tweaker
              </h1>
              <p className={`text-base font-medium leading-relaxed max-w-xs transition-colors duration-300 ${
                theme === 'dark' ? 'text-slate-400' : 'text-[#4a4a4a]'
              }`}>
                –ù–∞—É—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –≥–æ–ª–æ–¥–∞–Ω–∏—é, –¥—ã—Ö–∞–Ω–∏—é –∏ –æ–∑–¥–æ—Ä–æ–≤–ª–µ–Ω–∏—é –æ—Ä–≥–∞–Ω–∏–∑–º–∞
              </p>
            </div>

            {/* –ö–Ω–æ–ø–∫–∞ */}
            <button
              onClick={handleNext}
              className={`w-full max-w-xs text-white py-4 rounded-2xl font-bold shadow-lg flex items-center justify-center gap-2 active:scale-95 transition-all duration-300 ${
                theme === 'dark'
                  ? 'bg-blue-600 hover:bg-blue-700 shadow-blue-600/20'
                  : 'bg-[#64B5F6] hover:bg-[#54A5E6]'
              }`}
            >
              –ù–∞—á–∞—Ç—å <ChevronRight className="w-5 h-5" />
            </button>
          </motion.div>
        )}

        {/* STEP 2: LEGAL */}
        {step === 1 && (
          <motion.div
            key="legal"
            initial={{ opacity: 0, x: 50 }}
            animate={{ opacity: 1, x: 0 }}
            className="flex-1 flex flex-col h-full pt-10"
          >
            <div className="flex-1 overflow-y-auto pb-4 scrollbar-hide">
              <div className="flex items-center gap-3 mb-6">
                <div className={`p-3 rounded-xl shadow-sm transition-colors duration-300 ${
                  theme === 'dark' ? 'bg-[#2C2C2E]' : 'bg-white'
                }`}>
                  <ShieldCheck className="w-6 h-6 text-blue-600" />
                </div>
                <h2 className={`text-2xl font-[900] transition-colors duration-300 ${
                  theme === 'dark' ? 'text-white' : 'text-slate-800'
                }`}>
                  –í–∞–∂–Ω–æ –∑–Ω–∞—Ç—å
                </h2>
              </div>

              <div className={`rounded-[2rem] p-6 shadow-sm border space-y-6 text-sm leading-relaxed transition-colors duration-300 ${
                theme === 'dark'
                  ? 'bg-[#2C2C2E] border-white/10 text-slate-300'
                  : 'bg-white border-slate-100 text-slate-600'
              }`}>
                <p>
                  –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <strong>Body Tweaker</strong> –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ–¥–∞–Ω–∏—è –∏ –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∞–∫—Ç–∏–∫.
                </p>

                <div className={`p-4 rounded-xl border-l-4 border-orange-400 transition-colors duration-300 ${
                  theme === 'dark' ? 'bg-[#3A3A3C]' : 'bg-slate-50'
                }`}>
                  <h3 className={`font-bold mb-1 flex items-center gap-2 transition-colors duration-300 ${
                    theme === 'dark' ? 'text-white' : 'text-slate-800'
                  }`}>
                    <Activity className="w-4 h-4 text-orange-500" />
                    –û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
                  </h3>
                  <p className={`text-xs transition-colors duration-300 ${
                    theme === 'dark' ? 'text-slate-400' : 'text-slate-500'
                  }`}>
                    –ú—ã –Ω–µ —è–≤–ª—è–µ–º—Å—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º —É—á—Ä–µ–∂–¥–µ–Ω–∏–µ–º. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –≤—Ä–∞—á–∞.
                  </p>
                </div>

                <ul className={`space-y-3 list-disc pl-4 transition-colors duration-300 ${
                  theme === 'dark' ? 'marker:text-slate-600' : 'marker:text-slate-300'
                }`}>
                  <li>
                    –ò—Å–ø–æ–ª—å–∑—É—è —Ç–∞–π–º–µ—Ä –≥–æ–ª–æ–¥–∞–Ω–∏—è, –≤—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç–µ, —á—Ç–æ —É –≤–∞—Å –Ω–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏–π.
                  </li>
                  <li>
                    –î—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ. –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∏—Ö –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ.
                  </li>
                </ul>

                <p className={`text-xs mt-4 pt-4 border-t transition-colors duration-300 ${
                  theme === 'dark'
                    ? 'text-slate-500 border-white/10'
                    : 'text-slate-400 border-slate-100'
                }`}>
                  –ù–∞–∂–∏–º–∞—è ¬´–ü—Ä–∏–Ω—è—Ç—å¬ª, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –£—Å–ª–æ–≤–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
                </p>
              </div>
            </div>

            <div className="pt-4 shrink-0">
              <button
                onClick={handleAgree}
                className="w-full bg-blue-600 text-white py-4 rounded-2xl font-bold shadow-xl shadow-blue-600/20 active:scale-95 transition-all hover:bg-blue-700"
              >
                –ü—Ä–∏–Ω—è—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
              </button>
              <button
                onClick={() => setStep(0)}
                className={`w-full py-3 font-bold text-xs uppercase tracking-wide mt-2 transition-colors duration-300 ${
                  theme === 'dark'
                    ? 'text-slate-500 hover:text-slate-300'
                    : 'text-slate-400 hover:text-slate-600'
                }`}
              >
                –ù–∞–∑–∞–¥
              </button>
            </div>
          </motion.div>
        )}

      </AnimatePresence>
    </div>
  );
};



================================================================================
FILE: src/app/modals/SettingsModal.tsx (439 lines)
================================================================================

// src/app/modals/SettingsModal.tsx
import { useState } from 'react';
import { createPortal } from 'react-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { Bell, Trash2, ShieldCheck, Download, Upload, X, Loader2, Smartphone, Sun, Moon } from 'lucide-react';
import { cn } from '../../utils/cn';

// –•—É–∫–∏ –∏ —É—Ç–∏–ª–∏—Ç—ã
import { useStorage } from '../../hooks/useStorage';
import { useAddToHomeScreen } from '../../hooks/useAddToHomeScreen';
import {
  storageGet,
  storageRemove,
  storageGetJSON,
  storageSetJSON,
  storageSet
} from '../../utils/storage';
import type { NotificationSettings } from '../../utils/types';
import WebApp from '@twa-dev/sdk';
import { useTheme } from '../../contexts/ThemeContext';

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
import { ConfirmModal } from '../../components/ui/ConfirmModal';
import { ToastNotification } from '../../components/ui/ToastNotification';
import { InstallGuideModal } from './InstallGuideModal';

interface Props {
  isOpen: boolean;
  onClose: () => void;
}

export const SettingsModal = ({ isOpen, onClose }: Props) => {
  const user = WebApp.initDataUnsafe?.user;
  const { mode, setMode } = useTheme();

  // –°–æ—Å—Ç–æ—è–Ω–∏—è UI
  const [showResetConfirm, setShowResetConfirm] = useState(false);
  const [showExportToast, setShowExportToast] = useState(false);
  const [showInstallGuide, setShowInstallGuide] = useState(false);
  const [toastMessage, setToastMessage] = useState({ title: '', message: '' });
  const [isProcessing, setIsProcessing] = useState(false);

  // 1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (Cloud)
  const { 
    value: notifications, 
    setValue: setNotifications, 
    isLoading: isSettingsLoading 
  } = useStorage<NotificationSettings>('user_settings', { fasting: true });

  // 2. –õ–æ–≥–∏–∫–∞ PWA (Browser & Telegram)
  const { deferredPrompt, isIOS, isStandalone, promptInstall } = useAddToHomeScreen();
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É –Ω–∞—Ç–∏–≤–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –≤ Telegram (v8.0+)
  const isTelegramNativeInstallSupported = WebApp.isVersionAtLeast('8.0');

  // –£—Å–ª–æ–≤–∏–µ –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏:
  // (Telegram Native –ò–õ–ò iOS –ò–õ–ò Android Prompt) –ò (–ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)
  const canInstall = !isStandalone && (isTelegramNativeInstallSupported || isIOS || !!deferredPrompt);

  // --- HANDLERS ---

  const toggleNotification = (e: React.MouseEvent) => {
      e.stopPropagation();
      setNotifications((prev) => ({ ...prev, fasting: !prev.fasting }));
  };

  const handleInstallClick = () => {
      // 1. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ù–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ Telegram
      if (isTelegramNativeInstallSupported) {
          WebApp.addToHomeScreen();
          return;
      }

      // 2. –§–æ–ª–±—ç–∫–∏ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤
      if (isIOS) {
          setShowInstallGuide(true);
      } else if (deferredPrompt) {
          promptInstall();
      } else {
          // –ï—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç–æ –≤ —Å—Ç–∞—Ä–æ–º Telegram –∏–ª–∏ Desktop
          alert('–§—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –º–æ–±–∏–ª—å–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç–µ Telegram.');
      }
  };

  const handleReset = () => setShowResetConfirm(true);

  const confirmReset = async () => {
      setIsProcessing(true);
      try {
          await Promise.all([
              storageRemove('history_fasting'),
              storageRemove('user_settings'),
              storageRemove('fasting_startTime'),
              storageRemove('fasting_scheme'),
              storageRemove('user_name'),
              storageRemove('has_accepted_terms')
          ]);
          window.location.reload();
      } catch (e) {
          console.error("Reset failed", e);
          setIsProcessing(false);
      }
  };

  const handleExport = async () => {
      setIsProcessing(true);
      try {
          const [history, settings, startTime, scheme, userName, terms] = await Promise.all([
              storageGetJSON('history_fasting', []),
              storageGetJSON('user_settings', { fasting: true }),
              storageGet('fasting_startTime'),
              storageGet('fasting_scheme'),
              storageGet('user_name'),
              storageGet('has_accepted_terms')
          ]);

          const backupData = {
              version: 1,
              date: new Date().toISOString(),
              data: {
                  history_fasting: history,
                  user_settings: settings,
                  fasting_startTime: startTime,
                  fasting_scheme: scheme,
                  user_name: userName,
                  has_accepted_terms: terms
              }
          };
          
          const jsonString = JSON.stringify(backupData, null, 2);
          const blob = new Blob([jsonString], { type: 'application/json' });
          const url = URL.createObjectURL(blob);
          
          const link = document.createElement('a');
          link.href = url;
          link.download = `bodytweaker_backup_${new Date().toISOString().split('T')[0]}.json`;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          URL.revokeObjectURL(url);

          setToastMessage({ title: '–ë—ç–∫–∞–ø —Å–æ–∑–¥–∞–Ω', message: '–§–∞–π–ª –≥–æ—Ç–æ–≤ –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é' });
          setShowExportToast(true);
      } catch (e) {
          console.error("Export failed", e);
          setToastMessage({ title: '–û—à–∏–±–∫–∞', message: '–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –±—ç–∫–∞–ø' });
          setShowExportToast(true);
      } finally {
          setIsProcessing(false);
      }
  };

  const handleImport = (event: React.ChangeEvent<HTMLInputElement>) => {
      const file = event.target.files?.[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = async (e) => {
          setIsProcessing(true);
          try {
              const content = e.target?.result as string;
              const parsed = JSON.parse(content);

              if (!parsed.data) throw new Error('Invalid backup format');
              const { data } = parsed;

              const promises = [];
              if (data.history_fasting) promises.push(storageSetJSON('history_fasting', data.history_fasting));
              if (data.user_settings) promises.push(storageSetJSON('user_settings', data.user_settings));
              if (data.fasting_startTime) promises.push(storageSet('fasting_startTime', data.fasting_startTime));
              if (data.fasting_scheme) promises.push(storageSet('fasting_scheme', data.fasting_scheme));
              if (data.user_name) promises.push(storageSet('user_name', data.user_name));
              if (data.has_accepted_terms) promises.push(storageSet('has_accepted_terms', data.has_accepted_terms));
              
              await Promise.all(promises);

              alert('–î–∞–Ω–Ω—ã–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã! –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–æ.');
              window.location.reload();
          } catch (error) {
              console.error(error);
              alert('–û—à–∏–±–∫–∞: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –±—ç–∫–∞–ø–∞');
          } finally {
              setIsProcessing(false);
          }
      };
      reader.readAsText(file);
      event.target.value = ''; 
  };

  // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const firstName = user?.first_name || '–ì–æ—Å—Ç—å';
  const lastName = user?.last_name || '';
  const username = user?.username ? `@${user.username}` : '–õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å';
  const photoUrl = user?.photo_url;
  const initials = (firstName[0] + (lastName[0] || '')).toUpperCase();

  if (!isOpen) return null;

  const content = (
    <AnimatePresence>
      {/* Backdrop */}
      <motion.div
        initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
        onClick={onClose}
        className="fixed inset-0 bg-black/20 backdrop-blur-sm z-50"
      />

      {/* Modal Sheet */}
      <motion.div
        initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }}
        transition={{ type: "spring", damping: 25, stiffness: 300 }}
        className="fixed bottom-0 left-0 right-0 z-50 bg-[#F2F2F7] dark:bg-[#1C1C1E] rounded-t-[2.5rem] h-[85vh] shadow-2xl flex flex-col overflow-hidden max-w-md mx-auto"
      >
        {/* Handle */}
        <div className="w-full flex justify-center pt-3 pb-2 bg-[#F2F2F7] dark:bg-[#1C1C1E] shrink-0 cursor-pointer" onClick={onClose}>
          <div className="w-12 h-1.5 bg-slate-300 dark:bg-white/20 rounded-full" />
        </div>

        {/* Close Button */}
        <button onClick={onClose} className="absolute top-4 right-4 p-2 bg-slate-200/50 dark:bg-white/10 hover:bg-slate-200 dark:hover:bg-white/20 rounded-full transition-colors z-50">
            <X className="w-5 h-5 text-slate-500 dark:text-slate-400" />
        </button>

        {/* Content Container */}
        <div className="flex-1 overflow-y-auto pb-safe px-6 pt-2 overscroll-contain">

            <div className="mb-8 mt-2">
                <h2 className="text-3xl font-[900] text-slate-800 dark:text-white leading-tight">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <p className="text-sm font-medium text-slate-400 dark:text-slate-500 mt-1">–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</p>
            </div>

            <div className="space-y-6 pb-6">
                
                {/* –ü–†–û–§–ò–õ–¨ */}
                <section>
                    <div className="bg-white dark:bg-[#2C2C2E] border border-slate-100 dark:border-white/10 rounded-[2rem] p-5 shadow-sm relative overflow-hidden">
                        <div className="flex items-center gap-4 relative z-10">
                             <div className="relative shrink-0">
                                {photoUrl ? (
                                    <img src={photoUrl} alt={firstName} className="w-16 h-16 rounded-full border-4 border-slate-50 dark:border-white/10 shadow-sm" />
                                ) : (
                                    <div className="w-16 h-16 rounded-full bg-gradient-to-br from-blue-100 dark:from-blue-900/30 to-indigo-100 dark:to-indigo-900/30 flex items-center justify-center border-4 border-slate-50 dark:border-white/10 shadow-sm text-blue-600 dark:text-blue-400 font-black text-xl tracking-wider">
                                        {initials}
                                    </div>
                                )}
                            </div>
                            <div className="min-w-0">
                                <h3 className="font-[900] text-lg text-slate-800 dark:text-white leading-tight truncate">{firstName} {lastName}</h3>
                                <p className="text-sm font-medium text-slate-400 dark:text-slate-500 truncate">{username}</p>
                            </div>
                        </div>
                    </div>
                </section>

                {/* –ü–†–ò–õ–û–ñ–ï–ù–ò–ï */}
                <section>
                    <h4 className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-3 ml-1">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h4>
                    <div className="bg-white dark:bg-[#2C2C2E] border border-slate-100 dark:border-white/10 rounded-2xl overflow-hidden shadow-sm">

                        {/* –ö–ù–û–ü–ö–ê –£–°–¢–ê–ù–û–í–ö–ò */}
                        {canInstall && (
                             <button
                                onClick={handleInstallClick}
                                className="w-full flex items-center justify-between p-4 cursor-pointer active:bg-slate-50 dark:active:bg-[#3A3A3C] transition-colors border-b border-slate-50 dark:border-white/5"
                             >
                                <div className="flex items-center gap-3">
                                    <div className="p-2 bg-slate-800 dark:bg-slate-100 rounded-lg text-white dark:text-slate-900">
                                        <Smartphone className="w-4 h-4" />
                                    </div>
                                    <div className="text-left">
                                        <span className="text-sm font-bold text-slate-800 dark:text-white block leading-tight">
                                            –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                                        </span>
                                        <span className="text-[10px] text-slate-400 dark:text-slate-500 font-medium">
                                            –î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
                                        </span>
                                    </div>
                                </div>
                                <div className="bg-slate-100 dark:bg-[#3A3A3C] px-3 py-1.5 rounded-lg">
                                    <span className="text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase">
                                        {isTelegramNativeInstallSupported ? '–î–æ–±–∞–≤–∏—Ç—å' : (isIOS ? '–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è' : '–°–∫–∞—á–∞—Ç—å')}
                                    </span>
                                </div>
                             </button>
                        )}

                        {/* –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø */}
                        <div className="flex items-center justify-between p-4">
                            <div className="flex items-center gap-3">
                                <div className="p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-blue-500 dark:text-blue-400">
                                    <Bell className="w-4 h-4" />
                                </div>
                                <span className="text-sm font-medium text-slate-700 dark:text-slate-200">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞</span>
                            </div>

                            {isSettingsLoading ? (
                                <Loader2 className="w-5 h-5 animate-spin text-slate-300 dark:text-slate-600" />
                            ) : (
                                <button
                                    type="button"
                                    onClick={toggleNotification}
                                    className={cn("w-12 h-7 rounded-full relative transition-colors duration-300", notifications.fasting ? "bg-slate-800 dark:bg-slate-100" : "bg-slate-200 dark:bg-[#3A3A3C]")}
                                >
                                    <div className={cn("w-5 h-5 bg-white dark:bg-slate-900 rounded-full absolute top-1 transition-transform duration-300 shadow-sm", notifications.fasting ? "left-6" : "left-1")} />
                                </button>
                            )}
                        </div>

                    </div>
                </section>

                {/* –¢–ï–ú–ê */}
                <section>
                    <h4 className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-3 ml-1">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</h4>
                    <div className="bg-white dark:bg-[#2C2C2E] border border-slate-100 dark:border-white/10 rounded-2xl overflow-hidden shadow-sm">
                        <div className="flex items-center justify-between p-4">
                            <div className="flex items-center gap-3">
                                <div className="p-2 bg-amber-50 dark:bg-amber-900/30 rounded-lg text-amber-500 dark:text-amber-400">
                                    {mode === 'light' ? <Sun className="w-4 h-4" /> : mode === 'dark' ? <Moon className="w-4 h-4" /> : <Smartphone className="w-4 h-4" />}
                                </div>
                                <div className="text-left">
                                    <span className="text-sm font-bold text-slate-800 dark:text-white block leading-tight">
                                        –¢–µ–º–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                                    </span>
                                    <span className="text-[10px] text-slate-400 dark:text-slate-500 font-medium">
                                        {mode === 'light' ? '–°–≤–µ—Ç–ª–∞—è' : mode === 'dark' ? '–¢—ë–º–Ω–∞—è' : '–ê–≤—Ç–æ'}
                                    </span>
                                </div>
                            </div>

                            {/* Segmented Control */}
                            <div className="flex bg-slate-100 dark:bg-[#3A3A3C] rounded-lg p-1 gap-1">
                                <button
                                    onClick={() => setMode('light')}
                                    className={cn(
                                        "px-3 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all",
                                        mode === 'light'
                                            ? "bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm"
                                            : "text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"
                                    )}
                                >
                                    <Sun className="w-3.5 h-3.5" />
                                </button>
                                <button
                                    onClick={() => setMode('dark')}
                                    className={cn(
                                        "px-3 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all",
                                        mode === 'dark'
                                            ? "bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm"
                                            : "text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"
                                    )}
                                >
                                    <Moon className="w-3.5 h-3.5" />
                                </button>
                                <button
                                    onClick={() => setMode('auto')}
                                    className={cn(
                                        "px-3 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all",
                                        mode === 'auto'
                                            ? "bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm"
                                            : "text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-300"
                                    )}
                                >
                                    AUTO
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                {/* –î–ê–ù–ù–´–ï */}
                <section>
                    <h4 className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-3 ml-1">–î–∞–Ω–Ω—ã–µ</h4>
                    <div className="grid grid-cols-2 gap-3">
                        <button onClick={handleExport} disabled={isProcessing} className="flex items-center justify-center gap-2 p-4 bg-white dark:bg-[#2C2C2E] border border-slate-100 dark:border-white/10 rounded-2xl hover:bg-slate-50 dark:hover:bg-[#3A3A3C] transition-colors shadow-sm active:scale-95 disabled:opacity-50">
                            {isProcessing ? <Loader2 className="w-4 h-4 animate-spin" /> : <Download className="w-4 h-4 text-slate-400 dark:text-slate-500" />}
                            <span className="text-xs font-bold text-slate-600 dark:text-slate-300">–ë—ç–∫–∞–ø</span>
                        </button>

                        <label className={cn("flex items-center justify-center gap-2 p-4 bg-white dark:bg-[#2C2C2E] border border-slate-100 dark:border-white/10 rounded-2xl hover:bg-slate-50 dark:hover:bg-[#3A3A3C] transition-colors shadow-sm cursor-pointer active:scale-95", isProcessing && "opacity-50 pointer-events-none")}>
                            <input
                                type="file"
                                accept=".json"
                                onChange={handleImport}
                                className="hidden"
                                disabled={isProcessing}
                            />
                            {isProcessing ? <Loader2 className="w-4 h-4 animate-spin" /> : <Upload className="w-4 h-4 text-slate-400 dark:text-slate-500" />}
                            <span className="text-xs font-bold text-slate-600 dark:text-slate-300">–ò–º–ø–æ—Ä—Ç</span>
                        </label>
                    </div>
                </section>

                {/* –§–£–¢–ï–† (–¶–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π) */}
                <div className="flex flex-col items-center gap-4 mt-8 pb-8">
                    <button onClick={handleReset} className="w-full flex items-center justify-center gap-2 p-4 text-red-500 dark:text-red-400 bg-red-50/50 dark:bg-red-900/20 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-2xl border border-red-100/50 dark:border-red-900/30 transition-colors text-sm font-bold active:scale-98">
                        {isProcessing ? <Loader2 className="w-4 h-4 animate-spin" /> : <Trash2 className="w-4 h-4" />}
                        –°–±—Ä–æ—Å–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
                    </button>

                    <div className="inline-flex items-center gap-1.5 px-3 py-1 bg-slate-50 dark:bg-[#3A3A3C] rounded-full border border-slate-100 dark:border-white/10">
                        <ShieldCheck className="w-3 h-3 text-slate-400 dark:text-slate-500" />
                        <span className="text-[10px] font-medium text-slate-400 dark:text-slate-500">Ver 2.0.1 (Cloud)</span>
                    </div>
                </div>

            </div>
        </div>
      </motion.div>

      {/* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ (–≤–Ω–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —à—Ç–æ—Ä–∫–∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ z-index) */}
      <ConfirmModal
        isOpen={showResetConfirm}
        onClose={() => setShowResetConfirm(false)}
        onConfirm={confirmReset}
        title="–°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö"
        message="–£–¥–∞–ª–∏—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –æ–±–ª–∞–∫–∞?"
        confirmText="–£–¥–∞–ª–∏—Ç—å"
        cancelText="–û—Ç–º–µ–Ω–∞"
        variant="danger"
      />

      <ToastNotification
        isVisible={showExportToast}
        title={toastMessage.title}
        message={toastMessage.message}
        onClose={() => setShowExportToast(false)}
      />

      <InstallGuideModal 
        isOpen={showInstallGuide} 
        onClose={() => setShowInstallGuide(false)} 
      />
    </AnimatePresence>
  );

  return createPortal(content, document.body);
};



================================================================================
FILE: src/app/modals/InfoModal.tsx (188 lines)
================================================================================

import { motion, AnimatePresence } from 'framer-motion';
import { Send, User, X, Code, CheckCircle2, Stethoscope } from 'lucide-react';
import { cn } from '../../utils/cn';
import WebApp from '@twa-dev/sdk';
import { createPortal } from 'react-dom';

interface Props {
  isOpen: boolean;
  onClose: () => void;
}

export const InfoModal = ({ isOpen, onClose }: Props) => {
  if (!isOpen) return null;

  const currentUser = WebApp.initDataUnsafe?.user;

  const team = [
    {
      role: "–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫",
      name: "@nikita_sytsevich",
      link: "https://t.me/nikita_sytsevich",
      icon: Code,
      color: "bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",
      border: "border-blue-100 dark:border-blue-900/30"
    },
    {
      role: "QA & –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ",
      name: "@inntheeairr",
      link: "https://t.me/inntheeairr",
      icon: CheckCircle2,
      color: "bg-purple-50 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",
      border: "border-purple-100 dark:border-purple-900/30"
    },
    {
      role: "–í–µ–¥—É—â–∏–π —Ä–µ–∞–±–∏–ª–∏—Ç–æ–ª–æ–≥",
      name: "@bubnovzavaliebalo",
      link: "https://t.me/bubnovzavaliebalo",
      icon: Stethoscope,
      color: "bg-emerald-50 text-emerald-600 dark:bg-emerald-900/30 dark:text-emerald-400",
      border: "border-emerald-100 dark:border-emerald-900/30"
    }
  ];

  const content = (
    <AnimatePresence>
      {/* Backdrop */}
      <motion.div
        initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
        onClick={onClose}
        className="fixed inset-0 bg-black/20 backdrop-blur-sm z-50"
      />

      {/* Modal Sheet */}
      <motion.div
        initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }}
        transition={{ type: "spring", damping: 25, stiffness: 300 }}
        className="fixed bottom-0 left-0 right-0 z-50 bg-[#F2F2F7] dark:bg-[#1C1C1E] rounded-t-[2.5rem] h-[85vh] shadow-2xl flex flex-col overflow-hidden max-w-md mx-auto"
      >
        {/* Handle */}
        <div className="w-full flex justify-center pt-3 pb-2 bg-[#F2F2F7] dark:bg-[#1C1C1E] shrink-0" onClick={onClose}>
          <div className="w-12 h-1.5 bg-slate-300 dark:bg-white/20 rounded-full" />
        </div>

        {/* Close Button */}
        <button onClick={onClose} className="absolute top-4 right-4 p-2 bg-slate-200/50 dark:bg-white/10 hover:bg-slate-200 dark:hover:bg-white/20 rounded-full transition-colors z-50">
            <X className="w-5 h-5 text-slate-500 dark:text-slate-400" />
        </button>

        {/* Content Container */}
        <div className="flex-1 overflow-y-auto pb-safe px-6 pt-2">

            {/* –ë–û–õ–¨–®–û–ï –õ–û–ì–û –ù–ê –í–°–Æ –®–ò–†–ò–ù–£ */}
            <div className="mb-6 mt-4">
                <div className="relative w-full h-36 bg-gradient-to-br from-slate-100 to-slate-200 dark:from-[#2C2C2E] dark:to-slate-800 rounded-[2rem] shadow-lg overflow-hidden border-4 border-white dark:border-white/10 flex items-center justify-center gap-4">
                    {/* –ü–∞—Ç—Ç–µ—Ä–Ω –Ω–∞ —Ñ–æ–Ω–µ */}
                    <div className="absolute inset-0 opacity-5">
                        <div className="w-full h-full" style={{ backgroundImage: 'radial-gradient(circle, #000 1px, transparent 1px)', backgroundSize: '20px 20px' }}></div>
                    </div>

                    <div className="relative z-10">
                        <img
                            src="/logo.svg?v=2"
                            alt="Body Tweaker Logo"
                            className="w-20 h-20 rounded-2xl shadow-xl"
                        />
                    </div>

                    <div className="relative z-10 text-center">
                        <h1 className="text-3xl font-black text-slate-900 dark:text-white tracking-tight leading-none">
                            Body Tweaker
                        </h1>
                        <p className="text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-widest">
                            Scientific Biohacking Tools
                        </p>
                    </div>
                </div>
            </div>

            {/* –ü–†–û–§–ò–õ–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø */}
            <div className="flex items-center justify-between mb-6 bg-white dark:bg-[#2C2C2E] p-3 rounded-2xl border border-slate-100 dark:border-white/10 shadow-sm">
                <div className="flex items-center gap-3">
                    <div className="relative">
                        {currentUser?.photo_url ? (
                            <img
                                src={currentUser.photo_url}
                                alt="User"
                                className="w-10 h-10 rounded-full border-2 border-slate-50 dark:border-white/10 shadow-sm"
                            />
                        ) : (
                            <div className="w-10 h-10 bg-slate-100 dark:bg-[#3A3A3C] rounded-full flex items-center justify-center border-2 border-slate-50 dark:border-white/10">
                                <User className="w-5 h-5 text-slate-400 dark:text-slate-600" />
                            </div>
                        )}
                        <div className="absolute bottom-0 right-0 w-3 h-3 bg-emerald-500 border-2 border-white rounded-full" />
                    </div>

                    <div>
                        <p className="text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wide">
                            –ü—Ä–æ—Ñ–∏–ª—å
                        </p>
                        <p className="text-sm font-bold text-slate-800 dark:text-white">
                            {currentUser?.first_name || '–ì–æ—Å—Ç—å'} {currentUser?.last_name || ''}
                        </p>
                    </div>
                </div>
            </div>

            {/* –ö–û–ú–ê–ù–î–ê - –ö–†–ê–°–ò–í–ê–Ø –°–ï–¢–ö–ê 3x1 */}
            <div className="mb-4">
                <h3 className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-2 mb-3">
                    –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞
                </h3>

                <div className="grid grid-cols-3 gap-2">
                    {team.map((member) => (
                        <a
                            key={member.name}
                            href={member.link}
                            target="_blank"
                            rel="noopener noreferrer"
                            className="group relative bg-white dark:bg-[#2C2C2E] p-3 rounded-2xl border border-slate-100 dark:border-white/10 shadow-sm hover:shadow-md hover:scale-[1.02] transition-all duration-200 flex flex-col items-center text-center"
                        >
                            {/* –ò–∫–æ–Ω–∫–∞ —Ä–æ–ª–∏ */}
                            <div className={cn(
                                "w-11 h-11 rounded-xl flex items-center justify-center mx-auto mb-2 relative",
                                member.color
                            )}>
                                <member.icon className="w-6 h-6" />
                                {/* –ë–ª–µ—Å—Ç—è—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */}
                                <div className="absolute inset-0 rounded-xl bg-gradient-to-br from-white/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                            </div>

                            {/* –ò–º—è –±–µ–∑ @ */}
                            <p className="text-xs font-bold text-slate-800 dark:text-white truncate mb-1 leading-tight">
                                {member.name.replace('@', '')}
                            </p>

                            {/* –†–æ–ª—å */}
                            <p className="text-[9px] font-medium text-slate-400 dark:text-slate-500 leading-tight line-clamp-2">
                                {member.role}
                            </p>

                            {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Å—ã–ª–∫–∏ - –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */}
                            <div className="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                <div className="w-5 h-5 rounded-full bg-slate-100 dark:bg-slate-700 flex items-center justify-center">
                                    <Send className="w-3 h-3 text-slate-500 dark:text-slate-400" />
                                </div>
                            </div>
                        </a>
                    ))}
                </div>
            </div>

            {/* FOOTER */}
            <div className="text-center pb-6 opacity-40">
                <p className="text-[9px] text-slate-400 dark:text-slate-500">
                    Built with ‚ù§Ô∏è for Biohackers
                </p>
            </div>

        </div>
      </motion.div>
    </AnimatePresence>
  );

  return createPortal(content, document.body);
};



================================================================================
FILE: src/app/modals/InstallGuideModal.tsx (74 lines)
================================================================================

import { createPortal } from 'react-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { Share, PlusSquare, Smartphone } from 'lucide-react';

interface Props {
  isOpen: boolean;
  onClose: () => void;
}

export const InstallGuideModal = ({ isOpen, onClose }: Props) => {
  const content = (
    <AnimatePresence>
      {isOpen && (
        <>
          <motion.div
            initial={{ opacity: 0 }} animate={{ opacity: 1 }} exit={{ opacity: 0 }}
            onClick={onClose}
            className="fixed inset-0 bg-black/40 backdrop-blur-sm z-[100]"
          />

          <motion.div
            initial={{ y: "100%" }} animate={{ y: 0 }} exit={{ y: "100%" }}
            transition={{ type: "spring", damping: 25, stiffness: 300 }}
            className="fixed bottom-0 left-0 right-0 z-[101] bg-[#F2F2F7] dark:bg-[#1C1C1E] rounded-t-[2.5rem] p-6 pb-10 shadow-2xl max-w-md mx-auto"
          >
            <div className="w-12 h-1.5 bg-slate-300 dark:bg-white/20 rounded-full mx-auto mb-6" />

            <div className="text-center mb-8">
                <div className="w-16 h-16 bg-blue-600 dark:bg-blue-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-500/30">
                    <Smartphone className="w-8 h-8 text-white" />
                </div>
                <h2 className="text-2xl font-[900] text-slate-800 dark:text-white leading-tight">
                    –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                </h2>
                <p className="text-sm text-slate-500 dark:text-slate-400 mt-2 px-4">
                    –î–æ–±–∞–≤—å—Ç–µ Body Tweaker –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏ —Ä–∞–±–æ—Ç—ã –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞.
                </p>
            </div>

            <div className="space-y-4 bg-white dark:bg-[#2C2C2E] p-5 rounded-2xl shadow-sm border border-slate-100 dark:border-white/10">
                <div className="flex items-center gap-4">
                    <div className="w-8 h-8 bg-slate-50 dark:bg-[#3A3A3C] rounded-lg flex items-center justify-center shrink-0">
                        <span className="font-bold text-slate-400 dark:text-slate-500">1</span>
                    </div>
                    <div className="text-sm font-medium text-slate-700 dark:text-slate-200 flex items-center gap-2">
                        –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É <Share className="w-4 h-4 text-blue-500" /> <b>–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</b>
                    </div>
                </div>
                <div className="w-full h-px bg-slate-50 dark:bg-white/10" />
                <div className="flex items-center gap-4">
                     <div className="w-8 h-8 bg-slate-50 dark:bg-[#3A3A3C] rounded-lg flex items-center justify-center shrink-0">
                        <span className="font-bold text-slate-400 dark:text-slate-500">2</span>
                    </div>
                    <div className="text-sm font-medium text-slate-700 dark:text-slate-200 flex items-center gap-2">
                        –í—ã–±–µ—Ä–∏—Ç–µ <PlusSquare className="w-4 h-4 text-slate-400 dark:text-slate-600" /> <b>–ù–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª</b>
                    </div>
                </div>
            </div>

            <button
                onClick={onClose}
                className="w-full mt-6 py-4 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-2xl font-bold active:scale-95 transition-transform"
            >
                –ü–æ–Ω—è—Ç–Ω–æ
            </button>
          </motion.div>
        </>
      )}
    </AnimatePresence>
  );

  return createPortal(content, document.body);
};



================================================================================
FILE: src/contexts/ThemeContext.tsx (142 lines)
================================================================================

/* eslint-disable react-refresh/only-export-components */
import React, { createContext, useContext, useEffect, useState } from 'react'
import WebApp from '@twa-dev/sdk'
import { storageGet, storageSet } from '../utils/storage'

type ThemeMode = 'light' | 'dark' | 'auto'
type Theme = 'light' | 'dark'

interface ThemeContextType {
  theme: Theme
  mode: ThemeMode
  setMode: (mode: ThemeMode) => void
}

const ThemeContext = createContext<ThemeContextType | undefined>(undefined)

export const useTheme = () => {
  const context = useContext(ThemeContext)
  if (!context) {
    throw new Error('useTheme must be used within ThemeProvider')
  }
  return context
}

interface ThemeProviderProps {
  children: React.ReactNode
}

export const ThemeProvider: React.FC<ThemeProviderProps> = ({ children }) => {
  const getSystemTheme = (): Theme => {
    try {
      return WebApp.colorScheme === 'dark' ? 'dark' : 'light'
    } catch {
      console.warn('WebApp not ready, falling back to light theme')
      return 'light' // Fallback –µ—Å–ª–∏ WebApp –Ω–µ –≥–æ—Ç–æ–≤
    }
  }

  const getThemeFromMode = (mode: ThemeMode): Theme => {
    if (mode === 'auto') {
      return getSystemTheme()
    }
    return mode
  }
  const [mode, setModeState] = useState<ThemeMode>('auto')
  const [isInitialized, setIsInitialized] = useState(false)

  // 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–π —Ç–µ–º—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
  useEffect(() => {
    const loadTheme = async () => {
      try {
        const savedMode = await storageGet('theme_mode')
        if (savedMode && ['light', 'dark', 'auto'].includes(savedMode)) {
          setModeState(savedMode as ThemeMode)
        }
      } catch (e) {
        console.error('Failed to load theme mode:', e)
      } finally {
        setIsInitialized(true)
      }
    }
    loadTheme()
  }, [])

  // 2. –í—ã—á–∏—Å–ª—è–µ–º —Ç–µ–∫—É—â—É—é —Ç–µ–º—É –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∂–∏–º–∞
  const theme = getThemeFromMode(mode)

  // 3. –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–º—É –∫ DOM –∏ Telegram
  useEffect(() => {
    if (!isInitialized) return

    const root = document.documentElement
    if (theme === 'dark') {
      root.classList.add('dark')
    } else {
      root.classList.remove('dark')
    }

    // Sync Telegram header and background colors (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ WebApp –≥–æ—Ç–æ–≤)
    try {
      const headerColor = theme === 'dark' ? '#1C1C1E' : '#F2F2F7'
      if (WebApp.setHeaderColor && WebApp.setBackgroundColor) {
        WebApp.setHeaderColor(headerColor)
        WebApp.setBackgroundColor(headerColor)
      }
    } catch {
      // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ WebApp
    }
  }, [theme, isInitialized])

  // 4. –°–ª—É—à–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã –∏–∑ Telegram (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–∂–∏–º–∞ auto)
  useEffect(() => {
    if (mode !== 'auto') return

    const handleThemeChange = () => {
      const newTheme = getSystemTheme()
      const root = document.documentElement
      if (newTheme === 'dark') {
        root.classList.add('dark')
      } else {
        root.classList.remove('dark')
      }

      try {
        const headerColor = newTheme === 'dark' ? '#1C1C1E' : '#F2F2F7'
        if (WebApp.setHeaderColor && WebApp.setBackgroundColor) {
          WebApp.setHeaderColor(headerColor)
          WebApp.setBackgroundColor(headerColor)
        }
      } catch {
        // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ WebApp
      }
    }

    try {
      WebApp.onEvent('themeChanged', handleThemeChange)
    } catch {
      // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ WebApp
    }

    return () => {
      try {
        WebApp.offEvent('themeChanged', handleThemeChange)
      } catch {
        // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –æ—à–∏–±–∫–∏ WebApp
      }
    }
  }, [mode])

  // 5. –§—É–Ω–∫—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
  const setMode = (newMode: ThemeMode) => {
    setModeState(newMode)
    storageSet('theme_mode', newMode) // fire & forget
  }

  return (
    <ThemeContext.Provider value={{ theme, mode, setMode }}>
      {children}
    </ThemeContext.Provider>
  )
}



================================================================================
FILE: src/features/fasting/context/TimerContext.tsx (219 lines)
================================================================================

// src/features/fasting/context/TimerContext.tsx
import React, { createContext, useContext, useState, useEffect, useRef, useCallback } from 'react';
import dayjs from 'dayjs';

import { FASTING_SCHEMES } from '../data/schemes';
import type { FastingScheme } from '../data/schemes';
import { FASTING_PHASES } from '../data/stages';

import { 
    storageGet, 
    storageSet, 
    storageRemove, 
    storageGetJSON,
    storageUpdateHistory
} from '../../../utils/storage'; // üëà NEW

import type { NotificationSettings, HistoryRecord } from '../../../utils/types';

interface TimerContextType {
    isFasting: boolean;
    scheme: FastingScheme;
    setSchemeId: (id: string) => void;
    progress: number;
    elapsedFormatted: string;
    elapsed: number;
    toggleFasting: () => void;
    startTime: string | null;
    setStartTime: (date: string | null) => void;
    notification: {title: string, message: string, phaseId?: number} | null;
    closeNotification: () => void;
    phaseToOpen: number | null;
    setPhaseToOpen: (id: number | null) => void;
    isLoading: boolean; // üëà NEW
}

const TimerContext = createContext<TimerContextType | null>(null);

export const TimerProvider = ({ children }: { children: React.ReactNode }) => {
    // –ù–∞—á–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—É—Å—Ç—ã–µ –∏–ª–∏ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ
    const [schemeId, setSchemeIdState] = useState<string>(FASTING_SCHEMES[0].id);
    const [startTime, setStartTimeState] = useState<string | null>(null);
    const [isLoading, setIsLoading] = useState(true); // üëà –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    
    const [elapsed, setElapsed] = useState(0);
    const [notification, setNotification] = useState<{title: string, message: string, phaseId?: number} | null>(null);
    const [phaseToOpen, setPhaseToOpen] = useState<number | null>(null);
    
    const lastPhaseIndexRef = useRef<number>(-1);

    const scheme = FASTING_SCHEMES.find((s) => s.id === schemeId) || FASTING_SCHEMES[0];
    const goalSeconds = scheme.hours * 3600;

    // 1. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    useEffect(() => {
        const init = async () => {
            try {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—Ö–µ–º—É
                const savedSchemeId = await storageGet('fasting_scheme');
                if (savedSchemeId && FASTING_SCHEMES.find(s => s.id === savedSchemeId)) {
                    setSchemeIdState(savedSchemeId);
                }

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Ä–µ–º—è —Å—Ç–∞—Ä—Ç–∞
                const savedStart = await storageGet('fasting_startTime');
                if (savedStart) {
                    setStartTimeState(savedStart);
                    
                    // –°—Ä–∞–∑—É –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —Ñ–∞–∑—É, —á—Ç–æ–±—ã –Ω–µ –∂–¥–∞—Ç—å useEffect —Ç–∞–π–º–µ—Ä–∞
                    const now = dayjs();
                    const diff = now.diff(dayjs(savedStart), 'second');
                    setElapsed(diff >= 0 ? diff : 0);
                    
                    const currentHours = now.diff(dayjs(savedStart), 'hour');
                    lastPhaseIndexRef.current = FASTING_PHASES.findIndex((p) => currentHours >= p.hoursStart);
                }
            } catch (e) {
                console.error("Timer init error:", e);
            } finally {
                setIsLoading(false);
            }
        };

        init();
    }, []);

    // 2. –°–µ—Ç—Ç–µ—Ä —Å—Ö–µ–º—ã
    const setSchemeId = useCallback((id: string) => {
        setSchemeIdState(id);
        storageSet('fasting_scheme', id); // fire & forget
    }, []);

    // 3. –°–µ—Ç—Ç–µ—Ä –≤—Ä–µ–º–µ–Ω–∏
    const setStartTime = useCallback((date: string | null) => {
        setStartTimeState(date);
        if (date) {
            storageSet('fasting_startTime', date);
            const now = dayjs();
            const diff = now.diff(dayjs(date), 'second');
            setElapsed(diff >= 0 ? diff : 0);
            
            const currentHours = now.diff(dayjs(date), 'hour');
            lastPhaseIndexRef.current = FASTING_PHASES.findIndex((p) => currentHours >= p.hoursStart);
        } else {
            storageRemove('fasting_startTime');
            setElapsed(0);
            lastPhaseIndexRef.current = -1;
        }
    }, []);

    // 4. –¢–∞–π–º–µ—Ä
    useEffect(() => {
        if (!startTime) {
            setElapsed(0);
            return;
        }
        
        const update = () => {
            const start = dayjs(startTime);
            const now = dayjs();
            const diff = now.diff(start, 'second');
            const safeDiff = diff >= 0 ? diff : 0;
            setElapsed(safeDiff);

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–∑
            if (safeDiff % 60 === 0) {
                const currentHours = safeDiff / 3600;
                const newPhaseIndex = FASTING_PHASES.findIndex((p) => currentHours >= p.hoursStart && (!p.hoursEnd || currentHours < p.hoursEnd));
                
                if (newPhaseIndex !== -1 && newPhaseIndex !== lastPhaseIndexRef.current) {
                    if (lastPhaseIndexRef.current !== -1) {
                        // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ç—É—Ç –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–º–∏—Å, –Ω–æ useEffect —Å–∏–Ω—Ö—Ä–æ–Ω–µ–Ω)
                        storageGetJSON<NotificationSettings>('user_settings', { fasting: true }).then(settings => {
                            if (settings.fasting !== false) {
                                const phase = FASTING_PHASES[newPhaseIndex];
                                setNotification({
                                    title: `–ù–æ–≤—ã–π —ç—Ç–∞–ø: ${phase.title}`,
                                    message: phase.subtitle,
                                    phaseId: phase.id
                                });
                                if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
                            }
                        });
                    }
                    lastPhaseIndexRef.current = newPhaseIndex;
                }
            }
        };

        update();
        const interval = setInterval(update, 1000);
        return () => clearInterval(interval);
    }, [startTime]);

    // 5. –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å (–°—Ç–∞—Ä—Ç/–°—Ç–æ–ø)
    const toggleFasting = useCallback(() => {
        if (startTime) {
            // STOP
            const now = dayjs();
            const start = dayjs(startTime);
            const duration = now.diff(start, 'second');
            
            if (duration > 60) {
                const record: HistoryRecord = {
                    id: Date.now().toString(),
                    type: 'fasting',
                    scheme: scheme.title,
                    startTime: startTime,
                    endTime: now.toISOString(),
                    durationSeconds: duration
                };
                storageUpdateHistory('history_fasting', record);
            }
            setStartTime(null);
        } else {
            // START
            setStartTime(dayjs().toISOString());
            lastPhaseIndexRef.current = 0;
        }
    }, [startTime, scheme.title, setStartTime]);

    const progress = Math.min((elapsed / goalSeconds) * 100, 100);

    const formatTime = (totalSeconds: number) => {
        const h = Math.floor(totalSeconds / 3600);
        const m = Math.floor((totalSeconds % 3600) / 60);
        const s = totalSeconds % 60;
        return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    };

    return (
        <TimerContext.Provider value={{
            isFasting: !!startTime,
            scheme,
            setSchemeId,
            progress,
            elapsedFormatted: formatTime(elapsed),
            elapsed,
            toggleFasting,
            startTime,
            setStartTime,
            notification,
            closeNotification: () => setNotification(null),
            phaseToOpen,
            setPhaseToOpen,
            isLoading // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ–ª–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏
        }}>
            {children}
        </TimerContext.Provider>
    );
};

export const useFastingTimerContext = () => {
    const context = useContext(TimerContext);
    if (!context) {
        throw new Error('useFastingTimerContext must be used within a TimerProvider');
    }
    return context;
};



================================================================================
FILE: src/features/fasting/hooks/useFastingTimer.ts (147 lines)
================================================================================

// src/features/fasting/hooks/useFastingTimer.ts
// –ï—Å–ª–∏ —ç—Ç–æ—Ç —Ö—É–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç TimerProvider, –µ–≥–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ç–∞–∫:
import { useState, useEffect, useRef, useCallback } from 'react';
import dayjs from 'dayjs';
import { FASTING_SCHEMES } from '../data/schemes';
import { FASTING_PHASES } from '../data/stages';
import { 
  storageGet, 
  storageSet, 
  storageRemove, 
  storageGetJSON,
  storageUpdateHistory 
} from '../../../utils/storage'; // üëà NEW
import type { NotificationSettings, HistoryRecord } from '../../../utils/types';

export const useFastingTimer = () => {
  const [schemeId, setSchemeId] = useState(FASTING_SCHEMES[0].id);
  const [startTime, setStartTimeState] = useState<string | null>(null);
  const [elapsed, setElapsed] = useState(0);
  const [notification, setNotification] = useState<{title: string, message: string} | null>(null);
  const lastPhaseIndexRef = useRef<number>(-1);

  const scheme = FASTING_SCHEMES.find(s => s.id === schemeId) || FASTING_SCHEMES[0];
  const goalSeconds = scheme.hours * 3600;

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  useEffect(() => {
      const init = async () => {
          const sId = await storageGet('fasting_scheme');
          if(sId) setSchemeId(sId);

          const sTime = await storageGet('fasting_startTime');
          if(sTime) {
              setStartTimeState(sTime);
              const start = dayjs(sTime);
              const diff = dayjs().diff(start, 'hour');
              lastPhaseIndexRef.current = FASTING_PHASES.findIndex(p => diff >= p.hoursStart);
          }
      };
      init();
  }, []);

  const setStartTime = useCallback((date: string | null) => {
    setStartTimeState(date);
    if (date) {
      storageSet('fasting_startTime', date);
      // ... logic
    } else {
      storageRemove('fasting_startTime');
      // ... logic
    }
  }, []);

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã
  useEffect(() => {
     if (schemeId) storageSet('fasting_scheme', schemeId);
  }, [schemeId]);

  // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ç–∞–∫–æ–π –∂–µ, –Ω–æ settings —á–∏—Ç–∞–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
  useEffect(() => {
    if (!startTime) {
      setElapsed(0);
      return;
    }
    
    const update = () => {
        const start = dayjs(startTime);
        const now = dayjs();
        const diff = now.diff(start, 'second');
        const safeDiff = diff >= 0 ? diff : 0;
        setElapsed(safeDiff);

        if (safeDiff % 60 === 0) { 
            const currentHours = safeDiff / 3600;
            const newPhaseIndex = FASTING_PHASES.findIndex(p => currentHours >= p.hoursStart && (!p.hoursEnd || currentHours < p.hoursEnd));
            
            if (newPhaseIndex !== -1 && newPhaseIndex !== lastPhaseIndexRef.current) {
                if (lastPhaseIndexRef.current !== -1) {
                    // ASYNC CHECK
                    storageGetJSON<NotificationSettings>('user_settings', { fasting: true }).then(settings => {
                        if (settings.fasting !== false) {
                            const phase = FASTING_PHASES[newPhaseIndex];
                            setNotification({
                                title: `–ù–æ–≤—ã–π —ç—Ç–∞–ø: ${phase.title}`,
                                message: phase.subtitle
                            });
                            if (navigator.vibrate) navigator.vibrate([100, 50, 100]);
                        }
                    });
                }
                lastPhaseIndexRef.current = newPhaseIndex;
            }
        }
    };
    update();
    const interval = setInterval(update, 1000);
    return () => clearInterval(interval);
  }, [startTime]);

  const toggleFasting = useCallback(() => {
    if (startTime) {
        const now = dayjs();
        const start = dayjs(startTime);
        const duration = now.diff(start, 'second');
        
        if (duration > 60) {
            const record: HistoryRecord = {
                id: Date.now().toString(),
                type: 'fasting',
                scheme: scheme.title,
                startTime: startTime,
                endTime: now.toISOString(),
                durationSeconds: duration
            };
            storageUpdateHistory('history_fasting', record);
        }
        setStartTime(null);
    } else {
        const nowStr = dayjs().toISOString();
        setStartTime(nowStr);
        lastPhaseIndexRef.current = 0;
    }
  }, [startTime, scheme.title, setStartTime]);

  const progress = Math.min((elapsed / goalSeconds) * 100, 100);
  const formatTime = (totalSeconds: number) => {
    const h = Math.floor(totalSeconds / 3600);
    const m = Math.floor((totalSeconds % 3600) / 60);
    const s = totalSeconds % 60;
    return `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
  };

  return {
    isFasting: !!startTime,
    scheme,
    setSchemeId,
    progress,
    elapsedFormatted: formatTime(elapsed),
    elapsed,
    toggleFasting,
    startTime,
    setStartTime,
    notification,
    closeNotification: useCallback(() => setNotification(null), [])
  };
};



================================================================================
FILE: src/features/fasting/FastingPage.tsx (229 lines)
================================================================================

import { useState, useEffect, useRef, memo } from 'react';
import { useFastingTimerContext } from './context/TimerContext';
import { ProtocolSelector } from './components/ProtocolSelector';
import { FastingStartModal } from './components/FastingStartModal';
import { NativeDatePicker } from '../../components/ui/DatePicker';
import { Play, Square, ListFilter, Sunrise, Moon, Map } from 'lucide-react';
import { cn } from '../../utils/cn';
import dayjs from 'dayjs';
import { motion } from 'framer-motion';
import { useNavigate } from 'react-router-dom';

interface TimerVisualProps {
    progress: number;
    elapsedFormatted: string;
    totalHours: number;
    isFasting: boolean;
}

// 1. –ö–Ω–æ–ø–∫–∞ –∫–∞—Ä—Ç—ã (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è)
const MapButton = memo(({ onClick }: { onClick: () => void }) => (
    <button
        onClick={onClick}
        className="w-12 h-12 bg-slate-50 dark:bg-[#2C2C2E] rounded-2xl flex items-center justify-center border border-slate-100 dark:border-white/10 hover:bg-slate-100 dark:hover:bg-[#3A3A3C] transition-all active:scale-95 text-slate-400 dark:text-slate-500 hover:text-blue-500 dark:hover:text-blue-400"
    >
        <Map className="w-5 h-5" />
    </button>
));

// 2. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–π–º–µ—Ä–∞ (–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è: –ö–æ–ª—å—Ü–æ + –í—Ä–µ–º—è)
const TimerVisual = memo(({
    progress, elapsedFormatted, totalHours, isFasting
}: TimerVisualProps) => {
    const size = 280;
    const stroke = 8;
    const center = size / 2;
    const radius = (size - stroke) / 2;
    const circumference = 2 * Math.PI * radius;
    const strokeDashoffset = circumference - (progress / 100) * circumference;

    return (
        <div className="flex flex-col items-center justify-center relative z-20 py-10 space-y-8 flex-1">
            <div className="relative shrink-0" style={{ width: size, height: size }}>
                {/* SVG –ö–æ–ª—å—Ü–æ */}
                <svg width={size} height={size} viewBox={`0 0 ${size} ${size}`} className="rotate-[-90deg] drop-shadow-2xl">
                    <circle cx={center} cy={center} r={radius} fill="none" stroke="#F1F5F9" className="dark:stroke-[#38383A]" strokeWidth={stroke} strokeLinecap="round" />
                    <circle
                        cx={center} cy={center} r={radius} fill="none"
                        stroke="currentColor" strokeWidth={stroke}
                        strokeDasharray={circumference} strokeDashoffset={strokeDashoffset} strokeLinecap="round"
                        className={cn(
                            "transition-all duration-1000 ease-out",
                            isFasting ? "text-blue-600 dark:text-blue-500" : "text-transparent"
                        )}
                    />
                </svg>

                {/* –ö–æ–Ω—Ç–µ–Ω—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–ª—å—Ü–∞ */}
                <div className="absolute inset-0 flex flex-col items-center justify-center">

                    {/* –í—Ä–µ–º—è */}
                    <div className="flex items-baseline text-slate-800 dark:text-white translate-y-[-5px]">
                        <span className="text-[4.5rem] font-[850] font-mono tracking-tighter tabular-nums leading-none">
                            {isFasting ? elapsedFormatted.split(':')[0] : `${totalHours}`}
                            <span className="mx-1 opacity-20 relative -top-1">:</span>
                            {isFasting ? elapsedFormatted.split(':')[1] : `00`}
                        </span>
                    </div>

                    {/* –ü–æ–¥–ø–∏—Å—å */}
                    <span className="text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-[0.2em]">
                        {isFasting ? elapsedFormatted.split(':')[2] : '–ß–∞—Å–æ–≤'}
                    </span>
                </div>
            </div>
        </div>
    );
});

export const FastingPage = () => {
  const { 
    isFasting, scheme, setSchemeId, progress, elapsedFormatted, 
    toggleFasting, startTime, setStartTime 
  } = useFastingTimerContext();

  const [isSelecting, setIsSelecting] = useState(false);
  const [isReadyToStart, setIsReadyToStart] = useState(false);
  const [showStartSuccess, setShowStartSuccess] = useState(false);
  
  const navigate = useNavigate();
  const buttonRef = useRef<HTMLDivElement>(null);

  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
  useEffect(() => {
    if (isFasting) {
        setIsReadyToStart(true);
    }
  }, [isFasting]);

  // –ì–ª–∞–≤–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (–≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞)
  const handleMainButtonClick = () => {
    if (isFasting) {
      // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
      toggleFasting();
      setIsReadyToStart(false);
    } else if (isReadyToStart) {
      // –ó–∞–ø—É—Å—Ç–∏—Ç—å (–µ—Å–ª–∏ —Å—Ö–µ–º–∞ —É–∂–µ –≤—ã–±—Ä–∞–Ω–∞)
      toggleFasting();
      setShowStartSuccess(true);
    } else {
      // –û—Ç–∫—Ä—ã—Ç—å –≤—ã–±–æ—Ä —Å—Ö–µ–º—ã
      setIsSelecting(true);
    }
  };

  // –•–µ–Ω–¥–ª–µ—Ä –≤—ã–±–æ—Ä–∞ –∏–∑ –º–æ–¥–∞–ª–∫–∏
  const handleSelectScheme = (id: string) => {
    setSchemeId(id);       
    setIsSelecting(false); 
    
    // –ï—Å–ª–∏ —Ç–∞–π–º–µ—Ä –ù–ï –∑–∞–ø—É—â–µ–Ω ‚Äî –∑–∞–ø—É—Å–∫–∞–µ–º
    if (!isFasting) {
        toggleFasting();
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ —É—Å–ø–µ—Ö–∞ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
        setTimeout(() => setShowStartSuccess(true), 300);
    }
    
    setIsReadyToStart(true);
  };

  const currentStart = startTime || dayjs().toISOString();
  const currentEnd = dayjs(currentStart).add(scheme.hours, 'hour').toISOString();
  
  const handleChangeStart = (v: string) => setStartTime(v);
  const handleChangeEnd = (v: string) => {
    const newStart = dayjs(v).subtract(scheme.hours, 'hour').toISOString();
    setStartTime(newStart);
  };

  return (
    <>
        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ */}
        {isSelecting && (
            <ProtocolSelector 
                onSelect={handleSelectScheme} 
                onClose={() => setIsSelecting(false)} 
                currentSchemeId={scheme.id}
            />
        )}

        {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—Ö–∞ —Å—Ç–∞—Ä—Ç–∞ */}
        <FastingStartModal 
            isOpen={showStartSuccess} 
            onClose={() => setShowStartSuccess(false)} 
        />

        <div className="min-h-full flex flex-col pb-6 relative z-0">

        <div className="bg-white dark:bg-[#2C2C2E] rounded-[3rem] shadow-sm shadow-slate-200/50 dark:shadow-black/20 flex-1 border border-white/60 dark:border-white/10 relative flex flex-col">

            <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/graphy.png')] opacity-[0.03] dark:opacity-[0.05] pointer-events-none rounded-[3rem]" />

            {/* HEADER */}
            <div className="px-8 pt-8 flex justify-between items-start relative z-20 shrink-0">
                <div>
                    <div className="flex items-center gap-2 mb-2">
                        <div className={cn("w-2 h-2 rounded-full", isFasting ? "bg-blue-600 dark:bg-blue-500 animate-pulse" : "bg-slate-300 dark:bg-slate-600")} />
                        <span className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest">
                            {isFasting ? "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å" : "–°—Ç–∞—Ç—É—Å"}
                        </span>
                    </div>
                    <h1 className="text-3xl font-[900] text-slate-800 dark:text-white leading-tight">
                        {isFasting ? "–ì–æ–ª–æ–¥–∞–Ω–∏–µ" : "–û–∂–∏–¥–∞–Ω–∏–µ"}
                    </h1>
                </div>
                <MapButton onClick={() => navigate('/')} />
            </div>

            {/* CONTENT */}
            <TimerVisual
                progress={progress}
                elapsedFormatted={elapsedFormatted}
                totalHours={scheme.hours}
                isFasting={isFasting}
            />

            <div className="flex justify-center gap-6 shrink-0 mt-2 mb-4 relative z-20">
                <NativeDatePicker label="–ù–∞—á–∞–ª–æ" icon={Sunrise} dateValue={currentStart} onChange={handleChangeStart} disabled={!isFasting} />
                <div className="w-px bg-slate-100 dark:bg-white/10 h-10 self-center" />
                <NativeDatePicker label="–§–∏–Ω–∏—à" icon={Moon} dateValue={currentEnd} onChange={handleChangeEnd} disabled={!isFasting} />
            </div>

            {/* BUTTON */}
            <div ref={buttonRef} className="p-6 mt-auto shrink-0 bg-white/50 dark:bg-[#2C2C2E]/50 backdrop-blur-sm z-20 rounded-b-[3rem]">
                <motion.button
                    whileTap={{ scale: 0.98 }}
                    onClick={handleMainButtonClick}
                    className={cn(
                        "w-full py-4 rounded-2xl flex items-center justify-between px-6 shadow-lg transition-all group relative overflow-hidden",
                        isFasting
                            ? "bg-white dark:bg-[#2C2C2E] border-2 border-red-100 dark:border-red-900/30 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/10"
                            : isReadyToStart
                                ? "bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 shadow-slate-900/30 dark:shadow-black/10"
                                : "bg-white dark:bg-[#2C2C2E] border border-slate-200 dark:border-white/10 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-[#3A3A3C]"
                    )}
                >
                    <div className="flex flex-col items-start z-10">
                        <span className="text-[9px] font-bold uppercase tracking-wider opacity-60">
                            {isFasting ? "–£–¥–µ—Ä–∂–∞–Ω–∏–µ..." : isReadyToStart ? "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ" : "–®–∞–≥ 1"}
                        </span>
                        <span className="font-bold text-sm tracking-wide">
                            {isFasting ? "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ü–∏–∫–ª" : isReadyToStart ? `–ù–∞—á–∞—Ç—å` : "–í—ã–±—Ä–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª"}
                        </span>
                    </div>

                    <div className={cn(
                        "w-10 h-10 rounded-full flex items-center justify-center transition-colors z-10",
                        isFasting ? "bg-red-50 dark:bg-red-900/20" : isReadyToStart ? "bg-white/20 dark:bg-slate-900/10" : "bg-slate-100 dark:bg-[#3A3A3C] text-slate-400 dark:text-slate-500"
                    )}>
                        {isFasting ? <Square className="w-4 h-4 fill-current" /> : isReadyToStart ? <Play className="w-4 h-4 fill-current ml-0.5" /> : <ListFilter className="w-4 h-4" />}
                    </div>
                </motion.button>
            </div>

        </div>
        </div>
    </>
  );
};



================================================================================
FILE: src/features/fasting/MetabolismMapPage.tsx (239 lines)
================================================================================

import { useState, useEffect, useMemo } from 'react';
import { useFastingTimerContext } from './context/TimerContext';
import { FASTING_PHASES } from './data/stages';
import type { FastingStage } from './data/stages';
import { cn } from '../../utils/cn';
import { Check, Lock, Navigation, Sparkles, BookOpen, Activity } from 'lucide-react';
import { motion, AnimatePresence } from 'framer-motion';
import { PhaseSheet } from './components/PhaseSheet';
import { ArticlesPage } from '../articles/pages/ArticlesPage';
import { SegmentedControl } from '../../components/ui/SegmentedControl';

const getZoneColor = (hours: number) => {
  if (hours < 12) return "text-orange-500";
  if (hours < 24) return "text-blue-500";
  if (hours < 72) return "text-violet-500";
  return "text-emerald-500";
};

export const MetabolismMapPage = () => {
  const { isFasting, elapsed, phaseToOpen, setPhaseToOpen } = useFastingTimerContext();
  const elapsedHours = elapsed / 3600;

  const [viewMode, setViewMode] = useState<'map' | 'articles'>('map');

  // –ê–≤—Ç–æ-–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ/–æ—Å—Ç–∞–Ω–æ–≤–∫–µ —Ç–∞–π–º–µ—Ä–∞
  useEffect(() => {
    setViewMode(isFasting ? 'map' : 'articles');
  }, [isFasting]);

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ Deep Link (–æ—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–∞–∑—ã –∏–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
  const [selectedPhase, setSelectedPhase] = useState<FastingStage | null>(null);
  useEffect(() => {
      if (phaseToOpen !== null) {
          const targetPhase = FASTING_PHASES.find(p => p.id === phaseToOpen);
          if (targetPhase) {
              setSelectedPhase(targetPhase);
              setViewMode('map');
          }
          setPhaseToOpen(null);
      }
  }, [phaseToOpen, setPhaseToOpen]);

  const { activeIndex, phaseProgress } = useMemo(() => {
    let activeIndex = 0;
    let phaseProgress = 0;
    for (let i = 0; i < FASTING_PHASES.length; i++) {
      const phase = FASTING_PHASES[i];
      const nextPhase = FASTING_PHASES[i + 1];
      if (elapsedHours >= phase.hoursStart) {
        activeIndex = i;
        if (nextPhase) {
          const duration = nextPhase.hoursStart - phase.hoursStart;
          const passedInPhase = elapsedHours - phase.hoursStart;
          phaseProgress = Math.min((passedInPhase / duration) * 100, 100);
        } else {
          phaseProgress = 100;
        }
      }
    }
    return { activeIndex, phaseProgress };
  }, [elapsedHours]);

  const accentColor = getZoneColor(elapsedHours);

  const tabs = [
    { value: 'map', label: '–ü—Ä–æ—Ü–µ—Å—Å—ã', icon: Activity },
    { value: 'articles', label: '–ó–Ω–∞–Ω–∏—è', icon: BookOpen }
  ];

  return (
    <>
      <div className="flex flex-col pb-32 relative z-0">
        
        {/* –ë–ï–õ–´–ô –ö–û–ù–¢–ï–ô–ù–ï–† */}
        <div className="bg-white dark:bg-[#2C2C2E] rounded-[3rem] shadow-sm shadow-slate-200/50 dark:shadow-black/20 relative flex flex-col z-10 border border-white/60 dark:border-white/10 min-h-[80vh]">

          {/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å */}
          <div className="px-6 pt-6 pb-2 bg-white dark:bg-[#2C2C2E] rounded-t-[3rem]">
             <SegmentedControl
                options={tabs}
                value={viewMode}
                onChange={(val) => setViewMode(val as 'map' | 'articles')}
            />
          </div>

          {/* –ö–æ–Ω—Ç–µ–Ω—Ç (–±–µ–∑ —Å–≤–∞–π–ø–æ–≤) */}
          <div className="flex-1 flex flex-col">
            <AnimatePresence mode="wait">
                
                {/* === –†–ï–ñ–ò–ú 1: –°–¢–ê–¢–¨–ò === */}
                {viewMode === 'articles' ? (
                    <motion.div
                        key="articles"
                        initial={{ opacity: 0, x: 20 }}
                        animate={{ opacity: 1, x: 0 }}
                        exit={{ opacity: 0, x: 20 }}
                        transition={{ duration: 0.25 }}
                        className="w-full min-h-[50vh]"
                    >
                        <div className="pt-2"> 
                            <ArticlesPage />
                        </div>
                    </motion.div>
                ) : (
                    
                /* === –†–ï–ñ–ò–ú 2: –ö–ê–†–¢–ê === */
                <motion.div
                    key="map"
                    initial={{ opacity: 0, x: -20 }}
                    animate={{ opacity: 1, x: 0 }}
                    exit={{ opacity: 0, x: -20 }}
                    transition={{ duration: 0.25 }}
                    className="w-full flex flex-col"
                >
                    {/* –•–µ–¥–µ—Ä –ö–∞—Ä—Ç—ã */}
                    <div className="px-8 pt-4 pb-6 flex justify-between items-start border-b border-gray-50/50 dark:border-white/5 bg-white dark:bg-[#2C2C2E]">
                        <div>
                            <div className="flex items-center gap-2 mb-2">
                                <Navigation className={cn("w-3 h-3", accentColor)} />
                                <span className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest">
                                    –ú–∞—Ä—à—Ä—É—Ç
                                </span>
                            </div>
                            <div className="flex items-baseline gap-2">
                                <h1 className="text-3xl font-[900] text-slate-800 dark:text-white leading-none">
                                    {isFasting ? Math.floor(elapsedHours) : 0}
                                </h1>
                                <span className="text-sm font-bold text-slate-400 dark:text-slate-500">—á–∞—Å–æ–≤</span>
                            </div>
                        </div>

                        {isFasting ? (
                            <div className="px-3 py-1.5 bg-slate-50 dark:bg-[#3A3A3C] rounded-xl border border-slate-100 dark:border-white/10 flex items-center gap-2">
                                <div className={cn("w-2 h-2 rounded-full bg-current", accentColor)} />
                                <span className="text-[10px] font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wide">
                                    {elapsedHours < 12 ? "–ü–∏—Ç–∞–Ω–∏–µ" : elapsedHours < 24 ? "–ö–µ—Ç–æ–∑" : "–ê—É—Ç–æ—Ñ–∞–≥–∏—è"}
                                </span>
                            </div>
                        ) : (
                            <div className="px-3 py-1.5 bg-slate-50 dark:bg-[#3A3A3C] rounded-xl border border-slate-100 dark:border-white/10">
                                <span className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase">–û–∂–∏–¥–∞–Ω–∏–µ</span>
                            </div>
                        )}
                    </div>

                    {/* –°–ø–∏—Å–æ–∫ –§–∞–∑ */}
                    <div className="px-4 py-6 relative z-10 pb-10">
                        <div className="absolute left-[35px] top-6 bottom-10 w-0.5 bg-slate-100 dark:bg-white/10 rounded-full" />

                        {FASTING_PHASES.map((phase, index) => {
                            const isActive = isFasting && index === activeIndex;
                            const isPassed = isFasting && index < activeIndex;
                            const iconColor = phase.color.replace(/bg-[\w-]+\s*/, '');

                            return (
                                <div
                                    key={index}
                                    className={cn("relative z-10 flex gap-4 transition-all duration-500", isActive ? "mb-8 mt-2" : "mb-4")}
                                >
                                    <div className="flex flex-col items-center shrink-0 w-12 pt-2">
                                        {isActive && (
                                            <div className="absolute top-0 bottom-0 left-[23px] w-0.5 bg-slate-100 dark:bg-white/10 -z-10">
                                                <motion.div
                                                    initial={{ height: 0 }}
                                                    animate={{ height: `${phaseProgress}%` }}
                                                    transition={{ duration: 1 }}
                                                    className="w-full bg-blue-600 dark:bg-blue-500"
                                                />
                                            </div>
                                        )}
                                        <div
                                            onClick={() => setSelectedPhase(phase)}
                                            className={cn(
                                                "w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 cursor-pointer border-[3px] z-20 bg-white dark:bg-[#2C2C2E]",
                                                isActive ? "border-blue-600 dark:border-blue-500 scale-110 shadow-lg shadow-blue-500/20" : isPassed ? "border-slate-200 dark:border-white/10 text-slate-300 scale-90" : "border-slate-100 dark:border-white/5 text-slate-200 dark:text-slate-600 scale-75"
                                            )}
                                        >
                                            {isPassed ? <Check className="w-4 h-4" /> : isActive ? <phase.icon className={cn("w-5 h-5", iconColor)} /> : <span className="text-[10px] font-bold font-mono">{index + 1}</span>}
                                        </div>
                                    </div>

                                    <div className="flex-1 min-w-0">
                                        {isActive ? (
                                            <motion.div
                                                initial={{ opacity: 0, x: 10 }} animate={{ opacity: 1, x: 0 }}
                                                onClick={() => setSelectedPhase(phase)}
                                                className="bg-slate-50 dark:bg-[#3A3A3C] rounded-[1.5rem] p-5 border border-slate-200 dark:border-white/10 cursor-pointer active:scale-[0.98] transition-transform relative overflow-hidden"
                                            >
                                                <div className="flex justify-between items-start mb-2 relative z-10">
                                                    <span className="text-[9px] font-bold text-blue-600 dark:text-blue-500 bg-white dark:bg-[#2C2C2E] border border-blue-100 dark:border-blue-500/30 px-2 py-1 rounded-lg uppercase tracking-wide">–°–µ–π—á–∞—Å</span>
                                                    <span className="text-xs font-mono font-bold text-slate-400 dark:text-slate-500">{Math.round(phaseProgress)}%</span>
                                                </div>
                                                <h3 className="text-lg font-black text-slate-800 dark:text-white leading-tight mb-1 relative z-10">{phase.title}</h3>
                                                <p className="text-xs text-slate-500 dark:text-slate-400 line-clamp-2 leading-relaxed relative z-10">{phase.subtitle}</p>
                                                <div className="h-1.5 w-full bg-slate-200 dark:bg-white/10 rounded-full mt-4 overflow-hidden relative z-10">
                                                    <motion.div initial={{ width: 0 }} animate={{ width: `${phaseProgress}%` }} transition={{ duration: 1, delay: 0.2 }} className="h-full bg-blue-600 dark:bg-blue-500 rounded-full" />
                                                </div>
                                            </motion.div>
                                        ) : isPassed ? (
                                            <div onClick={() => setSelectedPhase(phase)} className="py-3 px-4 rounded-2xl transition-all cursor-pointer flex items-center justify-between group hover:bg-slate-50 dark:hover:bg-[#3A3A3C]">
                                                <span className="text-sm font-bold text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-400 transition-colors line-through decoration-slate-300 dark:decoration-white/10">{phase.title}</span>
                                            </div>
                                        ) : (
                                            <div onClick={() => setSelectedPhase(phase)} className="py-3 px-4 rounded-2xl border border-dashed border-slate-200 dark:border-white/10 hover:border-slate-300 dark:hover:border-white/20 hover:bg-slate-50 dark:hover:bg-[#3A3A3C] transition-all cursor-pointer flex items-center justify-between group mt-1">
                                                <div>
                                                    <span className="text-sm font-bold text-slate-400 dark:text-slate-500 group-hover:text-slate-600 dark:group-hover:text-slate-400 transition-colors">{phase.title}</span>
                                                    {isFasting && <div className="text-[10px] text-slate-300 dark:text-slate-600 font-mono mt-0.5">+{Math.max(0, Math.floor(phase.hoursStart - elapsedHours))}—á</div>}
                                                </div>
                                                <Lock className="w-3 h-3 text-slate-200 dark:text-slate-600" />
                                            </div>
                                        )}
                                    </div>
                                </div>
                            );
                        })}
                        <div className="ml-[28px] mt-4 mb-10 pl-8 relative opacity-50 flex items-center gap-2">
                            <Sparkles className="w-4 h-4 text-emerald-500" />
                            <span className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest">–§–∏–Ω–∏—à</span>
                        </div>
                    </div>
                </motion.div>
                )}
            </AnimatePresence>
          </div>

        </div>

        {selectedPhase && (
            <PhaseSheet 
                phase={selectedPhase} 
                onClose={() => setSelectedPhase(null)} 
            />
        )}

      </div>
    </>
  );
};



================================================================================
FILE: src/features/fasting/components/TimerRing.tsx (99 lines)
================================================================================

import { cn } from '../../../utils/cn';
import { motion } from 'framer-motion';

interface Props {
  progress: number;
  time: string;
  isFasting: boolean;
  color: string;
  label?: string;
}

export const TimerRing = ({ progress, time, isFasting, label }: Props) => {
  const size = 280;
  const center = size / 2;
  const strokeWidth = 16; // –°–¥–µ–ª–∞–µ–º –ª–∏–Ω–∏—é —á—É—Ç—å —Ç–æ–ª—â–µ –¥–ª—è —Å–æ–ª–∏–¥–Ω–æ—Å—Ç–∏
  const radius = 120;
  
  const circumference = 2 * Math.PI * radius;
  const strokeDashoffset = circumference - (progress / 100) * circumference;

  return (
    <div className="relative flex items-center justify-center">
      
      <div className="relative" style={{ width: size, height: size }}>
        
        {/* –§–æ–Ω–æ–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ */}
        {isFasting && (
            <div className="absolute inset-0 bg-blue-500/5 blur-3xl rounded-full animate-pulse" />
        )}

        <svg width={size} height={size} viewBox={`0 0 ${size} ${size}`} className="rotate-[-90deg]">

          {/* 1. –§–û–ù –®–ö–ê–õ–´ (–°–µ—Ä—ã–π –∫—Ä—É–≥) */}
          <circle
            cx={center}
            cy={center}
            r={radius}
            fill="transparent"
            stroke="#f1f5f9" // slate-100
            className="dark:stroke-[#38383A]"
            strokeWidth={strokeWidth}
            strokeLinecap="round"
          />

          {/* 2. –õ–ò–ù–ò–Ø –ü–†–û–ì–†–ï–°–°–ê (–¶–≤–µ—Ç–Ω–∞—è) */}
          <circle
            cx={center}
            cy={center}
            r={radius}
            fill="transparent"
            stroke="currentColor"
            strokeWidth={strokeWidth}
            strokeDasharray={circumference}
            strokeDashoffset={strokeDashoffset}
            strokeLinecap="round"
            className={cn(
              "transition-all duration-1000 ease-out",
              isFasting ? "text-blue-600 dark:text-blue-500" : "text-transparent"
            )}
          />
        </svg>

        {/* –¶–ï–ù–¢–†–ê–õ–¨–ù–´–ô –¢–ï–ö–°–¢ */}
        <div className="absolute inset-0 flex flex-col items-center justify-center z-10 pointer-events-none">

            {/* –õ–µ–π–±–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, "24—á –ë–∞–∑–∞") */}
            <span className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest mb-2 bg-white dark:bg-[#2C2C2E] px-2 py-1 rounded-md border border-slate-100 dark:border-white/10 shadow-sm">
                {label || (isFasting ? "–ì–æ–ª–æ–¥–∞–Ω–∏–µ" : "–û–∂–∏–¥–∞–Ω–∏–µ")}
            </span>

            {/* –í–†–ï–ú–Ø */}
            <div className="flex items-baseline text-slate-800 dark:text-white">
                <span className="text-6xl font-[800] font-mono tracking-tighter tabular-nums leading-none">
                    {time.split(':')[0]}:{time.split(':')[1]}
                </span>
                <span className="text-xl font-medium text-slate-300 dark:text-slate-500 ml-1">
                    {time.split(':')[2]}
                </span>
            </div>

            {/* –ü–†–û–¶–ï–ù–¢ */}
            {isFasting && (
                <motion.div
                    initial={{ scale: 0.8, opacity: 0 }}
                    animate={{ scale: 1, opacity: 1 }}
                    className="mt-3 px-3 py-1 bg-blue-50 dark:bg-blue-500/10 rounded-full border border-blue-100 dark:border-blue-500/30 flex items-center gap-1.5"
                >
                    <div className="w-1.5 h-1.5 bg-blue-600 dark:bg-blue-500 rounded-full animate-pulse" />
                    <span className="text-xs font-bold text-blue-600 dark:text-blue-500 tabular-nums">
                        {progress.toFixed(1)}%
                    </span>
                </motion.div>
            )}
        </div>
      </div>
    </div>
  );
};



================================================================================
FILE: src/features/fasting/components/ProtocolSelector.tsx (156 lines)
================================================================================

import { useState } from 'react';
import { createPortal } from 'react-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { ChevronRight, ChevronDown, Check } from 'lucide-react';
import { FASTING_SCHEMES } from '../data/schemes';
import { cn } from '../../../utils/cn';
import { ProtocolDetails } from './ProtocolDetails';

interface Props {
  onSelect: (id: string) => void;
  onClose: () => void;
  currentSchemeId?: string;
}

export const ProtocolSelector = ({ onSelect, onClose, currentSchemeId }: Props) => {
  const [selectedPreviewId, setSelectedPreviewId] = useState<string | null>(null);

  const handlePreview = (id: string) => {
    setSelectedPreviewId(id);
  };

  const handleStart = () => {
    if (selectedPreviewId) {
        onSelect(selectedPreviewId);
        onClose();
    }
  };

  const ModalContent = (
    <>
      <motion.div
        initial={{ opacity: 0 }}
        animate={{ opacity: 1 }}
        exit={{ opacity: 0 }}
        onClick={onClose}
        className="fixed inset-0 z-[100] bg-black/5 backdrop-blur-[2px]"
      />

      <motion.div
        initial={{ y: "100%" }}
        animate={{ y: 0 }}
        exit={{ y: "100%" }}
        transition={{ type: "spring", damping: 25, stiffness: 300 }}
        className="fixed bottom-0 left-0 right-0 z-[101] bg-[#F2F2F7] dark:bg-slate-900 rounded-t-[2.5rem] h-[85vh] shadow-[0_-10px_40px_-15px_rgba(0,0,0,0.1)] flex flex-col overflow-hidden max-w-md mx-auto border-t border-white/50 dark:border-slate-700"
      >

        <div className="w-full flex justify-center pt-3 pb-2 bg-[#F2F2F7] dark:bg-slate-900 shrink-0 cursor-pointer" onClick={onClose}>
          <div className="w-12 h-1.5 bg-gray-300 dark:bg-slate-600 rounded-full" />
        </div>

        <AnimatePresence mode="wait">
            
            {/* –≠–ö–†–ê–ù –î–ï–¢–ê–õ–ï–ô */}
            {selectedPreviewId ? (
                <ProtocolDetails 
                    key="details"
                    schemeId={selectedPreviewId} 
                    onBack={() => setSelectedPreviewId(null)}
                    onStart={handleStart}
                />
            ) : (
                /* –≠–ö–†–ê–ù –°–ü–ò–°–ö–ê (–û–ë–õ–ï–ì–ß–ï–ù–ù–´–ô) */
                <motion.div 
                    key="list"
                    initial={{ opacity: 0, x: -20 }}
                    animate={{ opacity: 1, x: 0 }}
                    exit={{ opacity: 0, x: -20 }}
                    transition={{ duration: 0.2 }}
                    className="flex flex-col h-full"
                >
                    <div className="px-6 pt-2 pb-6 flex justify-between items-end bg-[#F2F2F7] dark:bg-slate-900 shrink-0">
                        <div>
                            <h2 className="text-2xl font-[900] text-slate-800 dark:text-slate-100 leading-none">
                                –ü—Ä–æ—Ç–æ–∫–æ–ª
                            </h2>
                            <p className="text-xs font-bold text-slate-400 dark:text-slate-500 mt-1.5 uppercase tracking-wide">
                                –í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª—å
                            </p>
                        </div>

                        <button
                            onClick={onClose}
                            className="w-9 h-9 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center shadow-sm border border-slate-100 dark:border-slate-700 text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-400 active:scale-95 transition-transform"
                        >
                            <ChevronDown className="w-5 h-5" />
                        </button>
                    </div>

                    <div className="flex-1 overflow-y-auto px-4 pb-10 space-y-2 pt-0 scrollbar-hide">
                        {FASTING_SCHEMES.map((s) => {
                            const isSelected = currentSchemeId === s.id;
                            // "24—á: –ë–∞–∑–∞" -> "–ë–∞–∑–∞"
                            const titleClean = s.title.split(':')[1]?.trim() || s.title;
                            
                            return (
                                <motion.button
                                    key={s.id}
                                    whileTap={{ scale: 0.98 }}
                                    onClick={() => handlePreview(s.id)}
                                    className={cn(
                                        "w-full flex items-center gap-4 p-3 rounded-[1.5rem] border text-left transition-all relative overflow-hidden group",
                                        isSelected
                                            ? "bg-white dark:bg-slate-800 border-blue-200 dark:border-blue-900 shadow-md ring-1 ring-blue-100 dark:ring-blue-900/50"
                                            : "bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 shadow-sm hover:border-slate-200 dark:hover:border-slate-600"
                                    )}
                                >
                                    {/* –ò–∫–æ–Ω–∫–∞: –ú–µ–Ω—å—à–µ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–µ–µ */}
                                    <div className={cn(
                                        "w-10 h-10 rounded-xl flex items-center justify-center shrink-0 transition-colors",
                                        "bg-slate-50 dark:bg-slate-700/50 group-hover:bg-slate-100 dark:group-hover:bg-slate-700"
                                    )}>
                                        <s.icon className={cn("w-5 h-5 opacity-80", s.color)} />
                                    </div>

                                    {/* –ò–Ω—Ñ–æ: –¢–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –≤—Ä–µ–º—è */}
                                    <div className="flex-1 min-w-0 flex flex-col justify-center">
                                        <h3 className="font-bold text-[15px] text-slate-800 dark:text-slate-100 leading-tight">
                                            {titleClean}
                                        </h3>
                                        <p className="text-[11px] font-medium text-slate-400 dark:text-slate-500 mt-0.5">
                                            {s.hours} —á–∞—Å–æ–≤
                                        </p>
                                    </div>

                                    {/* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä: –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å—Ç—Ä–µ–ª–∫–∞ –∏–ª–∏ –≥–∞–ª–æ—á–∫–∞ */}
                                    <div className="pr-1">
                                        {isSelected ? (
                                            <div className="w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center text-white shadow-sm">
                                                <Check className="w-3 h-3" />
                                            </div>
                                        ) : (
                                            <ChevronRight className="w-4 h-4 text-slate-300 dark:text-slate-600" />
                                        )}
                                    </div>

                                </motion.button>
                            );
                        })}
                        <div className="h-8" />
                    </div>
                </motion.div>
            )}
        </AnimatePresence>

      </motion.div>
    </>
  );

  return createPortal(
    <AnimatePresence>
        {ModalContent}
    </AnimatePresence>, 
    document.body
  );
};



================================================================================
FILE: src/features/fasting/components/FastingStartModal.tsx (98 lines)
================================================================================

import { createPortal } from 'react-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { X, Map, Rocket, ArrowRight } from 'lucide-react';
import { useNavigate } from 'react-router-dom';

interface Props {
  isOpen: boolean;
  onClose: () => void;
}

export const FastingStartModal = ({ isOpen, onClose }: Props) => {
  const navigate = useNavigate();

  const handleGoToMap = () => {
    onClose();
    navigate('/'); 
  };

  const content = (
    <AnimatePresence>
      {isOpen && (
        <>
          {/* Backdrop */}
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            onClick={onClose}
            className="fixed inset-0 bg-black/40 backdrop-blur-sm z-[9999]"
          />

          {/* Modal Card */}
          {/* 
             –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï:
             1. inset-0 + flex + items-center + justify-center: —Å–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π —Å–ø–æ—Å–æ–± —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
             2. pointer-events-none –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, pointer-events-auto –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ
          */}
          <div className="fixed inset-0 z-[10000] flex items-center justify-center p-4 pointer-events-none">
              <motion.div
                initial={{ opacity: 0, scale: 0.9, y: 20 }}
                animate={{ opacity: 1, scale: 1, y: 0 }}
                exit={{ opacity: 0, scale: 0.9, y: 20 }}
                transition={{ type: "spring", damping: 25, stiffness: 300 }}
                className="w-full max-w-sm bg-white dark:bg-[#2C2C2E] rounded-[2.5rem] shadow-2xl overflow-hidden relative pointer-events-auto"
              >
                  {/* –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–π —Ñ–æ–Ω */}
                  <div className="absolute top-0 left-0 right-0 h-32 bg-gradient-to-b from-blue-50 dark:from-blue-900/20 to-white dark:to-[#2C2C2E] -z-10" />

                  <button
                    onClick={onClose}
                    className="absolute top-4 right-4 p-2 bg-white/50 dark:bg-white/10 hover:bg-slate-50 dark:hover:bg-white/20 rounded-full transition-colors z-20"
                  >
                    <X className="w-5 h-5 text-slate-400 dark:text-slate-500" />
                  </button>

                  <div className="p-6 flex flex-col items-center text-center pt-8">
                    {/* –ò–∫–æ–Ω–∫–∞ */}
                    <div className="w-20 h-20 bg-blue-600 dark:bg-blue-500 rounded-3xl flex items-center justify-center shadow-lg shadow-blue-500/30 mb-6 rotate-3">
                        <Rocket className="w-10 h-10 text-white fill-current" />
                    </div>

                    <h2 className="text-2xl font-[900] text-slate-800 dark:text-white leading-tight mb-3">
                        –ì–æ–ª–æ–¥–∞–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ!
                    </h2>

                    <p className="text-sm text-slate-500 dark:text-slate-400 leading-relaxed mb-8 px-2">
                        –¢–∞–π–º–µ—Ä –Ω–∞—á–∞–ª –æ—Ç—Å—á–µ—Ç. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –≤ –æ—Ä–≥–∞–Ω–∏–∑–º–µ –Ω–∞ <b>–ö–∞—Ä—Ç–µ</b>.
                    </p>

                    {/* –ö–Ω–æ–ø–∫–∏ */}
                    <div className="w-full space-y-3">
                        <button
                            onClick={handleGoToMap}
                            className="w-full py-4 bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-900 rounded-2xl font-bold shadow-xl shadow-slate-900/20 dark:shadow-black/20 flex items-center justify-center gap-2 active:scale-95 transition-transform"
                        >
                            <Map className="w-5 h-5" />
                            <span>–û—Ç–∫—Ä—ã—Ç—å –ö–∞—Ä—Ç—É</span>
                            <ArrowRight className="w-4 h-4 opacity-50" />
                        </button>

                        <button
                            onClick={onClose}
                            className="w-full py-3 text-slate-400 dark:text-slate-500 font-bold text-xs uppercase tracking-wide hover:text-slate-600 dark:hover:text-slate-400 transition-colors"
                        >
                            –û—Å—Ç–∞—Ç—å—Å—è –∑–¥–µ—Å—å
                        </button>
                    </div>
                  </div>
              </motion.div>
          </div>
        </>
      )}
    </AnimatePresence>
  );

  return createPortal(content, document.body);
};



================================================================================
FILE: src/features/fasting/components/PhaseSheet.tsx (138 lines)
================================================================================

import { createPortal } from 'react-dom'; // üëà –ò–º–ø–æ—Ä—Ç –ü–æ—Ä—Ç–∞–ª–∞
import { motion, AnimatePresence } from 'framer-motion';
import { X, Activity, AlertTriangle, Lightbulb, Thermometer } from 'lucide-react';
import type { FastingStage } from '../data/stages';
import { cn } from '../../../utils/cn';

interface Props {
  phase: FastingStage | null;
  onClose: () => void;
}

export const PhaseSheet = ({ phase, onClose }: Props) => {
  // –ö–æ–Ω—Ç–µ–Ω—Ç –º–æ–¥–∞–ª–∫–∏
  const content = (
    <AnimatePresence>
      {phase && (
        <>
          {/* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ */}
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            onClick={onClose}
            className="fixed inset-0 bg-black/20 backdrop-blur-sm z-[100]"
          />

          {/* –®—Ç–æ—Ä–∫–∞ */}
          <motion.div
            initial={{ y: "100%" }}
            animate={{ y: 0 }}
            exit={{ y: "100%" }}
            transition={{ type: "spring", damping: 25, stiffness: 300 }}
            className="fixed bottom-0 left-0 right-0 z-[101] bg-[#F2F2F7] dark:bg-[#1C1C1E] rounded-t-[2.5rem] h-[85vh] shadow-2xl flex flex-col overflow-hidden max-w-md mx-auto"
          >
            <div className="w-full flex justify-center pt-3 pb-2 bg-[#F2F2F7] dark:bg-[#1C1C1E] shrink-0" onClick={onClose}>
              <div className="w-12 h-1.5 bg-gray-300 dark:bg-white/20 rounded-full" />
            </div>

            <button
                onClick={onClose}
                className="absolute top-4 right-4 p-2 bg-gray-200/50 dark:bg-white/10 hover:bg-gray-200 dark:hover:bg-white/20 rounded-full transition-colors z-50"
            >
                <X className="w-5 h-5 text-gray-500 dark:text-slate-400" />
            </button>

            <div className="flex-1 overflow-y-auto pb-safe px-4 pt-2">

              <div className="text-center mb-6 px-4">
                <div className={cn(
                    "w-16 h-16 rounded-full mx-auto flex items-center justify-center mb-3 shadow-lg",
                    phase.color.replace('text-', 'bg-').replace('600', '100')
                )}>
                    <phase.icon className={cn("w-8 h-8", phase.color)} />
                </div>
                <h2 className="text-2xl font-black text-slate-900 dark:text-white leading-tight">
                    {phase.title}
                </h2>
                <p className="text-sm font-medium text-gray-400 dark:text-slate-500 mt-1 font-mono uppercase tracking-wide">
                    {phase.hoursStart} ‚Äî {phase.hoursEnd ?? '‚àû'} —á
                </p>
              </div>

              <div className="space-y-4 pb-10">

                <div className="bg-white dark:bg-[#2C2C2E] rounded-2xl p-5 shadow-sm">
                    <div className="flex items-center gap-2 mb-3 border-b border-gray-100 dark:border-white/10 pb-2">
                        <Activity className="w-5 h-5 text-blue-500" />
                        <h3 className="font-bold text-slate-800 dark:text-white">–§–∏–∑–∏–æ–ª–æ–≥–∏—è</h3>
                    </div>
                    <p className="text-sm text-gray-600 dark:text-slate-400 leading-relaxed">
                        {phase.details.physiology}
                    </p>
                </div>

                <div className="bg-white dark:bg-[#2C2C2E] rounded-2xl overflow-hidden shadow-sm">
                    <div className="px-5 py-3 border-b border-gray-100 dark:border-white/10 bg-gray-50/50 dark:bg-[#3A3A3C] flex items-center gap-2">
                        <Thermometer className="w-4 h-4 text-orange-500" />
                        <h3 className="font-bold text-sm text-gray-500 dark:text-slate-400 uppercase tracking-wide">–ß—Ç–æ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ</h3>
                    </div>
                    <div className="p-5">
                        <ul className="space-y-3">
                            {phase.details.sensations.map((item, i) => (
                                <li key={i} className="flex gap-3 text-sm text-slate-700 dark:text-slate-300">
                                    <span className="w-1.5 h-1.5 rounded-full bg-orange-400 mt-1.5 shrink-0" />
                                    {item}
                                </li>
                            ))}
                        </ul>
                    </div>
                </div>

                {phase.recommendations && (
                    <div className="bg-white dark:bg-[#2C2C2E] rounded-2xl overflow-hidden shadow-sm border-l-4 border-green-500">
                        <div className="px-5 py-3 border-b border-gray-100 dark:border-white/10 flex items-center gap-2">
                            <Lightbulb className="w-4 h-4 text-green-600" />
                            <h3 className="font-bold text-sm text-green-700 dark:text-green-400 uppercase tracking-wide">–°–æ–≤–µ—Ç—ã</h3>
                        </div>
                        <div className="p-5">
                            <ul className="space-y-3">
                                {phase.recommendations.map((item, i) => (
                                    <li key={i} className="flex gap-3 text-sm text-slate-700 dark:text-slate-300">
                                        <span className="w-1.5 h-1.5 rounded-full bg-green-500 mt-1.5 shrink-0" />
                                        {item}
                                    </li>
                                ))}
                            </ul>
                        </div>
                    </div>
                )}

                {phase.precautions && phase.precautions.length > 0 && (
                    <div className="bg-rose-50 dark:bg-rose-900/20 rounded-2xl p-5 border border-rose-100 dark:border-rose-900/30">
                        <div className="flex items-center gap-2 mb-3 text-rose-600 dark:text-rose-400">
                            <AlertTriangle className="w-5 h-5" />
                            <h3 className="font-bold">–ú–µ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç–∏</h3>
                        </div>
                        <ul className="space-y-2">
                            {phase.precautions.map((item, i) => (
                                <li key={i} className="text-xs text-rose-800 dark:text-rose-300 leading-relaxed opacity-80">
                                    ‚Ä¢ {item}
                                </li>
                            ))}
                        </ul>
                    </div>
                )}

              </div>
            </div>
          </motion.div>
        </>
      )}
    </AnimatePresence>
  );

  // –†–µ–Ω–¥–µ—Ä–∏–º –≤ body
  return createPortal(content, document.body);
};



================================================================================
FILE: src/features/fasting/components/PhasesList.tsx (177 lines)
================================================================================

import { useState, useEffect } from 'react';
import { FASTING_PHASES } from '../data/stages';
import { cn } from '../../../utils/cn';
import { Check, Lock, ChevronDown, Activity, Info, AlertTriangle } from 'lucide-react';

interface Props {
  elapsedSeconds: number;
}

export const PhasesList = ({ elapsedSeconds }: Props) => {
  const elapsedHours = elapsedSeconds / 3600;

  // 1. –í—ã—á–∏—Å–ª—è–µ–º –∏–Ω–¥–µ–∫—Å —Ä–µ–∞–ª—å–Ω–æ–π —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑—ã
  let activePhaseIndex = -1;
  for (let i = 0; i < FASTING_PHASES.length; i++) {
    if (elapsedHours >= FASTING_PHASES[i].hoursStart) {
      activePhaseIndex = i;
    } else {
      break; 
    }
  }

  // 2. –°–æ—Å—Ç–æ—è–Ω–∏–µ: –∫–∞–∫—É—é —Ñ–∞–∑—É –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º —Å–µ–π—á–∞—Å (–ø–æ –∫–ª–∏–∫—É)
  // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî —Ç–µ–∫—É—â–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è
  const [viewingIndex, setViewingIndex] = useState<number>(activePhaseIndex !== -1 ? activePhaseIndex : 0);

  // –ï—Å–ª–∏ —Ç–∞–π–º–µ—Ä –∏–¥–µ—Ç –∏ —Ñ–∞–∑–∞ —Å–º–µ–Ω–∏–ª–∞—Å—å ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞ –Ω–µ—ë
  useEffect(() => {
    if (activePhaseIndex !== -1) {
      setViewingIndex(activePhaseIndex);
    }
  }, [activePhaseIndex]);

  return (
    <div className="w-full px-4 mt-8 mb-24 animate-in slide-in-from-bottom-10 duration-700">
      <div className="flex items-center justify-between mb-6 px-2">
        <h3 className="text-sm font-bold text-gray-400 uppercase tracking-wider">
          –ö–∞—Ä—Ç–∞ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞
        </h3>
        <span className="text-[10px] font-medium text-white bg-slate-800 px-2 py-1 rounded-full">
          –≠—Ç–∞–ø {activePhaseIndex + 1} / {FASTING_PHASES.length}
        </span>
      </div>

      <div className="relative pl-2">
        {/* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è (–î–æ—Ä–æ–≥–∞) */}
        <div className="absolute left-[27px] top-4 bottom-10 w-0.5 bg-gradient-to-b from-blue-500 via-gray-200 to-gray-100 z-0" />

        {FASTING_PHASES.map((phase, index) => {
          // –õ–æ–≥–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
          const isRealActive = index === activePhaseIndex; // –≠—Ç–æ —Ñ–∞–∑–∞, –∫–æ—Ç–æ—Ä–∞—è –∏–¥–µ—Ç –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
          const isSelected = index === viewingIndex;       // –≠—Ç—É —Ñ–∞–∑—É –º—ã —Ä–∞–∑–≤–µ—Ä–Ω—É–ª–∏ –∫–ª–∏–∫–æ–º
          const isPassed = index < activePhaseIndex;       // –≠—Ç–æ –ø—Ä–æ—à–ª–æ–µ
          const isFuture = index > activePhaseIndex;       // –≠—Ç–æ –±—É–¥—É—â–µ–µ

          return (
            <div key={phase.id} className="relative z-10 mb-6 group">
              <button
                onClick={() => setViewingIndex(index)}
                className={cn(
                  "flex items-start text-left gap-4 w-full transition-all duration-300",
                  // –ï—Å–ª–∏ —Ñ–∞–∑–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞ –∏ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞ ‚Äî –æ–Ω–∞ –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–∞—è
                  (!isSelected && !isRealActive) && "opacity-50 hover:opacity-80 scale-95"
                )}
              >
                {/* 1. –ò–∫–æ–Ω–∫–∞-–ú–∞—Ä–∫–µ—Ä (–¢–æ—á–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–µ) */}
                <div className="relative shrink-0 pt-1">
                  <div className={cn(
                    "w-10 h-10 rounded-full flex items-center justify-center transition-all duration-500 shadow-sm border-2 z-20 relative",
                    // –°—Ç–∏–ª–∏ –º–∞—Ä–∫–µ—Ä–∞
                    isRealActive ? "bg-blue-500 border-blue-500 text-white shadow-blue-300 shadow-lg scale-110" :
                    isPassed ? "bg-slate-100 border-slate-200 text-slate-400" :
                    isSelected ? "bg-white border-blue-400 text-blue-500" :
                    "bg-white border-gray-200 text-gray-300"
                  )}>
                    {isRealActive ? <Activity className="w-5 h-5 animate-pulse" /> :
                     isPassed ? <Check className="w-5 h-5" /> :
                     isFuture ? <Lock className="w-4 h-4" /> :
                     <phase.icon className="w-5 h-5" />}
                  </div>
                </div>

                {/* 2. –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */}
                <div className={cn(
                  "flex-1 rounded-2xl border transition-all duration-300 overflow-hidden",
                  isSelected 
                    ? "bg-white border-blue-100 shadow-xl ring-1 ring-blue-500/20 translate-x-0" 
                    : "bg-white/50 border-transparent hover:bg-white hover:shadow-sm -translate-x-2"
                )}>
                  
                  {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ (–≤—Å–µ–≥–¥–∞ –≤–∏–¥–µ–Ω) */}
                  <div className="p-4 flex justify-between items-start">
                    <div>
                      <h4 className={cn("font-bold text-sm", isSelected ? "text-slate-800" : "text-slate-500")}>
                        {phase.title}
                      </h4>
                      <div className="flex items-center gap-2 mt-1">
                        <span className="text-[10px] font-mono text-gray-400 bg-gray-100 px-1.5 py-0.5 rounded">
                          {phase.hoursStart}—á+
                        </span>
                        {isRealActive && (
                          <span className="text-[10px] font-bold text-blue-600 animate-pulse">
                            ‚óè –°–µ–π—á–∞—Å
                          </span>
                        )}
                      </div>
                    </div>
                    {isSelected ? (
                      <ChevronDown className="w-4 h-4 text-gray-300 rotate-180 transition-transform" />
                    ) : (
                      <ChevronDown className="w-4 h-4 text-gray-300" />
                    )}
                  </div>

                  {/* 3. –î–µ—Ç–∞–ª–∏ (–í–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–ª–∏–∫–µ) */}
                  <div className={cn(
                    "grid transition-all duration-500 ease-in-out px-4",
                    isSelected ? "grid-rows-[1fr] pb-4 opacity-100" : "grid-rows-[0fr] pb-0 opacity-0"
                  )}>
                    <div className="overflow-hidden space-y-4 border-t border-gray-100 pt-3">
                      
                      {/* –û–ø–∏—Å–∞–Ω–∏–µ */}
                      <p className="text-xs text-slate-600 leading-relaxed">
                        {phase.subtitle}
                      </p>

                      {/* –§–∏–∑–∏–æ–ª–æ–≥–∏—è */}
                      <div className="bg-blue-50/50 p-3 rounded-xl border border-blue-50">
                        <h5 className="text-[10px] font-bold text-blue-400 uppercase mb-1 flex items-center gap-1">
                          <Activity className="w-3 h-3"/> –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç
                        </h5>
                        <p className="text-xs text-slate-600 leading-relaxed">
                          {phase.details.physiology}
                        </p>
                      </div>

                      {/* –û—â—É—â–µ–Ω–∏—è */}
                      <div>
                        <h5 className="text-[10px] font-bold text-gray-400 uppercase mb-2 flex items-center gap-1">
                          <Info className="w-3 h-3"/> –û—â—É—â–µ–Ω–∏—è
                        </h5>
                        <ul className="space-y-1">
                          {phase.details.sensations.map((s, i) => (
                            <li key={i} className="text-xs text-gray-500 flex gap-2 items-start">
                              <span className="w-1 h-1 rounded-full bg-gray-300 mt-1.5 shrink-0"/>
                              {s}
                            </li>
                          ))}
                        </ul>
                      </div>

                      {/* –í–Ω–∏–º–∞–Ω–∏–µ */}
                      {phase.precautions.length > 0 && (
                        <div className="bg-rose-50 p-3 rounded-xl border border-rose-100">
                           <h5 className="text-[10px] font-bold text-rose-400 uppercase mb-1 flex items-center gap-1">
                              <AlertTriangle className="w-3 h-3"/> –í–∞–∂–Ω–æ
                           </h5>
                           <ul className="space-y-1">
                              {phase.precautions.map((w, i) => (
                                <li key={i} className="text-xs text-rose-600/80">‚Ä¢ {w}</li>
                              ))}
                           </ul>
                        </div>
                      )}

                    </div>
                  </div>
                </div>
              </button>
            </div>
          );
        })}
      </div>
    </div>
  );
};



================================================================================
FILE: src/features/fasting/components/SovietProtocolSheet.tsx (143 lines)
================================================================================

import { createPortal } from 'react-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { X, BookOpen, Droplets, Feather, ShieldCheck, Scroll } from 'lucide-react';

interface Props {
  isOpen: boolean;
  onClose: () => void;
}

export const SovietProtocolSheet = ({ isOpen, onClose }: Props) => {
  const content = (
    <AnimatePresence>
      {isOpen && (
        <>
          {/* Backdrop */}
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            onClick={onClose}
            className="fixed inset-0 bg-black/30 backdrop-blur-sm z-[100]"
          />

          {/* Sheet */}
          <motion.div
            initial={{ y: "100%" }}
            animate={{ y: 0 }}
            exit={{ y: "100%" }}
            transition={{ type: "spring", damping: 25, stiffness: 300 }}
            className="fixed bottom-0 left-0 right-0 z-[101] bg-[#F2F2F7] rounded-t-[2.5rem] h-[90vh] shadow-2xl flex flex-col overflow-hidden max-w-md mx-auto"
          >
            {/* Handle */}
            <div className="w-full flex justify-center pt-3 pb-2 bg-[#F2F2F7] shrink-0" onClick={onClose}>
              <div className="w-12 h-1.5 bg-gray-300 rounded-full" />
            </div>

            {/* Close Button */}
            <button 
                onClick={onClose}
                className="absolute top-4 right-4 p-2 bg-gray-200/50 hover:bg-gray-200 rounded-full transition-colors z-50"
            >
                <X className="w-5 h-5 text-gray-500" />
            </button>

            {/* Content */}
            <div className="flex-1 overflow-y-auto pb-safe px-4 pt-2">
              
              {/* HEADER */}
              <div className="text-center mb-8 px-4 pt-4">
                <div className="w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-sm border border-red-100 rotate-3">
                    <BookOpen className="w-8 h-8 text-red-600" />
                </div>
                <h2 className="text-2xl font-[900] text-slate-800 leading-tight">
                    –ú–µ—Ç–æ–¥ –†–î–¢
                </h2>
                <p className="text-xs font-bold text-slate-400 mt-1 uppercase tracking-widest">
                    –ü–æ –Æ.–°. –ù–∏–∫–æ–ª–∞–µ–≤—É
                </p>
              </div>

              <div className="space-y-4 pb-10">
                
                {/* –¶–∏—Ç–∞—Ç–∞ */}
                <div className="bg-white p-5 rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden">
                    <div className="absolute top-0 left-0 w-1 h-full bg-red-500" />
                    <Scroll className="w-12 h-12 text-slate-100 absolute -right-2 -bottom-2 rotate-[-15deg]" />
                    <p className="text-sm font-serif italic text-slate-600 leading-relaxed relative z-10">
                        ¬´–ì–æ–ª–æ–¥–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∏—â–∏. –≠—Ç–æ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –±–µ–∑ –Ω–æ–∂–∞, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ–≤–æ–¥–∏—Ç —Å–∞–º–∞ –ø—Ä–∏—Ä–æ–¥–∞.¬ª
                    </p>
                </div>

                {/* 1. –ü–∏—Ç–∞–Ω–∏–µ –¥–æ */}
                <div className="bg-white rounded-2xl p-5 shadow-sm">
                    <div className="flex items-center gap-3 mb-3 border-b border-gray-100 pb-2">
                        <div className="p-1.5 bg-green-50 rounded-lg text-green-600">
                            <Feather className="w-4 h-4" />
                        </div>
                        <h3 className="font-bold text-slate-800">–í—Ö–æ–¥ –≤ –≥–æ–ª–æ–¥</h3>
                    </div>
                    <ul className="space-y-3">
                        <li className="flex gap-3 text-sm text-slate-600">
                            <span className="text-green-500 font-bold">‚Ä¢</span>
                            <span>
                                <strong>–ó–∞ 3 –¥–Ω—è:</strong> –ò—Å–∫–ª—é—á–∏—Ç—å –∂–∏–≤–æ—Ç–Ω—ã–µ –±–µ–ª–∫–∏ (–º—è—Å–æ, —è–π—Ü–∞, –º–æ–ª–æ—á–Ω–æ–µ). –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Ä–∞—Å—Ç–∏—Ç–µ–ª—å–Ω–æ-–º–æ–ª–æ—á–Ω—É—é –¥–∏–µ—Ç—É.
                            </span>
                        </li>
                        <li className="flex gap-3 text-sm text-slate-600">
                            <span className="text-green-500 font-bold">‚Ä¢</span>
                            <span>
                                <strong>–ù–∞–∫–∞–Ω—É–Ω–µ:</strong> –õ–µ–≥–∫–∏–π —É–∂–∏–Ω. –ö–∞—à–∏ –Ω–∞ –≤–æ–¥–µ, —Ç—É—à–µ–Ω—ã–µ –æ–≤–æ—â–∏ –∏–ª–∏ –∫–µ—Ñ–∏—Ä.
                            </span>
                        </li>
                    </ul>
                </div>

                {/* 2. –û—á–∏—â–µ–Ω–∏–µ (–°–ø–æ—Ä–Ω—ã–π –º–æ–º–µ–Ω—Ç, –Ω–æ –ø–æ –∫–Ω–∏–≥–µ) */}
                <div className="bg-blue-50 rounded-2xl p-5 border border-blue-100">
                    <div className="flex items-center gap-3 mb-3 border-b border-blue-100 pb-2">
                        <div className="p-1.5 bg-white rounded-lg text-blue-600 shadow-sm">
                            <Droplets className="w-4 h-4" />
                        </div>
                        <h3 className="font-bold text-blue-900">–û—á–∏—â–µ–Ω–∏–µ (–ú–∞–≥–Ω–µ–∑–∏—è)</h3>
                    </div>
                    <p className="text-sm text-blue-800 leading-relaxed mb-2">
                        –°–æ–≤–µ—Ç—Å–∫–∞—è —à–∫–æ–ª–∞ –Ω–∞—Å—Ç–∞–∏–≤–∞–µ—Ç –Ω–∞ –ø—Ä–∏–µ–º–µ —Å–æ–ª–µ–≤–æ–≥–æ —Å–ª–∞–±–∏—Ç–µ–ª—å–Ω–æ–≥–æ (—Å—É–ª—å—Ñ–∞—Ç –º–∞–≥–Ω–∏—è) –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º.
                    </p>
                    <div className="bg-white/60 p-3 rounded-xl text-xs text-blue-700 font-medium">
                        –≠—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é ¬´–≤—ã–∫–ª—é—á–∞–µ—Ç¬ª –ø–∏—â–µ–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ç—Ä–∞–∫—Ç –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–µ –¥–Ω–∏.
                    </div>
                </div>

                {/* 3. –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è */}
                <div className="bg-white rounded-2xl p-5 shadow-sm">
                    <div className="flex items-center gap-3 mb-3 border-b border-gray-100 pb-2">
                        <div className="p-1.5 bg-slate-50 rounded-lg text-slate-600">
                            <ShieldCheck className="w-4 h-4" />
                        </div>
                        <h3 className="font-bold text-slate-800">–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π –Ω–∞—Å—Ç—Ä–æ–π</h3>
                    </div>
                    <p className="text-sm text-slate-600 leading-relaxed">
                        –ù–∏–∫–æ–ª–∞–µ–≤ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–ª: –≤—ã –Ω–µ ¬´–≥–æ–ª–æ–¥–∞–µ—Ç–µ¬ª (—Å—Ç—Ä–∞–¥–∞–µ—Ç–µ), –≤—ã –ø—Ä–æ–≤–æ–¥–∏—Ç–µ <strong>–ª–µ—á–µ–±–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É</strong>. –í–æ—Å–ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ —ç—Ç–æ –∫–∞–∫ –æ—Ç–¥—ã—Ö –¥–ª—è –æ—Ä–≥–∞–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä—É–¥–∏–ª–∏—Å—å –±–µ–∑ –≤—ã—Ö–æ–¥–Ω—ã—Ö –≤—Å—é –≤–∞—à—É –∂–∏–∑–Ω—å.
                    </p>
                </div>

                {/* Footer Note */}
                <div className="text-center px-6">
                    <p className="text-[10px] text-slate-400 font-medium leading-relaxed">
                        –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –∫–Ω–∏–≥–µ ¬´–ì–æ–ª–æ–¥–∞–Ω–∏–µ —Ä–∞–¥–∏ –∑–¥–æ—Ä–æ–≤—å—è¬ª (1988).<br/>
                        –ú–µ—Ç–æ–¥–∏–∫–∞ —Ä–∞–∑–≥—Ä—É–∑–æ—á–Ω–æ-–¥–∏–µ—Ç–∏—á–µ—Å–∫–æ–π —Ç–µ—Ä–∞–ø–∏–∏ (–†–î–¢).
                    </p>
                </div>

              </div>
            </div>
          </motion.div>
        </>
      )}
    </AnimatePresence>
  );

  return createPortal(content, document.body);
};



================================================================================
FILE: src/features/fasting/components/AnabolicState.tsx (221 lines)
================================================================================

import { useState } from 'react';
import { motion, AnimatePresence } from 'framer-motion';
import { ChevronRight, Play, BookOpen, ArrowLeft, CheckCircle2, Circle } from 'lucide-react';
import { useNavigate } from 'react-router-dom';
import { cn } from '../../../utils/cn';
import { SovietProtocolSheet } from './SovietProtocolSheet';
import { PREP_STEPS } from '../data/preparationSteps';

// --- ART COMPONENTS (–¢–µ –∂–µ, —á—Ç–æ –∏ –±—ã–ª–∏, –¥–ª—è –∞—Ç–º–æ—Å—Ñ–µ—Ä—ã) ---
// (–Ø —Å–æ–∫—Ä–∞—Ç–∏–ª –∏—Ö –∫–æ–¥ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏, –≤—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –æ—Ç–≤–µ—Ç–∞)
const MindArt = () => <div className="absolute inset-0 flex items-center justify-center opacity-60"><motion.div animate={{ rotate: 360 }} transition={{ duration: 40, repeat: Infinity, ease: "linear" }} className="w-56 h-56 border-2 border-dashed border-violet-300 rounded-full" /></div>;
const NatureArt = () => <div className="absolute inset-0 flex items-center justify-center opacity-50"><motion.div animate={{ scale: [1, 1.1, 1] }} transition={{ duration: 5, repeat: Infinity }} className="w-48 h-48 bg-emerald-400/20 rounded-full blur-3xl" /></div>;
const GrainsArt = () => <div className="absolute inset-0 opacity-30"><div className="w-full h-full bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]" /></div>;
const ChemistryArt = () => <div className="absolute inset-0 flex items-center justify-center opacity-40"><div className="grid grid-cols-3 gap-6 rotate-12">{[...Array(9)].map((_, i) => <div key={i} className="w-2 h-2 bg-blue-500 rounded-full" />)}</div></div>;
const WaterArt = () => <div className="absolute inset-0 overflow-hidden opacity-50">{[...Array(5)].map((_, i) => <motion.div key={i} animate={{ y: -100 }} transition={{ duration: 3 + i, repeat: Infinity, ease: "linear" }} className="absolute w-3 h-3 bg-cyan-400/40 rounded-full blur-sm" style={{ top: '100%', left: `${i * 20}%` }} />)}</div>;
const MovementArt = () => <div className="absolute inset-0 flex items-center justify-center opacity-40"><motion.div animate={{ rotate: [0, 10, 0] }} transition={{ duration: 4, repeat: Infinity }} className="w-64 h-2 bg-orange-300/50 rounded-full" /></div>;
const MedicalArt = () => <div className="absolute inset-0 flex items-center justify-center opacity-30"><div className="text-6xl text-rose-300 font-black">+</div></div>;

const getArt = (theme: string) => {
    switch (theme) {
        case 'mind': return <MindArt />;
        case 'nature': case 'grains': return <NatureArt />; // –û–±—ä–µ–¥–∏–Ω–∏–ª –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã
        case 'chemistry': return <ChemistryArt />;
        case 'water': return <WaterArt />;
        case 'movement': return <MovementArt />;
        case 'medical': return <MedicalArt />;
        default: return <GrainsArt />;
    }
};

// --- –ö–û–ú–ü–û–ù–ï–ù–¢ ---

export const AnabolicState = () => {
  const navigate = useNavigate();
  const [activeStep, setActiveStep] = useState(0);
  const [showSovietSheet, setShowSovietSheet] = useState(false);
  
  // –•—Ä–∞–Ω–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —á–µ–∫–±–æ–∫—Å–æ–≤: { "stepId-itemIndex": boolean }
  const [checkedItems, setCheckedItems] = useState<Record<string, boolean>>({});

  const step = PREP_STEPS[activeStep];
  const isLastStep = activeStep === PREP_STEPS.length - 1;

  // –ü—Ä–æ–≤–µ—Ä–∫–∞: –≤—Å–µ –ª–∏ –ø—É–Ω–∫—Ç—ã –Ω–∞ —Ç–µ–∫—É—â–µ–º —à–∞–≥–µ –æ—Ç–º–µ—á–µ–Ω—ã?
  const allChecked = step.checklist.every((_, idx) => checkedItems[`${activeStep}-${idx}`]);

  const toggleCheck = (idx: number) => {
      const key = `${activeStep}-${idx}`;
      const newVal = !checkedItems[key];
      setCheckedItems(prev => ({ ...prev, [key]: newVal }));
      
      // –í–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
      if (newVal && navigator.vibrate) navigator.vibrate(10);
  };

  const handleNext = () => {
    if (isLastStep) {
      navigate('/timer');
    } else {
      setActiveStep(s => s + 1);
    }
  };

  const handlePrev = () => {
    if (activeStep > 0) setActiveStep(s => s - 1);
  };

  return (
    <>
        <SovietProtocolSheet 
            isOpen={showSovietSheet} 
            onClose={() => setShowSovietSheet(false)} 
        />

        <div className="min-h-full flex flex-col pb-6 relative z-0">
        
        <div className="bg-white rounded-[3rem] shadow-sm shadow-slate-200/50 relative flex-1 flex flex-col z-10 border border-white/60 overflow-hidden">
            
            {/* –•–ï–î–ï–† (–ü—Ä–æ–≥—Ä–µ—Å—Å) */}
            <div className="px-8 pt-8 pb-2 shrink-0 z-20">
                <div className="flex justify-between items-center mb-6">
                    <div className="flex gap-1">
                        {PREP_STEPS.map((_, i) => (
                            <motion.div
                                key={i}
                                animate={{ 
                                    width: i === activeStep ? 20 : 6,
                                    height: 6,
                                    backgroundColor: i <= activeStep ? (step.color.includes('violet') ? '#7c3aed' : step.color.includes('emerald') ? '#059669' : '#334155') : '#e2e8f0'
                                }}
                                className="rounded-full"
                            />
                        ))}
                    </div>
                    <button 
                        onClick={() => setShowSovietSheet(true)}
                        className="w-10 h-10 bg-slate-50 rounded-full flex items-center justify-center text-slate-400 hover:text-slate-600 active:scale-95 transition-transform"
                    >
                        <BookOpen className="w-5 h-5" />
                    </button>
                </div>
            </div>

            {/* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ */}
            <div className="flex-1 overflow-y-auto scrollbar-hide px-6 pb-28">
                <AnimatePresence mode="wait">
                    <motion.div
                        key={step.id}
                        initial={{ opacity: 0, x: 20 }}
                        animate={{ opacity: 1, x: 0 }}
                        exit={{ opacity: 0, x: -20 }}
                        transition={{ duration: 0.3, ease: "easeOut" }}
                    >
                        {/* 1. –í–ò–ó–£–ê–õ–¨–ù–ê–Ø –ö–ê–†–¢–û–ß–ö–ê */}
                        <div className="relative w-full aspect-[16/9] rounded-[2rem] overflow-hidden mb-8 shadow-sm border border-slate-100 bg-white">
                            <div className={cn("absolute inset-0 bg-gradient-to-br opacity-40", step.gradient)} />
                            <div className="absolute inset-0">{getArt(step.theme)}</div>
                            
                            <div className="absolute inset-0 flex flex-col items-center justify-center p-6 text-center z-10">
                                <div className="w-16 h-16 bg-white/80 backdrop-blur-md rounded-2xl flex items-center justify-center shadow-lg mb-3">
                                    <step.icon className={cn("w-8 h-8", step.color)} />
                                </div>
                                <h2 className="text-2xl font-[900] text-slate-800 leading-none mb-1">
                                    {step.title}
                                </h2>
                                <p className="text-xs font-bold text-slate-400 uppercase tracking-widest">
                                    {step.subtitle}
                                </p>
                            </div>
                        </div>

                        {/* 2. –¶–ò–¢–ê–¢–ê */}
                        <div className="mb-8 relative pl-4 border-l-4 border-slate-200">
                            <p className="text-sm italic font-medium text-slate-500 leading-relaxed">
                                {step.quote}
                            </p>
                        </div>

                        {/* 3. –ò–ù–¢–ï–†–ê–ö–¢–ò–í–ù–´–ô –ß–ï–ö-–õ–ò–°–¢ */}
                        <div className="space-y-3">
                            <h3 className="text-[10px] font-bold text-slate-400 uppercase tracking-widest pl-1 mb-2">
                                –ß–µ–∫-–ª–∏—Å—Ç –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏
                            </h3>
                            {step.checklist.map((item, idx) => {
                                const isChecked = checkedItems[`${activeStep}-${idx}`];
                                return (
                                    <div 
                                        key={idx}
                                        onClick={() => toggleCheck(idx)}
                                        className={cn(
                                            "p-4 rounded-2xl border transition-all duration-200 flex items-center gap-4 cursor-pointer active:scale-[0.98]",
                                            isChecked 
                                                ? "bg-slate-50 border-slate-200" 
                                                : "bg-white border-slate-100 shadow-sm hover:border-blue-200"
                                        )}
                                    >
                                        <div className={cn(
                                            "w-6 h-6 rounded-full flex items-center justify-center shrink-0 transition-colors",
                                            isChecked ? "bg-slate-800 text-white" : "bg-slate-100 text-slate-300"
                                        )}>
                                            {isChecked ? <CheckCircle2 className="w-4 h-4" /> : <Circle className="w-4 h-4" />}
                                        </div>
                                        <span className={cn(
                                            "text-sm font-medium transition-all",
                                            isChecked ? "text-slate-400 line-through" : "text-slate-700"
                                        )}>
                                            {item}
                                        </span>
                                    </div>
                                );
                            })}
                        </div>

                    </motion.div>
                </AnimatePresence>
            </div>

            {/* –§–£–¢–ï–† (–ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏) */}
            <div className="absolute bottom-0 left-0 right-0 p-6 pt-8 bg-gradient-to-t from-white via-white/90 to-transparent z-30 flex gap-3">
                {activeStep > 0 && (
                    <button 
                        onClick={handlePrev}
                        className="w-14 h-14 rounded-2xl flex items-center justify-center bg-white border border-slate-200 text-slate-400 active:scale-95 transition-transform shrink-0 shadow-sm"
                    >
                        <ArrowLeft className="w-5 h-5" />
                    </button>
                )}
                
                <button 
                    onClick={handleNext}
                    className={cn(
                        "flex-1 h-14 rounded-2xl flex items-center justify-between px-6 shadow-xl transition-all duration-300 group active:scale-95",
                        // –ï—Å–ª–∏ –≤—Å–µ –æ—Ç–º–µ—á–µ–Ω–æ - –∫–Ω–æ–ø–∫–∞ —è—Ä–∫–∞—è, –µ—Å–ª–∏ –Ω–µ—Ç - –æ–±—ã—á–Ω–∞—è
                        allChecked 
                            ? "bg-slate-900 text-white shadow-slate-900/20" 
                            : "bg-white text-slate-400 border border-slate-200"
                    )}
                >
                    <span className={cn("font-bold text-sm tracking-wide pl-2", !allChecked && "font-medium")}>
                        {isLastStep ? "–ù–∞—á–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ" : allChecked ? "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å" : "–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å"}
                    </span>
                    
                    <div className={cn(
                        "w-8 h-8 rounded-xl flex items-center justify-center transition-colors",
                        allChecked ? "bg-white/20" : "bg-slate-50"
                    )}>
                        {isLastStep ? (
                            <Play className="w-4 h-4 fill-current" />
                        ) : (
                            <ChevronRight className="w-5 h-5" />
                        )}
                    </div>
                </button>
            </div>

        </div>
        </div>
    </>
  );
};



================================================================================
FILE: src/features/fasting/data/schemes.ts (71 lines)
================================================================================

import { Flame, Droplets, Zap, Shield, Sparkles, Brain, Star } from 'lucide-react';
import type { LucideIcon } from 'lucide-react';

export interface FastingScheme {
  id: string;
  title: string;
  hours: number;
  description: string;
  color: string;
  icon: LucideIcon;
}

export const FASTING_SCHEMES: FastingScheme[] = [
  {
    id: '24h',
    title: '24—á: –ë–∞–∑–∞ –∞—É—Ç–æ—Ñ–∞–≥–∏–∏',
    hours: 24,
    description: '–°—É—Ç–æ—á–Ω–∞—è –ø–∞—É–∑–∞. –ü–æ–ª–Ω–æ–µ –∏—Å—Ç–æ—â–µ–Ω–∏–µ –≥–ª–∏–∫–æ–≥–µ–Ω–∞ –∏ –∑–∞–ø—É—Å–∫ –æ—á–∏—â–µ–Ω–∏—è –∫–ª–µ—Ç–æ–∫.',
    color: 'text-blue-500',
    icon: Droplets
  },
  {
    id: '36h',
    title: '36—á: –ú–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å',
    hours: 36,
    description: '–ì–ª—É–±–æ–∫–∏–π –∫–µ—Ç–æ–∑. –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å–∂–∏–≥–∞–Ω–∏—è –∂–∏—Ä–∞ (+300%).',
    color: 'text-emerald-500',
    icon: Flame
  },
  {
    id: '48h',
    title: '48—á: –ò–º–º—É–Ω–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞',
    hours: 48,
    description: '–ü–∏–∫ –≥–æ—Ä–º–æ–Ω–∞ —Ä–æ—Å—Ç–∞. –ù–∞—á–∞–ª–æ —Ä–∞—Å–ø–∞–¥–∞ —Å—Ç–∞—Ä—ã—Ö –∏–º–º—É–Ω–Ω—ã—Ö –∫–ª–µ—Ç–æ–∫.',
    color: 'text-violet-500',
    icon: Shield
  },
  {
    id: '72h',
    title: '72—á: –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (3 —Å—É—Ç–æ–∫)',
    hours: 72,
    description: '–ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞. –ê–∫—Ç–∏–≤–∞—Ü–∏—è —Å—Ç–≤–æ–ª–æ–≤—ã—Ö –∫–ª–µ—Ç–æ–∫.',
    color: 'text-rose-500',
    icon: Zap
  },
  {
    id: '96h',
    title: '96—á: –ù–µ–π—Ä–æ–≥–µ–Ω–µ–∑ (4 —Å—É—Ç–æ–∫)',
    hours: 96,
    description: '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã—Ä–∞–±–æ—Ç–∫–∞ BDNF. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π –º–æ–∑–≥–∞.',
    color: 'text-indigo-500',
    icon: Brain
  },
  {
    id: '120h',
    title: '120—á: –û–º–æ–ª–æ–∂–µ–Ω–∏–µ (5 —Å—É—Ç–æ–∫)',
    hours: 120,
    description: '–°–Ω–∏–∂–µ–Ω–∏–µ –≤–æ—Å–ø–∞–ª–µ–Ω–∏—è. –ì–ª—É–±–æ–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –∫–ª–µ—Ç–æ–∫ (—Å–µ–Ω–æ–ª–∏—Ç–∏–∫–æ–≤).',
    color: 'text-fuchsia-500',
    icon: Sparkles
  },
  {
    id: '168h',
    title: '168—á: –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (7 –¥–Ω–µ–π)',
    hours: 168,
    description: '–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª. –°–∏—Å—Ç–µ–º–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ–≥–æ –æ—Ä–≥–∞–Ω–∏–∑–º–∞.',
    color: 'text-amber-500',
    icon: Star
  }
];



================================================================================
FILE: src/features/fasting/data/stages.ts (473 lines)
================================================================================

import { 
  Utensils, 
  Activity, 
  Battery, 
  Flame, 
  Zap, 
  Leaf, 
  Trophy, 
  Shield, 
  Droplets, 
  Sparkles, 
  Sun, 
  Brain, 
  Moon, 
  Star
} from 'lucide-react';

// üëá –í–æ—Ç —Ç–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–∏–ø –æ—Ç–¥–µ–ª—å–Ω–æ
import type { LucideIcon } from 'lucide-react';

export interface FastingStage {
  id: number;
  hoursStart: number;
  hoursEnd: number | null;
  title: string;
  subtitle: string;
  icon: LucideIcon;
  details: {
    physiology: string;
    sensations: string[];
  };
  recommendations: string[];
  precautions: string[];
  color: string;
}

export const FASTING_PHASES: FastingStage[] = [
  // === –§–∞–∑–∞ 1 ===
  {
    id: 1,
    hoursStart: 0,
    hoursEnd: 4,
    title: "–ê–Ω–∞–±–æ–ª–∏—á–µ—Å–∫–∞—è —Å—Ç–∞–¥–∏—è",
    subtitle: "–ü–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ –∏ —Ä–æ—Å—Ç",
    icon: Utensils,
    color: "bg-blue-100 text-blue-600",
    details: {
      physiology: "–í –ø–µ—Ä–≤—ã–µ —á–∞—Å—ã –ø–æ—Å–ª–µ –µ–¥—ã (0‚Äì4 —á) —É—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã –∏ –∏–Ω—Å—É–ª–∏–Ω–∞ –≤ –∫—Ä–æ–≤–∏ –≤—ã—Å–æ–∫. –ò–Ω—Å—É–ª–∏–Ω —Å—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç —É—Å–≤–æ–µ–Ω–∏–µ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤: –∏–∑ –≥–ª—é–∫–æ–∑—ã –ø–æ–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞–ø–∞—Å—ã –≥–ª–∏–∫–æ–≥–µ–Ω–∞ –≤ –ø–µ—á–µ–Ω–∏ –∏ –º—ã—à—Ü–∞—Ö, –∞ –∏–∑–±—ã—Ç–æ–∫ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤ –ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ —Å–∏–Ω—Ç–µ–∑ —Ç—Ä–∏–≥–ª–∏—Ü–µ—Ä–∏–¥–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –º–∞–∫—Ä–æ–º–æ–ª–µ–∫—É–ª. –≠—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –Ω–∞–∑—ã–≤–∞—é—Ç –∞–Ω–∞–±–æ–ª–∏—á–µ—Å–∫–∏–º ‚Äì —Ç–µ–ª–æ –∞–∫—Ç–∏–≤–Ω–æ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –≤ —ç—Ç–æ –≤—Ä–µ–º—è –ø–æ–¥–∞–≤–ª–µ–Ω –≤—ã—Å–æ–∫–∏–º –∏–Ω—Å—É–ª–∏–Ω–æ–º, –ø–æ—ç—Ç–æ–º—É –µ–≥–æ –≤–ª–∏—è–Ω–∏–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ. –ö–µ—Ç–æ–Ω–æ–≤—ã–µ —Ç–µ–ª–∞ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ –≤—ã—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è (–ø—Ä–∏ –∏–∑–±—ã—Ç–∫–µ –≥–ª—é–∫–æ–∑—ã –∂–∏—Ä—ã –Ω–µ —Ä–∞—Å—â–µ–ø–ª—è—é—Ç—Å—è). –ê—É—Ç–æ—Ñ–∞–≥–∏—è –ø—Ä–∏ –∏–∑–±—ã—Ç–∫–µ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è. –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≥–ª—é–∫–æ–∑—ã: –ø–µ—á–µ–Ω—å –≤ —Ç–µ—á–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–µ—Ä–≤—ã—Ö —Å—É—Ç–æ–∫ –≥–æ–ª–æ–¥–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å—Ö–æ–¥—É–µ—Ç –≥–ª–∏–∫–æ–≥–µ–Ω; –≤ —ç—Ç—É —Ñ–∞–∑—É –∑–∞–ø–∞—Å—ã –≥–ª–∏–∫–æ–≥–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. –ì–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω: —É—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –µ–¥—ã, –≥–ª—é–∫–∞–≥–æ–Ω –µ—â–µ –Ω–µ–≤—ã—Å–æ–∫, –Ω–æ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞—Å—Ç–∏.",
      sensations: [
        "–ü–æ–ª–Ω–æ—Ç–∞/—Å—ã—Ç–æ—Å—Ç—å, –≤—ã—Å–æ–∫–∞—è —ç–Ω–µ—Ä–≥–∏—è (—á–∞—Å—Ç–æ –ª–µ–≥–∫–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å –ø–æ—Å–ª–µ –µ–¥—ã)",
        "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≥–æ–ª–æ–¥",
        "–í–æ–∑–º–æ–∂–Ω–∞ –æ–±—â–∞—è —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω–æ—Å—Ç—å, –ª–µ–≥–∫–∞—è —Ç—è–∂–µ—Å—Ç—å –≤ –∂–µ–ª—É–¥–∫–µ",
        "–ù–µ–±–æ–ª—å—à–∞—è —Å–ª–∞–±–æ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–∞ –ª–∏—à—å –ø—Ä–∏ –±–æ–ª—å—à–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –Ω–∞ –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ"
      ]
    },
    recommendations: [
      "–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–∏—Ç—å –≤–æ–¥—É –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏; –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–µ–±–æ–ª—å—à—É—é —Å–æ–ª—å –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–æ–≤.",
      "–ò–∑–±–µ–≥–∞—Ç—å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫ (–ª—É—á—à–µ –æ—Ç–¥—ã—Ö–∞—Ç—å –∏–ª–∏ —Å–ø–æ–∫–æ–π–Ω–æ –ø—Ä–æ–≥—É–ª—è—Ç—å—Å—è).",
      "–ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –±–æ–ª–µ–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≥–æ–ª–æ–¥–∞–Ω–∏–µ, –Ω–µ –¥–æ–ø—É—Å–∫–∞—Ç—å –ø–µ—Ä–µ–µ–¥–∞–Ω–∏—è –Ω–∞–∫–∞–Ω—É–Ω–µ, —á—Ç–æ–±—ã –Ω–µ –≤—ã–∑–≤–∞—Ç—å —Ç—è–∂–µ—Å—Ç–∏."
    ],
    precautions: [
      "–û–±—ã—á–Ω–æ –≤ —ç—Ç–æ–π —Ñ–∞–∑–µ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ –Ω–µ –Ω—É–∂–Ω–æ. –û–¥–Ω–∞–∫–æ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Å–∏–ª—å–Ω–æ–π —Ç–æ—à–Ω–æ—Ç—ã, —Ç—è–∂–µ—Å—Ç–∏ –∏–ª–∏ –æ—Å—Ç—Ä–æ–π –±–æ–ª–∏ –≤ –∂–∏–≤–æ—Ç–µ –ø–æ—Å–ª–µ –µ–¥—ã —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≤—Ä–∞—á—É.",
      "–õ—é–¥—è–º —Å –Ω–µ–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–º –¥–∏–∞–±–µ—Ç–æ–º –∏–ª–∏ —Ç—è–∂–µ–ª—ã–º–∏ –∂–µ–ª—É–¥–æ—á–Ω–æ-–∫–∏—à–µ—á–Ω—ã–º–∏ –ø–∞—Ç–æ–ª–æ–≥–∏—è–º–∏ –ø–µ—Ä–µ–¥ –≥–æ–ª–æ–¥–∞–Ω–∏–µ–º —Å–ª–µ–¥—É–µ—Ç –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º."
    ]
  },

  // === –§–∞–∑–∞ 2 ===
  {
    id: 2,
    hoursStart: 4,
    hoursEnd: 8,
    title: "–†–∞–Ω–Ω–∏–π –ø–æ—Å—Ç–∞–±—Å–æ—Ä–±—Ç–∏–≤–Ω—ã–π —ç—Ç–∞–ø",
    subtitle: "–°–Ω–∏–∂–µ–Ω–∏–µ –∏–Ω—Å—É–ª–∏–Ω–∞",
    icon: Activity,
    color: "bg-green-100 text-green-600",
    details: {
      physiology: "–ö —ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–≤–∞—Ä–∏–≤–∞–Ω–∏—è –µ–¥—ã –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è. –£—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–Ω–∏–∂–∞—Ç—å—Å—è, –Ω–æ –µ—â–µ –æ—Å—Ç–∞–µ—Ç—Å—è –≤—ã—à–µ –±–∞–∑–æ–≤–æ–≥–æ. –ü–µ—á–µ–Ω—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—â–µ—Å—Ç–≤–∞ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–µ–º–∞ –ø–∏—â–∏. –ì–ª—é–∫–æ–∑–∞ –≤ –∫—Ä–æ–≤–∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –ø–∞–¥–∞–µ—Ç –∫ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º (–ø–æ—Å—Ç–ø—Ä–∞–Ω–¥–∏–∞–ª—å–Ω—ã–º) –∑–Ω–∞—á–µ–Ω–∏—è–º. –ü–µ—á–µ–Ω–æ—á–Ω—ã–π –≥–ª–∏–∫–æ–≥–µ–Ω –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∑–∞–ø–∞—Å–∞—Ç—å—Å—è –∏–∑ –æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –∏–∑–±—ã—Ç–∫–∞ –≥–ª—é–∫–æ–∑—ã. –ö–µ—Ç–æ–≥–µ–Ω–µ–∑ –µ—â–µ –Ω–µ –Ω–∞—á–∞—Ç ‚Äì —É—Ä–æ–≤–µ–Ω—å –∫–µ—Ç–æ–Ω–æ–≤ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—á–µ–Ω—å –Ω–∏–∑–∫–∏–º. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å—Å—è (—Å–Ω–∏–∂–µ–Ω–∏–µ –∏–Ω—Å—É–ª–∏–Ω–∞ —Å–Ω–∏–º–∞–µ—Ç –∏–Ω–≥–∏–±–∏—Ä—É—é—â–∏–π —ç—Ñ—Ñ–µ–∫—Ç –Ω–∞ —Å–µ–∫—Ä–µ—Ü–∏—é –ì–†).",
      sensations: [
        "–ù–∞—á–∏–Ω–∞–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —á—É–≤—Å—Ç–≤–æ –ª–µ–≥–∫–æ–≥–æ –≥–æ–ª–æ–¥–∞, –Ω–æ –æ–Ω–æ –µ—â–µ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç—Å—è —É—Ä–æ–≤–Ω–µ–º –≥–ª—é–∫–æ–∑—ã",
        "–û–±—â–∞—è —ç–Ω–µ—Ä–≥–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –∏–ª–∏ —Å–ª–µ–≥–∫–∞ –ø–æ–Ω–∏–∂–µ–Ω–Ω–æ–π",
        "–í–æ–∑–º–æ–∂–Ω–∞ –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å",
        "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, —á—É–≤—Å—Ç–≤–∞ —Å–ª–∞–±–æ—Å—Ç–∏ –∏ –æ–∑–Ω–æ–±–∞ –µ—â–µ –Ω–µ—Ç"
      ]
    },
    recommendations: [
      "–ü–∏—Ç—å –≤–æ–¥—É (–º–æ–∂–Ω–æ —Å –Ω–µ–±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–ª–∏) –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–æ–≤.",
      "–í–µ—Å—Ç–∏ –æ–±—ã—á–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: –ª–µ–≥–∫–∞—è —Ö–æ–¥—å–±–∞, –±—ã—Ç–æ–≤—ã–µ –¥–µ–ª–∞.",
      "–ò–∑–±–µ–≥–∞—Ç—å —Å–∏–ª—å–Ω—ã—Ö —Å—Ç—Ä–µ—Å—Å–æ–≤ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–≥—Ä—É–∑–æ–∫."
    ],
    precautions: [
      "–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ –æ–±—ã—á–Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –ï—Å–ª–∏ –∂–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å–∏–ª—å–Ω—ã–µ –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Ä–µ–∑–∫–∞—è —Å–ª–∞–±–æ—Å—Ç—å, –æ—Å–æ–±–µ–Ω–Ω–æ —É –ª–∏—Ü —Å –¥–∏–∞–±–µ—Ç–æ–º –∏–ª–∏ –Ω–∏–∑–∫–∏–º –¥–∞–≤–ª–µ–Ω–∏–µ–º, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–¥—É.",
      "–ü–∞—Ü–∏–µ–Ω—Ç–∞–º —Å –ø–µ—Ä–≤—ã–º —Ç–∏–ø–æ–º –¥–∏–∞–±–µ—Ç–∞ –∏ —Ç–µ–º, –∫—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–Ω—Å—É–ª–∏–Ω, —Å–ª–µ–¥—É–µ—Ç —Å—Ç—Ä–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã –∏ –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º–∏ –ø—Ä–µ—Ä–≤–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ –ø—Ä–∏ —Ä–∏—Å–∫–µ –≥–∏–ø–æ–≥–ª–∏–∫–µ–º–∏–∏."
    ]
  },
  // –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç...
  // === –§–∞–∑–∞ 3 ===
  {
    id: 3,
    hoursStart: 8,
    hoursEnd: 12,
    title: "–ü–æ–∑–¥–Ω–∏–π –ø–æ—Å—Ç–∞–±—Å–æ—Ä–±—Ç–∏–≤–Ω—ã–π —ç—Ç–∞–ø",
    subtitle: "–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–µ—á–µ–Ω–∏",
    icon: Battery,
    color: "bg-orange-100 text-orange-600",
    details: {
      physiology: "–ü—Ä–∏–º–µ—Ä–Ω–æ —á–µ—Ä–µ–∑ 8‚Äì12 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –µ–¥—ã –∏–Ω—Å—É–ª–∏–Ω –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –Ω–∏–∑–∫–∏—Ö (–±–∞–∑–∞–ª—å–Ω—ã—Ö) –∑–Ω–∞—á–µ–Ω–∏–π. –ö —ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –æ—Ä–≥–∞–Ω–∏–∑–º –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—à–µ–ª –≤ –ø–æ—Å—Ç–ø—Ä–∞–Ω–¥–∏–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º ‚Äì –æ—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å –≥–ª—é–∫–æ–∑—ã –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø—Ä–∏–µ–º–∞ –ø–∏—â–∏ –ª–∏–±–æ —É–∂–µ –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–∞, –ª–∏–±–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ—Å—Ç—É–ø–∞—Ç—å –∏–∑ –∑–∞–ø–∞—Å–æ–≤ –≥–ª–∏–∫–æ–≥–µ–Ω–∞. –ì–æ—Ä–º–æ–Ω –ø–∞–Ω–∫—Ä–µ–∞—Å–∞ –≥–ª—é–∫–∞–≥–æ–Ω –ø–æ–≤—ã—à–∞–µ—Ç—Å—è, –∞–∫—Ç–∏–≤–∏—Ä—É—è —Ä–∞—Å–ø–∞–¥ –≥–ª–∏–∫–æ–≥–µ–Ω–∞ –≤ –ø–µ—á–µ–Ω–∏. –≠—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —É—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã –≤ –∫—Ä–æ–≤–∏ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö. –ö–µ—Ç–æ–Ω–æ–≤—ã–µ —Ç–µ–ª–∞ –ª–∏—à—å –Ω–∞—á–∏–Ω–∞—é—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è –≤ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞—Ö. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞—Å—Ç–∏ –ø–æ –º–µ—Ä–µ —Å–Ω–∏–∂–µ–Ω–∏—è –∏–Ω—Å—É–ª–∏–Ω–∞. –ê—É—Ç–æ—Ñ–∞–≥–∏—è –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ –∏–∑-–∑–∞ –Ω–∞–ª–∏—á–∏—è –≥–ª—é–∫–æ–∑—ã –∏ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç.",
      sensations: [
        "–ó–∞–º–µ—Ç–Ω—ã–π –≥–æ–ª–æ–¥ (—Ö–æ—Ç—è –æ–Ω –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Å—Ç–∏—Ö–∞–µ—Ç –±–ª–∏–∂–µ –∫ 12 —á)",
        "–í–æ–∑–º–æ–∂–Ω–∞ –ª–µ–≥–∫–∞—è —Å–ª–∞–±–æ—Å—Ç—å, –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å (—Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã–π ¬´–≥–æ–ª–æ–¥–Ω—ã–π –º–∏–≥—Ä–µ–Ω—å¬ª –∑–∞ —Å—á–µ—Ç –≥–∏–ø–æ–≥–ª–∏–∫–µ–º–∏–∏)",
        "–ù–µ–∫–æ—Ç–æ—Ä–∞—è —Ö–æ–ª–æ–¥–æ—Ä–µ—Ñ–ª–µ–∫—Å–∏—è (—Å–Ω–∏–∂–µ–Ω–∏–µ —Ç–µ–ø–ª–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∏ –Ω–∏–∑–∫–æ–π –≥–ª—é–∫–æ–∑–µ)",
        "–ù–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è —É–º—Å—Ç–≤–µ–Ω–Ω–∞—è —è—Å–Ω–æ—Å—Ç—å –∏ –±–æ–¥—Ä–æ—Å—Ç—å, —Ç.–∫. –º–æ–∑–≥ —É–∂–µ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ —Å–Ω–∏–∂–µ–Ω–∏—é –≥–ª—é–∫–æ–∑—ã"
      ]
    },
    recommendations: [
      "–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø–∏—Ç—å –≤–æ–¥—É (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —â–µ–ø–æ—Ç–∫—É —Å–æ–ª–∏ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–æ–≤).",
      "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–ø–æ–∫–æ–π–Ω–∞—è —Ö–æ–¥—å–±–∞ –Ω–∞ —Å–≤–µ–∂–µ–º –≤–æ–∑–¥—É—Ö–µ ‚Äì —ç—Ç–æ —É—Å–∏–ª–∏–≤–∞–µ—Ç —Ü–∏—Ä–∫—É–ª—è—Ü–∏—é –∫—Ä–æ–≤–∏ –∏ –ø—Ä–∏—Ç–æ–∫ –∫–∏—Å–ª–æ—Ä–æ–¥–∞.",
      "–•–æ—Ä–æ—à–æ –≤—ã—Å–ø–∞—Ç—å—Å—è –Ω–æ—á—å—é, –æ–±–µ—Å–ø–µ—á–∏—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –æ—Ç–¥—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–º—É."
    ],
    precautions: [
      "–ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Å–∏–ª—å–Ω—ã—Ö —Å–∏–º–ø—Ç–æ–º–æ–≤ –≥–∏–ø–æ–≥–ª–∏–∫–µ–º–∏–∏ (–≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ, –ø–æ—Ç–µ–º–Ω–µ–Ω–∏–µ –≤ –≥–ª–∞–∑–∞—Ö, –ø–æ—Ç–ª–∏–≤–æ—Å—Ç—å, —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–µ) ‚Äì –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏–Ω—è—Ç—å –ø–∏—â—É.",
      "–õ—é–¥—è–º —Å —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è–º–∏ —Å–µ—Ä–¥—Ü–∞, –ø–µ—á–µ–Ω–∏, –ø–æ—á–µ–∫ –∏–ª–∏ –¥–∏–∞–±–µ—Ç–æ–º I —Ç–∏–ø–∞ –∫ —ç—Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É —Å–ª–µ–¥—É–µ—Ç –æ—Ü–µ–Ω–∏—Ç—å —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ—Å—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –≥–æ–ª–æ–¥–∞–Ω–∏—è."
    ]
  },

  // === –§–∞–∑–∞ 4 ===
  {
    id: 4,
    hoursStart: 12,
    hoursEnd: 16,
    title: "–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∞—Å–æ–≤",
    subtitle: "–ì–ª–∏–∫–æ–≥–µ–Ω–æ–ª–∏–∑ –∏ –ª–∏–ø–æ–ª–∏–∑",
    icon: Flame,
    color: "bg-red-100 text-red-600",
    details: {
      physiology: "–ß–µ—Ä–µ–∑ 12‚Äì16 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –µ–¥—ã –∑–∞–ø–∞—Å—ã –ø–µ—á–µ–Ω–æ—á–Ω–æ–≥–æ –≥–ª–∏–∫–æ–≥–µ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞—Å—Ö–æ–¥—É—é—Ç—Å—è. –£—Ä–æ–≤–µ–Ω—å –∏–Ω—Å—É–ª–∏–Ω–∞ –≤ –∫—Ä–æ–≤–∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–∞–¥–∞—Ç—å –∫ –º–∏–Ω–∏–º—É–º—É, –∞ –≥–ª—é–∫–∞–≥–æ–Ω –ø–æ–≤—ã—à–∞–µ—Ç—Å—è. –ü–µ—á–µ–Ω—å –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∫–ª—é—á–∏–ª–∞—Å—å –Ω–∞ —Ä–∞—Å—â–µ–ø–ª–µ–Ω–∏–µ –≥–ª–∏–∫–æ–≥–µ–Ω–∞ (–≥–ª–∏–∫–æ–≥–µ–Ω–æ–ª–∏–∑) –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —É—Ä–æ–≤–Ω—è –≥–ª—é–∫–æ–∑—ã –≤ –∫—Ä–æ–≤–∏. –£—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –Ω–æ—Ä–º—ã, –Ω–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∂–∞—Ç—å—Å—è –∫ –∫–æ–Ω—Ü—É —ç—Ç–∞–ø–∞. –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–π –ª–∏–ø–æ–ª–∏–∑: –∏–∑ –∂–∏—Ä–æ–≤–æ–π —Ç–∫–∞–Ω–∏ –≤—ã—Å–≤–æ–±–æ–∂–¥–∞—é—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–µ –∂–∏—Ä–Ω—ã–µ –∫–∏—Å–ª–æ—Ç—ã (–°–ñ–ö), –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—á–µ–Ω—å –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –≤ –∫–µ—Ç–æ–Ω–æ–≤—ã–µ —Ç–µ–ª–∞. –£—Ä–æ–≤–µ–Ω—å –±–µ—Ç–∞-–≥–∏–¥—Ä–æ–∫—Å–∏–±—É—Ç–∏—Ä–∞—Ç–∞ –∏ –∞—Ü–µ—Ç–æ–∞—Ü–µ—Ç–∞—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞–º–µ—Ç–Ω—ã–º (–Ω–∞—á–∞–ª—å–Ω—ã–π –∫–µ—Ç–æ–∑). –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –≤—ã—Å–æ–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–æ–Ω–∏ –º–æ–≥—É—Ç –≤ 5‚Äì14 —Ä–∞–∑ –ø—Ä–µ–≤—ã—à–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ —É–∂–µ —á–µ—Ä–µ–∑ —Å—É—Ç–∫–∏ –≥–æ–ª–æ–¥–∞–Ω–∏—è), —Å–ø–æ—Å–æ–±—Å—Ç–≤—É—è –∫–æ–Ω—Å–µ—Ä–≤–∞—Ü–∏–∏ –º—ã—à–µ—á–Ω–æ–π –º–∞—Å—Å—ã –∏ —É—Å–∏–ª–µ–Ω–∏—é –º–æ–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∂–∏—Ä–∞. –ê—É—Ç–æ—Ñ–∞–≥–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –∫–ª–µ—Ç–æ—á–Ω–æ–º —É—Ä–æ–≤–Ω–µ –∏–∑-–∑–∞ –¥–µ—Ñ–∏—Ü–∏—Ç–∞ –≤–Ω–µ—à–Ω–∏—Ö –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã—Ö –≤–µ—â–µ—Å—Ç–≤.",
      sensations: [
        "–ì–æ–ª–æ–¥ –æ—â—É—â–∞–µ—Ç—Å—è —Ä–µ–∂–µ –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω–µ–µ –æ—Å—Ç—Ä—ã–º (–æ—Ä–≥–∞–Ω–∏–∑–º —á–∞—Å—Ç–∏—á–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è)",
        "–ú–æ–∂–µ—Ç —É—Å–∏–ª–∏–≤–∞—Ç—å—Å—è —Å–ª–∞–±–æ—Å—Ç—å, —Å–Ω–∏–∂–µ–Ω–∏–µ –≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç–∏ –ø—Ä–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ",
        "–í–æ–∑–º–æ–∂–Ω–∞ –ª–µ–≥–∫–∞—è –¥—Ä–æ–∂—å –∏–ª–∏ –æ–∑–Ω–æ–±, —Ç–∞–∫ –∫–∞–∫ –æ–±–º–µ–Ω –≤–µ—â–µ—Å—Ç–≤ –∑–∞–º–µ–¥–ª—è–µ—Ç—Å—è",
        "–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è —è—Å–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–ª—É—á—à–∞–µ—Ç—Å—è (—Ç–∏–ø–∞ ¬´–∫–µ—Ç–æ-—ç—Ñ—Ñ–µ–∫—Ç–∞¬ª)"
      ]
    },
    recommendations: [
      "–ü–∏—Ç—å —á–∏—Å—Ç—É—é –≤–æ–¥—É (–ª—É—á—à–µ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥—Å–æ–ª–µ–Ω–Ω–æ–π) –¥–æ 2‚Äì3 –ª –≤ —Å—É—Ç–∫–∏, —á—Ç–æ–±—ã –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç—å –æ–±–µ–∑–≤–æ–∂–∏–≤–∞–Ω–∏–µ.",
      "–õ–µ–≥–∫–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è (–ø—Ä–æ–≥—É–ª–∫–∞, —Ä–∞—Å—Ç—è–∂–∫–∞) –Ω–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω—ã, –Ω–æ –∏–∑–±–µ–≥–∞–π—Ç–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫.",
      "–ú–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–¥—ã—Ö–∞—Ç—å –∏ —Å–ø–∞—Ç—å ‚Äì —ç—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–Ω–∞–±–æ–ª–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —É–º–µ–Ω—å—à–∞–µ—Ç —Å—Ç—Ä–µ—Å—Å."
    ],
    precautions: [
      "–ü—Ä–∏ –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–∏, –æ–±–º–æ—Ä–æ–∫–∞—Ö –∏–ª–∏ –¥—Ä–æ–∂–∏ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç–µ –≥–æ–ª–æ–¥–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–∏—Ç–∞–Ω–∏–µ.",
      "–õ—é–¥—è–º —Å —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç—ã–º–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è–º–∏, —Å–∞—Ö–∞—Ä–Ω—ã–º –¥–∏–∞–±–µ—Ç–æ–º –∏–ª–∏ –Ω–∞ —Ñ–æ–Ω–µ –ø—Ä–∏–µ–º–∞ –ª–µ–∫–∞—Ä—Å—Ç–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ —Å–Ω–∏–∂–∞—é—â–∏—Ö –¥–∞–≤–ª–µ–Ω–∏–µ –∏–ª–∏ —Å–∞—Ö–∞—Ä) —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤—ã—Ö —Ç—Ä–µ–≤–æ–∂–Ω—ã—Ö —Å–∏–º–ø—Ç–æ–º–∞—Ö –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –≤—Ä–∞—á—É."
    ]
  },
  // –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç...
  // === –§–∞–∑–∞ 5 ===
  {
    id: 5,
    hoursStart: 16,
    hoursEnd: 20,
    title: "–ò—Å—Ç–æ—â–µ–Ω–∏–µ –∑–∞–ø–∞—Å–æ–≤ –≥–ª–∏–∫–æ–≥–µ–Ω–∞",
    subtitle: "–ê–∫—Ç–∏–≤–Ω—ã–π –≥–ª–∏–∫–æ–ª–∏–∑",
    icon: Zap,
    color: "bg-purple-100 text-purple-600",
    details: {
      physiology: "–ö –∫–æ–Ω—Ü—É –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è (16‚Äì20 —á) –ø–µ—á–µ–Ω—å –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑—Ä–∞—Å—Ö–æ–¥–æ–≤–∞–ª–∞ —Å–≤–æ–∏ –∑–∞–ø–∞—Å—ã –≥–ª–∏–∫–æ–≥–µ–Ω–∞. –í —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º —ç–Ω–µ—Ä–≥–∏–∏ –¥–ª—è –º–æ–∑–≥–∞ –∏ –¥—Ä—É–≥–∏—Ö –æ—Ä–≥–∞–Ω–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ –≥–ª—é–∫–æ–∑–∞ –∏–∑ –µ–¥—ã (–µ–µ —É–∂–µ –Ω–µ—Ç), –∞ –ø—Ä–æ–¥—É–∫—Ç—ã —Ä–∞—Å–ø–∞–¥–∞ –∂–∏—Ä–∞ –∏ –≥–ª—é–∫–æ–Ω–µ–æ–≥–µ–Ω–µ–∑. –ò–Ω—Å—É–ª–∏–Ω –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –º–∏–Ω–∏–º–∞–ª–µ–Ω, –∞ –≥–ª—é–∫–∞–≥–æ–Ω –∏ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ä–∞—Å–ø–∞–¥ –±–µ–ª–∫–æ–≤ –∏ –∂–∏—Ä–æ–≤. –ü–µ—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç –≥–ª—é–∫–æ–Ω–µ–æ–≥–µ–Ω–µ–∑, —Å–∏–Ω—Ç–µ–∑–∏—Ä—É—è –≥–ª—é–∫–æ–∑—É –∏–∑ –∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç –∏ –≥–ª–∏—Ü–µ—Ä–∏–Ω–∞. –ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –∫–µ—Ç–æ–Ω–æ–≤—ã—Ö —Ç–µ–ª –∑–∞–º–µ—Ç–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è ‚Äì –æ–Ω–∏ —Å–æ—Å—Ç–∞–≤–ª—è—é—Ç –¥–æ ~10‚Äì20 % —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏—Ö –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–µ–π –º–æ–∑–≥–∞. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ, –ø—Ä–æ–¥–æ–ª–∂–∞—è —Å–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ª–∏–ø–æ–ª–∏–∑—É. –ê—É—Ç–æ—Ñ–∞–≥–∏—è —É—Å–∏–ª–∏–≤–∞–µ—Ç—Å—è: –∫–ª–µ—Ç–∫–∏ –Ω–∞—á–∏–Ω–∞—é—Ç ¬´–ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å¬ª —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –±–µ–ª–∫–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –≥–æ–º–µ–æ—Å—Ç–∞–∑–∞.",
      sensations: [
        "–ß–∞—Å—Ç–æ –≥–æ–ª–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å—Ç–∏—Ö–∞–µ—Ç –∏–ª–∏ —Å–º–µ–Ω—è–µ—Ç—Å—è ¬´–æ—Å–æ–±–µ–Ω–Ω—ã–º¬ª —á—É–≤—Å—Ç–≤–æ–º –≤—è–ª–æ—Å—Ç–∏ ‚Äì —Ç–µ–ª–æ —ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã",
        "–°–ª–∞–±–æ—Å—Ç—å –º–æ–∂–µ—Ç —É—Å–∏–ª–∏—Ç—å—Å—è, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ö–æ–¥—å–±–µ –∏–ª–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö",
        "–•–æ–ª–æ–¥ –∏ –∫–æ–∂–Ω–æ–µ ¬´–º—É—Ä–∞—à–∫–∏¬ª ‚Äì –∏–∑-–∑–∞ —Å–Ω–∏–∂–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –≥–ª—é–∫–æ–∑—ã –∏ —Ç–µ–ø–ª–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞",
        "–£–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ, –Ω–æ —á–∞—Å—Ç–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –±–æ–¥—Ä–æ—Å—Ç—å —É–º–∞ ‚Äì —á—É–≤—Å—Ç–≤–æ —è—Å–Ω–æ—Å—Ç–∏ –º—ã—à–ª–µ–Ω–∏—è –∏ –ª–µ–≥–∫–∏–π –ø—Ä–∏–ª–∏–≤ —ç–Ω–µ—Ä–≥–∏–∏"
      ]
    },
    recommendations: [
      "–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø–∏—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ–¥—ã; —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–Ω—ã–µ —Ä–∞—Å—Ç–≤–æ—Ä—ã –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å–æ–ª—å —Å –≤–æ–¥–æ–π.",
      "–û—Ç–¥—ã—Ö–∞–π—Ç–µ –±–æ–ª—å—à–µ, —Å–ø–∏—Ç–µ –Ω–µ –º–µ–Ω–µ–µ 7‚Äì8 —á –Ω–æ—á—å—é; —Å–æ–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–æ–Ω –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ.",
      "–õ–µ–≥–∫–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏ –∏ –¥—ã—Ö–∞—Ç–µ–ª—å–Ω–∞—è –≥–∏–º–Ω–∞—Å—Ç–∏–∫–∞ –ø–æ–ª–µ–∑–Ω—ã, –Ω–æ –∏–∑–±–µ–≥–∞–π—Ç–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–Ω–æ–≥–æ —Å–ø–æ—Ä—Ç–∞."
    ],
    precautions: [
      "–ü—Ä–∏ —Å–∏–ª—å–Ω–æ–π —Å–ª–∞–±–æ—Å—Ç–∏, —Ç–∞—Ö–∏–∫–∞—Ä–¥–∏–∏, —Å–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏ —Å–æ–∑–Ω–∞–Ω–∏—è –∏–ª–∏ —Ç—Ä–µ–º–æ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ –∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∑–∞ –ø–æ–º–æ—â—å—é.",
      "–õ—é–¥–∏ —Å —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–æ–π –≥–∏–ø–æ—Ç–æ–Ω–∏–µ–π (–Ω–∏–∑–∫–∏–º –¥–∞–≤–ª–µ–Ω–∏–µ–º) –∏ —Å–µ—Ä–¥–µ—á–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã: —É –Ω–∏—Ö –º–æ–∂–µ—Ç —É—Ö—É–¥—à–∏—Ç—å—Å—è —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ –∏–∑-–∑–∞ —Ä–µ–∑–∫–æ–≥–æ —Å–Ω–∏–∂–µ–Ω–∏—è —Å–∞—Ö–∞—Ä–∞ –≤ –∫—Ä–æ–≤–∏."
    ]
  },

  // === –§–∞–∑–∞ 6 ===
  {
    id: 6,
    hoursStart: 20,
    hoursEnd: 24,
    title: "–ü–µ—Ä–µ—Ö–æ–¥ –∫ –≥–ª—é–∫–æ–Ω–µ–æ–≥–µ–Ω–µ–∑—É",
    subtitle: "–°—Ç—Ä–µ—Å—Å-–º–µ—Ç–∞–±–æ–ª–∏–∑–º",
    icon: Leaf,
    color: "bg-indigo-100 text-indigo-600",
    details: {
      physiology: "–û–∫–æ–ª–æ 24 —á–∞—Å–æ–≤ –≥–æ–ª–æ–¥–∞–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–º –≤—Å—Ç—É–ø–∞–µ—Ç –≤ —Ä–µ–∂–∏–º ¬´—Å—Ç—Ä–µ—Å—Å-–º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞¬ª. –ì–ª–∏–∫–æ–≥–µ–Ω –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏—Å—á–µ—Ä–ø–∞–Ω, –∏ –¥–æ–º–∏–Ω–∏—Ä—É—é—â–µ–π —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥–ª—é–∫–æ–Ω–µ–æ–≥–µ–Ω–µ–∑ ‚Äì –ø–µ—á–µ–Ω—å –∏ –ø–æ—á–∫–∏ —Å–∏–Ω—Ç–µ–∑–∏—Ä—É—é—Ç –≥–ª—é–∫–æ–∑—É –∏–∑ –Ω–µ—Ñ—Ä—É–∫—Ç–æ–∑–æ—Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö —Å—É–±—Å—Ç—Ä–∞—Ç–æ–≤ (–∞–º–∏–Ω–æ–∫–∏—Å–ª–æ—Ç, –≥–ª–∏—Ü–µ—Ä–∏–Ω–∞, –ª–∞–∫—Ç–∞—Ç–∞). –ò–Ω—Å—É–ª–∏–Ω –¥–æ—Å—Ç–∏–≥ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –≥–ª—é–∫–∞–≥–æ–Ω –∏ –∫–æ—Ä—Ç–∏–∑–æ–ª –ø–æ–≤—ã—à–µ–Ω—ã. –ú–æ–∑–≥ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –≤—Å–µ –±–æ–ª—å—à–µ –Ω–∞ –∫–µ—Ç–æ–Ω–æ–≤—ã–µ —Ç–µ–ª–∞: –∫ —ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ –∏—Ö –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞—Å—Ç–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∑–∞–º–µ—Ç–Ω—É—é —á–∞—Å—Ç—å —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –Ω–µ—Ä–≤–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º, —á—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –º—ã—à—Ü—ã –∏ —Å—Ç–∏–º—É–ª–∏—Ä—É–µ—Ç –º–æ–±–∏–ª–∏–∑–∞—Ü–∏—é –∂–∏—Ä–∞. –ê—É—Ç–æ—Ñ–∞–≥–∏—è —É–∂–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–∫—Ç–∏–≤–Ω–∞ ‚Äì –∫–ª–µ—Ç–∫–∏ —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–ª—è —ç–Ω–µ—Ä–≥–æ—Å–Ω–∞–±–∂–µ–Ω–∏—è.",
      sensations: [
        "–ì–æ–ª–æ–¥ –æ—â—É—â–∞–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–æ–≤—Å–µ (¬´—Ç–µ–ª–æ —É–∂–µ —Å—ç–∫–æ–Ω–æ–º–∏–ª–æ —ç–Ω–µ—Ä–≥–∏—é¬ª)",
        "–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è —è—Å–Ω–æ—Å—Ç—å —á–∞—Å—Ç–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ ‚Äì –º–Ω–æ–≥–∏–µ –æ—Ç–º–µ—á–∞—é—Ç ¬´—á–∏—Å—Ç–æ—Ç—É –º—ã—Å–ª–µ–π¬ª",
        "–°–ª–∞–±–æ—Å—Ç—å –∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å —Å—Ç–æ–π–∫–∏–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤—Å—Ç–∞—Ç—å –∏–ª–∏ –Ω–∞–≥–Ω—É—Ç—å—Å—è",
        "–û—â—É—â–µ–Ω–∏–µ —Ö–æ–ª–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏–ª–∏ —É—Å–∏–ª–∏–≤–∞–µ—Ç—Å—è"
      ]
    },
    recommendations: [
      "–ü–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –≤–æ–¥—ã (–¥–æ 3‚Äì4 –ª/—Å—É—Ç), –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –º–æ—Ä—Å–∫—É—é —Å–æ–ª—å (–¥–æ 1 —á. –ª–æ–∂–∫–∏ –≤ –≤–æ–¥—É –∑–∞ –¥–µ–Ω—å) –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞.",
      "–õ–µ–∂–∞—Ç—å –∏ —Å–ø–∞—Ç—å –Ω—É–∂–Ω–æ –º–Ω–æ–≥–æ ‚Äì –æ—Ä–≥–∞–Ω–∏–∑–º —Å–∏–ª—å–Ω–æ —ç–∫–æ–Ω–æ–º–∏—Ç —ç–Ω–µ—Ä–≥–∏—é; –∏–∑–±–µ–≥–∞–π—Ç–µ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–π —Ç—Ä–∞—Ç—ã –∫–∞–ª–æ—Ä–∏–π.",
      "–õ–µ–≥–∫–∏–µ –∑–∞–Ω—è—Ç–∏—è –π–æ–≥–æ–π –∏–ª–∏ –¥—ã—Ö–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –ø–æ–º–æ–≥—É—Ç –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å —Ç–æ–Ω—É—Å –±–µ–∑ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö —ç–Ω–µ—Ä–≥–æ–∑–∞—Ç—Ä–∞—Ç."
    ],
    precautions: [
      "–ï—Å–ª–∏ –ø–æ—è–≤–∏–ª–æ—Å—å –æ—â—É—â–µ–Ω–∏–µ —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏—è, –±–æ–ª–∏ –≤ –≥—Ä—É–¥–∏, —Å–∏–ª—å–Ω–æ–π –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–ª–∏ —Å–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å —Å–æ–∑–Ω–∞–Ω–∏—è, –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç–µ –≥–æ–ª–æ–¥–∞–Ω–∏–µ.",
      "–ü—Ä–∏ —Ä–µ–∑–∫–æ–º –ø–∞–¥–µ–Ω–∏–∏ –∞—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è (–≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–¥—ä–µ–º–µ) —Ç–∞–∫–∂–µ –ø—Ä–µ—Ä—ã–≤–∞–π—Ç–µ –≥–æ–ª–æ–¥–∞–Ω–∏–µ –∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É."
    ]
  },
  // –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç...
  // === –§–∞–∑–∞ 7 ===
  {
    id: 7,
    hoursStart: 24,
    hoursEnd: 36,
    title: "–ù–∞—á–∞–ª–æ –∫–µ—Ç–æ–∑–∞",
    subtitle: "–≠—Ç–∞–ø —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∫–µ—Ç–æ–∑–∞",
    icon: Trophy,
    color: "bg-teal-100 text-teal-600",
    details: {
      physiology: "–ü–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö —Å—É—Ç–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å—á–µ—Ä–ø–∞–Ω –ø–µ—á–µ–Ω–æ—á–Ω—ã–π –≥–ª–∏–∫–æ–≥–µ–Ω, –∏ –æ—Ä–≥–∞–Ω–∏–∑–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –∂–∏—Ä—ã –∫–∞–∫ –≥–ª–∞–≤–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ —ç–Ω–µ—Ä–≥–∏–∏. –ò–Ω—Å—É–ª–∏–Ω –Ω–∞ –º–∏–Ω–∏–º—É–º–µ, –≥–ª—é–∫–∞–≥–æ–Ω –≤—ã—Å–æ–∫–∏–π ‚Äì –≤–º–µ—Å—Ç–µ —Å —ç–ø–∏–Ω–µ—Ñ—Ä–∏–Ω–æ–º –æ–Ω–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥–ª—é–∫–æ–Ω–µ–æ–≥–µ–Ω–µ–∑ –∏ –ª–∏–ø–æ–ª–∏–∑. –£—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã –≤ –∫—Ä–æ–≤–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏—à—å —á–µ—Ä–µ–∑ –≥–ª—é–∫–æ–Ω–µ–æ–≥–µ–Ω–µ–∑ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —á—É—Ç—å —Å–Ω–∏–∂–∞–µ—Ç—Å—è. –ö–µ—Ç–æ–Ω–æ–≤—ã–µ —Ç–µ–ª–∞ (Œ≤-–≥–∏–¥—Ä–æ–∫—Å–∏–±—É—Ç–∏—Ä–∞—Ç, –∞—Ü–µ—Ç–æ–∞—Ü–µ—Ç–∞—Ç) –±—ã—Å—Ç—Ä–æ –Ω–∞—Ä–∞—Å—Ç–∞—é—Ç: –∫ –∫–æ–Ω—Ü—É —Ñ–∞–∑—ã –æ–Ω–∏ —É–∂–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∑–Ω–∞—á–∏–º—É—é –¥–æ–ª—é —ç–Ω–µ—Ä–≥–∏–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –¥–ª—è –º–æ–∑–≥–∞. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–º (–º–æ–∂–µ—Ç –±—ã—Ç—å –≤ 5‚Äì14 —Ä–∞–∑ –≤—ã—à–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ) ‚Äì —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –º—ã—à–µ—á–Ω—É—é –º–∞—Å—Å—É, —Å—Ç–∏–º—É–ª–∏—Ä—É—è —Ä–∞–∑–ª–æ–∂–µ–Ω–∏–µ –∂–∏—Ä–æ–≤. –ê—É—Ç–æ—Ñ–∞–≥–∏—è –∞–∫—Ç–∏–≤–Ω–æ –∏–¥–µ—Ç: —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ —É–∂–µ –∫ 24‚Äì48 —á–∞—Å–∞–º –≥–æ–ª–æ–¥–∞–Ω–∏—è —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç—Å—è. –ö–ª–µ—Ç–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è –æ—Ç –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö –±–µ–ª–∫–æ–≤ –∏ –æ—Ä–≥–∞–Ω–µ–ª–ª, –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—è —Ä–µ—Å—É—Ä—Å—ã.",
      sensations: [
        "–ì–æ–ª–æ–¥ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–ø–∞–¥–∞–µ—Ç, –æ—Ä–≥–∞–Ω–∏–∑–º –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è –∫ –≥–æ–ª–æ–¥—É –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –∫–µ—Ç–æ–Ω–æ–≤—ã–µ —Ç–µ–ª–∞ ‚Äì –æ–¥–Ω–æ —á—É–≤—Å—Ç–≤–æ –Ω–∞—Å—ã—â–µ–Ω–∏—è –Ω–∞—Å—Ç—É–ø–∞–µ—Ç",
        "–ú–µ–Ω—Ç–∞–ª—å–Ω–∞—è —è—Å–Ω–æ—Å—Ç—å —á–∞—Å—Ç–æ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è, –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—å—Å—è —á—É–≤—Å—Ç–≤–æ –ª—ë–≥–∫–æ–≥–æ ¬´–ø—Ä–∏–ª–∏–≤–∞ —Å–∏–ª¬ª –≤ –≥–æ–ª–æ–≤–µ",
        "–§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–ª–∞–±–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚Äì –º—ã—à—Ü—ã —É—Ç–æ–º–ª—è—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ",
        "–û—â—É—â–µ–Ω–∏–µ —Ö–æ–ª–æ–¥–∞ –∏ –¥–∞–∂–µ –¥—Ä–æ–∂—å ‚Äì –∏–∑-–∑–∞ —Å–Ω–∏–∂–µ–Ω–∏—è —Ç–µ–ø–ª–æ–≤—ã–¥–µ–ª–µ–Ω–∏—è (–∂–∏—Ä–æ–≤–æ–µ –æ–¥–µ—è–ª–æ –ø–æ–∫–∞ —Ç–æ–Ω–∫–æ–µ); –≤–æ–∑–º–æ–∂–Ω—ã –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ–∑–∫–∏—Ö –¥–≤–∏–∂–µ–Ω–∏—è—Ö"
      ]
    },
    recommendations: [
      "–ü–∏—Ç—å –º–Ω–æ–≥–æ —Ç–µ–ø–ª–æ–π –∂–∏–¥–∫–æ—Å—Ç–∏ (–º–æ–∂–Ω–æ —Ç—Ä–∞–≤—è–Ω—ã–µ —á–∞–∏ –±–µ–∑ —Å–∞—Ö–∞—Ä–∞, –±—É–ª—å–æ–Ω).",
      "–í–∫–ª—é—á–∏—Ç—å –≤ —Ä–∞—Ü–∏–æ–Ω –≤–æ–¥—ã –Ω–µ–º–Ω–æ–≥–æ —Å–æ–ª–∏ –ª–∏–±–æ —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–Ω—ã–µ –Ω–∞–ø–∏—Ç–∫–∏ (1‚Äì2 –ª —Ä–∞—Å—Ç–≤–æ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ 1 —á.–ª. —Å–æ–ª–∏ –Ω–∞ –ª–∏—Ç—Ä –≤–æ–¥—ã) –¥–ª—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –º—ã—à–µ—á–Ω—ã—Ö —Å—É–¥–æ—Ä–æ–≥ –∏ –ø–∞–¥–µ–Ω–∏—è –¥–∞–≤–ª–µ–Ω–∏—è.",
      "–ú–æ–∂–Ω–æ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –ª–µ–≥–∫–æ–π –∑–∞—Ä—è–¥–∫–æ–π –∏–ª–∏ –ø—Ä–æ–≥—É–ª–∫–∞–º–∏, –Ω–æ —Å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é ‚Äì –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–±–µ–≥–∞—Ç—å –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏."
    ],
    precautions: [
      "–ü—Ä–∏ —Ç—Ä–µ–º–æ—Ä–µ –∫–æ–Ω–µ—á–Ω–æ—Å—Ç–µ–π, —Å–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏ —Å–æ–∑–Ω–∞–Ω–∏—è –∏–ª–∏ —Å–∏–ª—å–Ω–æ–º —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–∏ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç–µ –≥–æ–ª–æ–¥–∞–Ω–∏–µ.",
      "–õ—é–¥—è–º —Å –±–æ–ª–µ–∑–Ω—è–º–∏ –ø–æ—á–µ–∫, –ø–µ—á–µ–Ω–∏, —Å–µ—Ä–¥–µ—á–Ω–æ-—Å–æ—Å—É–¥–∏—Å—Ç–æ–π —Å–∏—Å—Ç–µ–º—ã –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç—å –∫ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º—É –≥–æ–ª–æ–¥—É ‚Äì –ª—é–±—ã–µ –Ω–µ–ø—Ä–æ—Ö–æ–¥—è—â–∏–µ —Å–∏–º–ø—Ç–æ–º—ã (–±–æ–ª—å –≤ —Å–µ—Ä–¥—Ü–µ, —Å–∏–ª—å–Ω–æ–µ –≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ) ‚Äì –ø—Ä–∏–∑–Ω–∞–∫ –∫ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ."
    ]
  },

  // === –§–∞–∑–∞ 8 ===
  {
    id: 8,
    hoursStart: 36,
    hoursEnd: 48,
    title: "–£–≥–ª—É–±–ª–µ–Ω–Ω—ã–π –∫–µ—Ç–æ–∑ –∏ –∞—É—Ç–æ—Ñ–∞–≥–∏—è",
    subtitle: "–£–≥–ª—É–±–ª–µ–Ω–Ω—ã–π –∫–µ—Ç–æ–∑",
    icon: Shield,
    color: "bg-cyan-100 text-cyan-600",
    details: {
      physiology: "–ù–∞ 2‚Äì3-–π –¥–µ–Ω—å –±–µ–∑ –ø–∏—â–∏ –∫–µ—Ç–æ–Ω–æ–≤—ã–µ —Ç–µ–ª–∞ –¥–æ—Å—Ç–∏–≥–∞—é—Ç –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏ –æ–∫–æ–ª–æ 1‚Äì2 –º–º–æ–ª—å/–ª, —Å—Ç–∞–≤ –æ—Å–Ω–æ–≤–Ω—ã–º —Ç–æ–ø–ª–∏–≤–æ–º –¥–ª—è –º–æ–∑–≥–∞ –∏ —Ç–µ–ª–∞. –ò–Ω—Å—É–ª–∏–Ω –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≥–ª—é–∫–∞–≥–æ–Ω –∏ –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω —Å–∏–ª—å–Ω–æ –ø–æ–≤—ã—à–µ–Ω—ã ‚Äì –æ–Ω–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –≥–ª—é–∫–æ–Ω–µ–æ–≥–µ–Ω–µ–∑–∞ –∏ –º–æ–±–∏–ª–∏–∑–∞—Ü–∏—é –∂–∏—Ä–∞. –£—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –Ω–∏–∑–∫–æ–π –æ—Ç–º–µ—Ç–∫–µ (~3‚Äì4 –º–º–æ–ª—å/–ª), –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –¥–ª—è –∂–∏–∑–Ω–µ–Ω–Ω–æ –≤–∞–∂–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –≤—ã—Å–æ–∫–æ–º —É—Ä–æ–≤–Ω–µ, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –∑–∞—â–∏—Ç—É –º—ã—à—Ü. –ê—É—Ç–æ—Ñ–∞–≥–∏—è —Å–µ–π—á–∞—Å –Ω–∞—Ä–∞—Å—Ç–∞–µ—Ç: –ø–æ –¥–∞–Ω–Ω—ã–º –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π, —É–∂–µ –∫ 36‚Äì48 —á–∞—Å–∞–º –≥–æ–ª–æ–¥–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å —Å–∞–º–æ–æ—á–∏—Å—Ç–∫–∏ –∫–ª–µ—Ç–æ–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–º. –û–±–Ω–æ–≤–ª—è—é—Ç—Å—è –±–µ–ª–∫–∏, —É—Ç–∏–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –º–∏—Ç–æ—Ö–æ–Ω–¥—Ä–∏–∏, —á—Ç–æ —Å–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–∫–∞–Ω–µ–π.",
      sensations: [
        "–ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≥–æ–ª–æ–¥–∞ ‚Äì –º–æ–∂–Ω–æ —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –ª—ë–≥–∫–∏–π –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç –≤ –∂–µ–ª—É–¥–∫–µ, –Ω–æ –Ω–µ –≥–æ–ª–æ–¥",
        "–£—Å–∏–ª–µ–Ω–∏–µ —è—Å–Ω–æ—Å—Ç–∏ —É–º–∞ ‚Äì –º–Ω–æ–≥–∏–µ –æ—Ç–º–µ—á–∞—é—Ç ¬´–ø–æ—Ç–æ–∫ –∏–¥–µ–π¬ª –∏ –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –≤–Ω–∏–º–∞–Ω–∏—è",
        "–í—ã—Ä–∞–∂–µ–Ω–Ω–∞—è —Å–ª–∞–±–æ—Å—Ç—å –≤ —Ç–µ–ª–µ ‚Äì –º—ã—à—Ü—ã –º–æ–≥—É—Ç ¬´–ø–æ–¥–∫–∞—à–∏–≤–∞—Ç—å—Å—è¬ª, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ñ–∏–∑–Ω–∞–≥—Ä—É–∑–∫–µ",
        "–•–æ–ª–æ–¥ –∏ —Å—É—Ö–æ—Å—Ç—å –∫–æ–∂–∏, –Ω–µ–±–æ–ª—å—à–∞—è –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å ‚Äì –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∏—è ¬´–∫–µ—Ç–æ-–≥—Ä–∏–ø–ø–∞¬ª"
      ]
    },
    recommendations: [
      "–ü–∏—Ç—å —Ç–µ–ø–ª—É—é –ø–æ–¥—Å–æ–ª–µ–Ω–Ω—É—é –≤–æ–¥—É (–¥–æ 4 –ª –≤ —Å—É—Ç–∫–∏) –∏ –º–∏–Ω–µ—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —á–∞–∏ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è –∏ —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–æ–≤.",
      "–õ–µ–≥–∫–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ (–π–æ–≥–∞, —Ö–æ–¥—å–±–∞) ‚Äì –ø–æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—é; –æ—Ç–¥—ã—Ö–∞—Ç—å –≤ —Å–ø–æ–∫–æ–π–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ.",
      "–ú–æ–∂–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∫–æ–º–ø–ª–µ–∫—Å –≤–∏—Ç–∞–º–∏–Ω–æ–≤ –∏ –º–∏–Ω–µ—Ä–∞–ª–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ –º–∞–≥–Ω–∏–π, –∫–∞–ª–∏–π), —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–µ—Ñ–∏—Ü–∏—Ç–æ–≤."
    ],
    precautions: [
      "–ü—Ä–∏ —É—á–∞—â–µ–Ω–Ω–æ–º —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–∏, —Å–∏–ª—å–Ω–æ–º –¥—Ä–æ–∂–∞–Ω–∏–∏ –∫–æ–Ω–µ—á–Ω–æ—Å—Ç–µ–π, –ø—É—Ç–∞–Ω–∏—Ü–µ –∏–ª–∏ —Ä–≤–æ—Ç–µ ‚Äì –ø—Ä–µ–∫—Ä–∞—â–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ.",
      "–ï—Å–ª–∏ –ø–æ—è–≤–∏—Ç—Å—è –±–æ–ª—å –≤ –≥—Ä—É–¥–∏ –∏–ª–∏ –æ–¥—ã—à–∫–∞ ‚Äì –≤—ã–∑—ã–≤–∞—Ç—å –ø–æ–º–æ—â—å. –õ—é–¥—è–º —Å —Ä–∞–Ω–µ–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–º–∏ –∫–∞—Ä–¥–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏ –∫ —ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–∏ —Å–ª–µ–¥—É–µ—Ç –±—ã—Ç—å –æ—Å–æ–±–µ–Ω–Ω–æ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–º–∏."
    ]
  },
  // –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç...
  // === –§–∞–∑–∞ 9 ===
  {
    id: 9,
    hoursStart: 48,
    hoursEnd: 60,
    title: "–ü–∏–∫ –∫–µ—Ç–æ–∑–∞",
    subtitle: "–ü–∏–∫ –∫–µ—Ç–æ–∑–Ω–æ–≥–æ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞",
    icon: Sparkles,
    color: "bg-fuchsia-100 text-fuchsia-600",
    details: {
      physiology: "–ù–∞ 3-–π –¥–µ–Ω—å —É—Ä–æ–≤–µ–Ω—å –∫–µ—Ç–æ–Ω–æ–≤—ã—Ö —Ç–µ–ª –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞—Å—Ç–∏ (–º–æ–∂–µ—Ç –¥–æ—Å—Ç–∏–≥–∞—Ç—å 2‚Äì3 –º–º–æ–ª—å/–ª). –ò–Ω—Å—É–ª–∏–Ω –æ—Å—Ç–∞–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º, –≥–ª—é–∫–∞–≥–æ–Ω –∏ –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ç—Ä–∏–Ω—Å—É–ª—è—Ä–Ω—ã–µ –≥–æ—Ä–º–æ–Ω—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞. –ì–ª—é–∫–æ–∑–∞ –¥–µ—Ä–∂–∏—Ç—Å—è –Ω–∞ –æ—á–µ–Ω—å –Ω–∏–∑–∫–æ–º —É—Ä–æ–≤–Ω–µ (–æ–∫–æ–ª–æ 3 –º–º–æ–ª—å/–ª) ‚Äì –µ—ë —Ö–≤–∞—Ç–∞–µ—Ç –ª–∏—à—å –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ –Ω—É–∂–¥—ã –∫–ª–µ—Ç–æ–∫. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –æ—Ä–≥–∞–Ω–æ–≤ –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ –∂–∏—Ä—ã –∏ –∫–µ—Ç–æ–Ω—ã –∫–∞–∫ —Ç–æ–ø–ª–∏–≤–æ. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Å–Ω–∏–∂–∞—Ç—å—Å—è —Å –ø–∏–∫–∞, –Ω–æ –≤—Å—ë –µ—â–µ –æ—Å—Ç–∞–µ—Ç—Å—è –ø–æ–≤—ã—à–µ–Ω–Ω—ã–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –Ω–æ—Ä–º—ã. –ê—É—Ç–æ—Ñ–∞–≥–∏—è –∏–¥—ë—Ç –ø–æ–ª–Ω—ã–º —Ö–æ–¥–æ–º: —ç—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∫–ª–µ—Ç–æ—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–Ω–∞ –∂–∏–≤–æ—Ç–Ω—ã—Ö –º–æ–¥–µ–ª—è—Ö –ø–æ–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –ø–æ—Å–ª–µ 48 —á –≥–æ–ª–æ–¥–∞–Ω–∏—è –∞—É—Ç–æ—Ñ–∞–≥–∏—è –≤—Å–µ –µ—â–µ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∞). –û–±–º–µ–Ω –≤–µ—â–µ—Å—Ç–≤ ¬´–∑–∞—Ç–æ—Ä–º–æ–∂–µ–Ω¬ª: –ø–µ—á–µ–Ω—å, –ø–æ—á–∫–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —ç–∫–æ–Ω–æ–º—è—Ç —Ä–µ—Å—É—Ä—Å—ã.",
      sensations: [
        "–•–æ—Ä–æ—à–∞—è –º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å ‚Äì –º–Ω–æ–≥–∏–µ –æ—Ç–º–µ—á–∞—é—Ç –æ—Å—Ç—Ä–æ–µ –º—ã—à–ª–µ–Ω–∏–µ –∏ –¥–∞–∂–µ —ç–π—Ñ–æ—Ä–∏—é",
        "–°–ª–∞–±–æ—Å—Ç—å –∏ —É—Å—Ç–∞–ª–æ—Å—Ç—å –Ω–∞—Ä–∞—Å—Ç–∞–µ—Ç ‚Äì –æ—Å–æ–±–µ–Ω–Ω–æ –∑–∞–º–µ—Ç–Ω–æ –ø—Ä–∏ –º–∞–ª–µ–π—à–µ–π —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
        "–•–æ–ª–æ–¥ –∏ —á—É–≤—Å—Ç–≤–æ –æ–Ω–µ–º–µ–Ω–∏—è –≤ –Ω–æ–≥–∞—Ö ‚Äì –∏–∑-–∑–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –º—ã—à—Ü –∏ —Å–Ω–∏–∂–µ–Ω–∏—è –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è",
        "–°—É—Ö–æ—Å—Ç—å –≤–æ —Ä—Ç—É, –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–π –∑–∞–ø–∞—Ö –∏–∑–æ —Ä—Ç–∞ (–∞—Ü–µ—Ç–æ–Ω–æ–≤—ã–π –∑–∞–ø–∞—Ö) ‚Äì –ø—Ä–∏–∑–Ω–∞–∫ —É—Å–∏–ª–µ–Ω–Ω–æ–≥–æ –∫–µ—Ç–æ–∑–∞"
      ]
    },
    recommendations: [
      "–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–µ–∂–∏–º –≥–∏–¥—Ä–∞—Ç–∞—Ü–∏–∏: 3‚Äì4 –ª –≤–æ–¥—ã/—Ä–∞—Å—Ç–≤–æ—Ä–æ–≤ –≤ —Å—É—Ç–∫–∏.",
      "–°–ø–∞—Ç—å –≤ –ø—Ä–æ–≤–µ—Ç—Ä–µ–Ω–Ω–æ–π –ø—Ä–æ—Ö–ª–∞–¥–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ, –¥–∞–≤–∞—Ç—å —Ç–µ–ª—É –æ—Ç–¥—ã—Ö.",
      "–ù–µ–º–Ω–æ–≥–æ –¥–≤–∏–≥–∞—Ç—å—Å—è (—É—Ç—Ä–µ–Ω–Ω—è—è –∑–∞—Ä—è–¥–∫–∞, —Ö–æ–¥—å–±–∞), —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫—Ä–æ–≤–æ—Ç–æ–∫."
    ],
    precautions: [
      "–ü—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º (—Å–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å —Å–æ–∑–Ω–∞–Ω–∏—è), —á—É–≤—Å—Ç–≤–µ –ø–∞–Ω–∏–∫–∏ –∏–ª–∏ —Å–∏–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ–¥–∞ ‚Äì –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ.",
      "–õ—é–¥—è–º —Å—Ç–∞—Ä—à–µ 65 –ª–µ—Ç –∏ —Å —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–º–∏ –±–æ–ª–µ–∑–Ω—è–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ü–µ–Ω–∏—Ç—å —Ä–∏—Å–∫–∏; –≤–Ω–µ–∑–∞–ø–Ω–æ–µ —É—Ö—É–¥—à–µ–Ω–∏–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è –¥–æ–ª–∂–Ω–æ –ø–æ—Å–ª—É–∂–∏—Ç—å –æ—Å–Ω–æ–≤–∞–Ω–∏–µ–º –¥–ª—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è."
    ]
  },

  // === –§–∞–∑–∞ 10 ===
  {
    id: 10,
    hoursStart: 60,
    hoursEnd: 72,
    title: "–ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º—É –≥–æ–ª–æ–¥–∞–Ω–∏—é",
    subtitle: "–°—Ç–∞–¥–∏—è –≥–ª—É–±–æ–∫–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏",
    icon: Droplets,
    color: "bg-pink-100 text-pink-600",
    details: {
      physiology: "–ö –Ω–∞—á–∞–ª—É —Ç—Ä–µ—Ç—å–∏—Ö —Å—É—Ç–æ–∫ –º–µ—Ç–∞–±–æ–ª–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É—é—Ç—Å—è. –ö–µ—Ç–æ–Ω—ã –∏ –°–ñ–ö –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–º–∏–Ω–∏—Ä—É—é—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ —ç–Ω–µ—Ä–≥–∏–∏. –ì–ª—é–∫–æ–∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∑–∞ —Å—á–µ—Ç –≥–ª—é–∫–æ–Ω–µ–æ–≥–µ–Ω–µ–∑–∞ –∏–∑ –±–µ–ª–∫–æ–≤ –∏ –≥–ª–∏—Ü–µ—Ä–∏–Ω–∞ (—É—Ä–æ–≤–µ–Ω—å –æ–∫–æ–ª–æ 2‚Äì3 –º–º–æ–ª—å/–ª). –ò–Ω—Å—É–ª–∏–Ω —á—É—Ç—å –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è (–Ω–æ –æ—Å—Ç–∞–µ—Ç—Å—è –∫—Ä–∞–π–Ω–µ –Ω–∏–∑–∫–∏–º), –≥–ª—é–∫–∞–≥–æ–Ω –≤—ã—Å–æ–∫. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –ø–∞–¥–∞–µ—Ç –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø–∏–∫–æ–º, –Ω–æ –≤—Å–µ –µ—â–µ –≤—ã—à–µ –Ω–æ—Ä–º—ã ‚Äì —ç—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ä–≥–∞–Ω—ã. –ê—É—Ç–æ—Ñ–∞–≥–∏—è –∞–∫—Ç–∏–≤–Ω–æ –∏–¥–µ—Ç ‚Äì –∫–ª–µ—Ç–∫–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –æ—á–∏—â–µ–Ω—ã –æ—Ç ¬´–º—É—Å–æ—Ä–∞¬ª. –ú–µ—Ç–∞–±–æ–ª–∏–∑–º –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è (–º–µ–Ω—å—à–µ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ —Ç–µ–ª–∞). –í –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö –ø–æ–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –Ω–∞ 3-4 —Å—É—Ç–∫–∏ –≤—ã—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∞–Ω—Ç–∏—Å—Ç—Ä–µ—Å—Å–æ–≤—ã–π –±–µ–ª–æ–∫ FGF21, —É—Å–∏–ª–∏–≤–∞—é—â–∏–π –∫–µ—Ç–æ–∑.",
      sensations: [
        "–£—Å—Ç–∞–ª–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–æ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π ‚Äì —á–µ—Ä–µ–∑ 60+ —á –æ–Ω–∞ –ø–ª–∞–≤–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ ¬´—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ¬ª —Å–æ—Å—Ç–æ—è–Ω–∏–µ",
        "–Ø—Å–Ω–æ—Å—Ç—å —É–º–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–∞ —Ö–æ—Ä–æ—à–µ–º —É—Ä–æ–≤–Ω–µ, –º–Ω–æ–≥–∏–µ –∑–∞–º–µ—á–∞—é—Ç —á—É–≤—Å—Ç–≤–æ –∫–æ–Ω—Ç—Ä–æ–ª—è –∏ –ø–æ–∫–æ—è",
        "–ì–æ–ª–æ–¥ –∫–∞–∫ —Ç–∞–∫–æ–≤–æ–π –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç; –≤–æ–∑–º–æ–∂–Ω—ã –ª–∏—à—å –ª–µ–≥–∫–∏–µ –ø—Ä–∏—Å—Ç—É–ø—ã –∞–ø–ø–µ—Ç–∏—Ç–∞ –∫–∞–∫ —Ä–µ—Ñ–ª–µ–∫—Å –æ—Ä–≥–∞–Ω–∏–∑–º–∞",
        "–í–æ–∑–º–æ–∂–Ω—ã —Ä–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–ø–∞–¥—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è ‚Äì –∏–∑-–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞"
      ]
    },
    recommendations: [
      "–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø–∏—Ç—å –≤–æ–¥—É —Å —Å–æ–ª—å—é, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç—Ä–∞–≤—è–Ω–æ–π –Ω–∞—Å—Ç–æ–π –º—è—Ç—ã –∏–ª–∏ —Ä–æ–º–∞—à–∫–∏ –¥–ª—è —É—Å–ø–æ–∫–æ–µ–Ω–∏—è.",
      "–õ–µ–≥–∫–∏–µ —É—Ç—Ä–µ–Ω–Ω–∏–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è (—Ä–∞—Å—Ç—è–∂–∫–∞, –¥—ã—Ö–∞–Ω–∏–µ) –ø–æ–¥–¥–µ—Ä–∂–∞—Ç —Ç–æ–Ω—É—Å –±–µ–∑ –ª–∏—à–Ω–µ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞ —ç–Ω–µ—Ä–≥–∏–∏.",
      "–ü—Ä–æ–≤–æ–¥–∏—Ç–µ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ –ø–æ–ª–æ–∂–µ–Ω–∏–∏ –ª—ë–∂–∞ –∏ —Å–∏–¥—è (—Ç–µ–ª—É –Ω–µ –Ω–∞–¥–æ —Ç—Ä–∞—Ç–∏—Ç—å –Ω–∞ —Å—Ç–æ—è–Ω–∏–µ –ª–∏—à–Ω—é—é —ç–Ω–µ—Ä–≥–∏—é)."
    ],
    precautions: [
      "–ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –∑–∞–ø–æ—Ä–∞, –≥–æ–ª–æ–≤–Ω–æ–π –±–æ–ª–∏ –∏–ª–∏ —Ä–µ–∑–∫–æ–º –ø–∞–¥–µ–Ω–∏–∏ –∞—Ä—Ç–µ—Ä–∏–∞–ª—å–Ω–æ–≥–æ –¥–∞–≤–ª–µ–Ω–∏—è ‚Äì –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –≤–æ–∑–º–æ–∂–Ω–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ—Ä–≤–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ.",
      "–ü–∞—Ü–∏–µ–Ω—Ç–∞–º —Å –¥–∏–∞–±–µ—Ç–æ–º II —Ç–∏–ø–∞ –Ω—É–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å –≥–ª—é–∫–æ–∑—ã (–Ω–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –æ–ø–∞—Å–Ω—ã)."
    ]
  },
  // –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç...
  // === –§–∞–∑–∞ 11 ===
  {
    id: 11,
    hoursStart: 72,
    hoursEnd: 84,
    title: "–°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –≥–æ–ª–æ–¥–∞–Ω–∏–∏",
    subtitle: "–£—Å—Ç–æ–π—á–∏–≤–∞—è —Ñ–∞–∑–∞ –∫–µ—Ç–æ–∑–∞",
    icon: Sun,
    color: "bg-amber-100 text-amber-600",
    details: {
      physiology: "–ù–∞ 4-–µ —Å—É—Ç–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–º –ø–æ–ª–Ω–æ—Å—Ç—å—é ¬´–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω¬ª –Ω–∞ –∂–∏—Ä–æ–≤—ã–µ –∑–∞–ø–∞—Å—ã. –ö–µ—Ç–æ–Ω—ã –¥–æ—Å—Ç–∏–≥–∞—é—Ç 3‚Äì5 –º–º–æ–ª—å/–ª (–ø–æ—Ä—è–¥–∫–∞ —É—Ä–æ–≤–Ω—è –ø—Ä–∏ –∫–µ—Ç–æ-–¥–∏–µ—Ç–µ), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è 60‚Äì70% —ç–Ω–µ—Ä–≥–∏–∏ –º–æ–∑–≥–∞. –ì–ª—é–∫–æ–∑–∞ –¥–µ—Ä–∂–∏—Ç—Å—è –Ω–∏–∑–∫–æ (1,5‚Äì2,5 –º–º–æ–ª—å/–ª) ‚Äì —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–ª–µ—Ç–æ–∫, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–µ—Ç–æ–Ω—ã. –û—Ä–≥–∞–Ω–∏–∑–º —É–º–µ–Ω—å—à–∏–ª –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –≤ –≥–ª—é–∫–æ–∑–µ, —Ç–∞–∫ –∫–∞–∫ –º–Ω–æ–≥–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã —É–∂–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –∂–∏—Ä–∞—Ö. –ò–Ω—Å—É–ª–∏–Ω –Ω–∞ –º–∏–Ω–∏–º—É–º–µ, –≥–ª—é–∫–∞–≥–æ–Ω/–∫–æ—Ä—Ç–∏–∑–æ–ª –ø–æ–≤—ã—à–µ–Ω—ã, —á—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –∫ –±–∞–∑–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º. –ê—É—Ç–æ—Ñ–∞–≥–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å ‚Äì —Å–∞–º–æ–µ –∞–∫—Ç–∏–≤–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è ¬´–¥–µ—Ç–æ–∫—Å–∏–∫–∞—Ü–∏–∏¬ª –∫–ª–µ—Ç–æ–∫. –ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –∏–¥—ë—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤ –∞—É—Ç–æ—Ñ–∞–≥–∏–∏ —É –∂–∏–≤–æ—Ç–Ω—ã—Ö.",
      sensations: [
        "–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è ‚Äì —Ä–µ–∑–∫–∏–µ –ø–µ—Ä–µ–ø–∞–¥—ã –º–µ–Ω—å—à–µ",
        "–£–º–µ—Ä–µ–Ω–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è ‚Äì –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ–±—â–∏–π —É–ø–∞–¥–æ–∫ —Å–∏–ª, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ª–µ–≥–∫–∏–π —Ä–µ—Å—É—Ä—Å –¥–ª—è –ª—é–±–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
        "–ü—Ä–æ–ø–∞–¥–∞–µ—Ç –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç –æ—Ç –≥–æ–ª–æ–¥–∞ ‚Äì —Ç–µ–ª–æ –æ—Å–≤–æ–∏–ª–æ—Å—å –±–µ–∑ –µ–¥—ã",
        "–ß–∞—Å—Ç–æ –æ—Ç–º–µ—á–∞–µ—Ç—Å—è –ª–µ–≥–∫–æ–µ —á—É–≤—Å—Ç–≤–æ ¬´–±–æ–¥—Ä—Å—Ç–≤–æ–≤–∞–Ω–∏—è¬ª –ø—Ä–∏ –º–∏–Ω–∏–º—É–º–µ —Å–Ω–∞"
      ]
    },
    recommendations: [
      "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –≤–æ–¥–Ω–æ-—Å–æ–ª–µ–≤–æ–π –±–∞–ª–∞–Ω—Å (3‚Äì4 –ª –∂–∏–¥–∫–æ—Å—Ç–∏ —Å —Å–æ–ª—å—é), –º–æ–∂–Ω–æ –ø–∏—Ç—å –º–∏–Ω–µ—Ä–∞–ª–∫—É.",
      "–ü—Ä–æ–¥–æ–ª–∂–∞—Ç—å –¥–Ω–µ–≤–Ω–æ–π —Ä–∞—Å–ø–æ—Ä—è–¥–æ–∫ –≤ —â–∞–¥—è—â–µ–º —Ä–µ–∂–∏–º–µ: –ø—Ä–∏–µ–º—ã —Å–∏–¥—è—á–µ–π —Ä–∞–±–æ—Ç—ã –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –æ—Ç–¥—ã—Ö.",
      "–ü—Ä–∏ —Å–∏–ª—å–Ω–æ–º —Å–Ω–µ –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å –¥–Ω–µ–≤–Ω–æ–π –æ—Ç–¥—ã—Ö –≤ —Ç–µ–º–Ω–æ–º —Ç–∏—Ö–æ–º –ø–æ–º–µ—â–µ–Ω–∏–∏."
    ],
    precautions: [
      "–ü—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Å—É–¥–æ—Ä–æ–≥ –≤ –Ω–æ–≥–∞—Ö, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–ª–∞–±–æ—Å—Ç–∏ –∏–ª–∏ —Å–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç–∏ ‚Äì –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ—Ä–≤–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ.",
      "–ï—Å–ª–∏ —É —á–µ–ª–æ–≤–µ–∫–∞ –±—ã–ª–∏ —Å–µ—Ä–¥–µ—á–Ω—ã–µ –∏–ª–∏ —Å–æ—Å—É–¥–∏—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–æ–≤ –∏–ª–∏ —Å–Ω–∏–∂–µ–Ω–∏–µ –æ–±—ä–µ–º–∞ –∫—Ä–æ–≤–∏ –º–æ–≥—É—Ç –≤—ã–∑–≤–∞—Ç—å —Å–µ—Ä—å—ë–∑–Ω—ã–µ –æ—Å–ª–æ–∂–Ω–µ–Ω–∏—è."
    ]
  },

  // === –§–∞–∑–∞ 12 ===
  {
    id: 12,
    hoursStart: 84,
    hoursEnd: 96,
    title: "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è (–ø–æ—Å—Ç—Å–µ–¥–∏–Ω–≥)",
    subtitle: "–ì–ª—É–±–æ–∫–∏–π –∞–¥–∞–ø—Ç–∞—Ü–∏–æ–Ω–Ω—ã–π —ç—Ç–∞–ø",
    icon: Brain,
    color: "bg-lime-100 text-lime-600",
    details: {
      physiology: "–ù–∞ –≥—Ä–∞–Ω–∏ 4‚Äì5 —Å—É—Ç–æ–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–ª–Ω–∞—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –æ–±–º–µ–Ω–∞ –≤–µ—â–µ—Å—Ç–≤ –Ω–∞ ¬´—ç–∫–æ–Ω–æ–º–∏—á–Ω–æ–º¬ª —É—Ä–æ–≤–Ω–µ. –ì–ª—é–∫–æ–∑–∞ –≤ –∫—Ä–æ–≤–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∫—Ä–∞–π–Ω–µ –Ω–∏–∑–∫–æ–π (1‚Äì2 –º–º–æ–ª—å/–ª), –∫–µ—Ç–æ–Ω—ã –≤—ã—Å–æ–∫–∏ (4‚Äì6 –º–º–æ–ª—å/–ª). –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–∫–∞–Ω–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—à–ª–∏ –Ω–∞ Œ≤-–æ–∫–∏—Å–ª–µ–Ω–∏–µ –∂–∏—Ä–Ω—ã—Ö –∫–∏—Å–ª–æ—Ç. –ò–Ω—Å—É–ª–∏–Ω –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –≥–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –¥–æ—Å—Ç–∏–≥ –ø–ª–∞—Ç–æ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–Ω–∏–∂–∞—Ç—å—Å—è –∫ —É—Ä–æ–≤–Ω—é –¥–æ—Ñ–∞—Å—Ç–∏–Ω–≥–∞. –ê—É—Ç–æ—Ñ–∞–≥–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–∞–∑–≤–∏—Ç–∞ ‚Äì –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≥–ª—É–±–æ–∫–∞—è –∫–ª–µ—Ç–æ—á–Ω–∞—è ¬´–æ—á–∏—Å—Ç–∫–∞¬ª. –°—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ä–≥–∞–Ω–æ–≤ –ø–æ–ª—É—á–∞—é—Ç –Ω–∞–∏–±–æ–ª–µ–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ. –ù–∞ –∫–ª–µ—Ç–æ—á–Ω–æ–º —É—Ä–æ–≤–Ω–µ –≤ —ç—Ç–æ –≤—Ä–µ–º—è —Å–Ω–∏–∂–∞—é—Ç—Å—è –º–∞—Ä–∫–µ—Ä—ã –≤–æ—Å–ø–∞–ª–µ–Ω–∏—è –∏ –æ–∫–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å—Ç—Ä–µ—Å—Å–∞.",
      sensations: [
        "–°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ ‚Äì —Ä–µ–∑–∫–∏–µ –ø—Ä–∏—Å—Ç—É–ø—ã –≥–æ–ª–æ–¥–∞/—Å–ª–∞–±–æ—Å—Ç–∏ —Ä–µ–¥–∫–æ —Å–ª—É—á–∞—é—Ç—Å—è",
        "–Ø—Å–Ω–æ—Å—Ç—å —É–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –∏–Ω–æ–≥–¥–∞ —á–µ–ª–æ–≤–µ–∫ –æ—â—É—â–∞–µ—Ç —Å–µ–±—è ¬´–≤–æ–æ–¥—É—à–µ–≤–ª–µ–Ω–Ω—ã–º¬ª –Ω–æ –±–µ–∑ –ø—Ä–∏–≤—ã—á–Ω–æ–π —ç–Ω–µ—Ä–≥–∏–∏",
        "–§–∏–∑–∏—á–µ—Å–∫–∞—è —Ö—Ä–æ–º–æ—Ç–∞ ‚Äì –ª—é–±–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –¥–∞—ë—Ç—Å—è —Ç—è–∂–µ–ª–æ (–≤–µ—Å —Ç–µ–ª–∞ –æ—â—É—â–∞–µ—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ)",
        "–í–æ–∑–º–æ–∂–Ω—ã –ø—Å–∏—Ö–æ—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Ç—Ä–µ–≤–æ–≥–∞, —Ä–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å) –∏–∑-–∑–∞ –¥–µ—Ñ–∏—Ü–∏—Ç–∞ –ø—Ä–∏–≤—ã—á–Ω—ã—Ö –∫–∞–ª–æ—Ä–∏–π –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω–∞"
      ]
    },
    recommendations: [
      "–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —â–∞–¥—è—â–∏–π —Ä–µ–∂–∏–º: –±–æ–ª—å—à–µ —Å–ø–∏—Ç–µ –∏ –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏.",
      "–ü—Ä–∏–µ–º —Ç—Ä–∞–≤—è–Ω–æ–≥–æ —á–∞—è —Å –º–µ–¥–æ–º –∏–ª–∏ –ø–æ–¥—Å–ª–∞—â–µ–Ω–Ω–æ–π –ª–∏–º–æ–Ω–Ω–æ–π –≤–æ–¥–æ–π –º–æ–∂–µ—Ç –æ–±–ª–µ–≥—á–∏—Ç—å –æ–±—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–æ –µ–¥–∞ –≤—Å–µ –µ—â–µ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è).",
      "–ù–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ –º–æ—á–æ–π: –≤—ã–¥–µ–ª—è–µ–º—ã–µ –∫–µ—Ç–æ–Ω—ã —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –≥–ª—É–±–∏–Ω—É –∫–µ—Ç–æ–∑–∞."
    ],
    precautions: [
      "–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Å–µ—Ä–¥—Ü–µ–±–∏–µ–Ω–∏–µ, –ø–æ–¥—ä–µ–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏–ª–∏ —Å–∏–ª—å–Ω–∞—è —Å–ª–∞–±–æ—Å—Ç—å, —Å–ª–µ–¥—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ.",
      "–ü–∞—Ü–∏–µ–Ω—Ç–∞–º —Å —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–º–∏ –±–æ–ª–µ–∑–Ω—è–º–∏ –ø–µ—Ä–µ–¥ –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏–µ–º 5-–≥–æ –¥–Ω—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Å—Ç–∏ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ (–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —ç–ª–µ–∫—Ç—Ä–æ–ª–∏—Ç–æ–≤, –≠–ö–ì)."
    ]
  },
  // –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å–ª–µ–¥—É–µ—Ç...
  // === –§–∞–∑–∞ 13 ===
  {
    id: 13,
    hoursStart: 96,
    hoursEnd: 120,
    title: "–°—Ç–∞–±–∏–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ—Å—Ç–∞–¥–∞–ø—Ç–∞—Ü–∏—è",
    subtitle: "–≠—Ç–∞–ø —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–æ–≥–æ –≥–æ–ª–æ–¥–∞",
    icon: Moon,
    color: "bg-slate-100 text-slate-600",
    details: {
      physiology: "–ù–∞ 5‚Äì6 —Å—É—Ç–∫–∏ –æ–±–º–µ–Ω –≤–µ—â–µ—Å—Ç–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ ¬´–∞–≤—Ç–æ–ø–∏–ª–æ—Ç–µ¬ª. –ö–µ—Ç–æ–Ω–æ–≤—ã–µ —Ç–µ–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ ~5‚Äì7 –º–º–æ–ª—å/–ª. –ì–ª—é–∫–æ–∑–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞ (1‚Äì2 –º–º–æ–ª—å/–ª), –∏–Ω—Å—É–ª–∏–Ω ‚Äì –ø–æ—á—Ç–∏ –Ω–æ–ª—å. –û—Ä–≥–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—á—Ç–∏ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –Ω–∞ –∂–∏—Ä–æ–≤–æ–º —Ç–æ–ø–ª–∏–≤–µ. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –∏—Å—Ö–æ–¥–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏—è–º (—ç—Ñ—Ñ–µ–∫—Ç –ø–∏–∫–∞ —Å–Ω–∏–∂–∞–µ—Ç—Å—è). –ê—É—Ç–æ—Ñ–∞–≥–∏—è –≤ –∑–∞–≤–µ—Ä—à–∞—é—â–µ–π —Ñ–∞–∑–µ ‚Äì –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ ¬´–º—É—Å–æ—Ä–∞¬ª —É–∂–µ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–æ. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Å–Ω–∏–∂–∞–µ—Ç—Å—è –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∫–æ—Ä—Ç–∏–∑–æ–ª–∞, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –¥–∏—Å—Ç—Ä–µ—Å—Å–∞. –ú–µ—Ç–∞–±–æ–ª–∏–∑–º –ø–æ–Ω–∏–∂–µ–Ω: —Ç–µ–ª–æ —ç–∫–æ–Ω–æ–º–∏—Ç —ç–Ω–µ—Ä–≥–∏—é, –≤–æ–∑–º–æ–∂–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –±–∞–∑–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞ (BMR).",
      sensations: [
        "–£–º–µ—Ä–µ–Ω–Ω–∞—è –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å ‚Äì —á–µ–ª–æ–≤–µ–∫ –º–æ–∂–µ—Ç –≤–µ—Å—Ç–∏ –ø—Ä–∏–≤—ã—á–Ω—ã–µ –±–µ—Å—Å—Ç—Ä–µ—Å—Å–æ–≤—ã–µ –¥–µ–ª–∞, –Ω–æ —ç–Ω–µ—Ä–≥–æ–∑–∞—Ç—Ä–∞—Ç—ã –æ—â—É—â–∞—é—Ç—Å—è —Å–∏–ª—å–Ω–µ–µ",
        "–ò–Ω–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ª–µ–≥–∫–æ–µ —á—É–≤—Å—Ç–≤–æ –≥–æ–ª–æ–¥–∞ (—á–∞—Å—Ç–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞) ‚Äì –º–æ–∑–≥ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–æ—Å—ã–ø–∞—Ç—å—Å—è –æ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ–π –¥–∏–µ—Ç—ã",
        "–ß—É–≤—Å—Ç–≤–æ –ª–µ–≥–∫–æ–π –∞–ø–∞—Ç–∏–∏ –∏–ª–∏ —Å–æ–Ω–ª–∏–≤–æ—Å—Ç–∏ ‚Äì –∏–∑-–∑–∞ –æ–±—â–µ–≥–æ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ—Ñ–∏—Ü–∏—Ç–∞",
        "–ü–æ—Ç–ª–∏–≤–æ—Å—Ç—å –∏–ª–∏ –æ–∑–Ω–æ–± –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤–æ–∑–º–æ–∂–Ω—ã –∏–∑-–∑–∞ —Å–Ω–∏–∂–µ–Ω–Ω–æ–≥–æ —Å–∏–Ω—Ç–µ–∑–∞ —Ç–µ–ø–ª–∞"
      ]
    },
    recommendations: [
      "–ü–∏—Ç—å –≤–æ–¥—É —Å —Å–æ–ª—å—é, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —è–±–ª–æ—á–Ω—ã–π —É–∫—Å—É—Å (1 —Å—Ç. –ª. –Ω–∞ —Å—Ç–∞–∫–∞–Ω –≤–æ–¥—ã) –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ñ–ö–¢ –∏ –ö–©–°.",
      "–í–∫–ª—é—á–∏—Ç—å –≤ –≥—Ä–∞—Ñ–∏–∫ –∫–æ—Ä–æ—Ç–∫–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≥—É–ª–∫–∏ (5‚Äì10 –º–∏–Ω—É—Ç –∫–∞–∂–¥—ã–π —á–∞—Å) –¥–ª—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∑–∞—Å—Ç–æ–π–Ω—ã—Ö —è–≤–ª–µ–Ω–∏–π.",
      "–ì–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –≤—ã—Ö–æ–¥—É –∏–∑ –≥–æ–ª–æ–¥–∞–Ω–∏—è: –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –ø–æ—Å–ª–µ 7-–≥–æ –¥–Ω—è."
    ],
    precautions: [
      "–ü—Ä–∏ —Ç—Ä–µ–º–æ—Ä–µ, —Å–ª–∞–±–æ—Å—Ç–∏ –∫–æ–Ω–µ—á–Ω–æ—Å—Ç–µ–π, –æ–±–º–æ—Ä–æ–∫–∞—Ö ‚Äì –ø—Ä–µ–∫—Ä–∞—â–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ.",
      "–ï—Å–ª–∏ –ø–æ—Å–ª–µ 5 –¥–Ω–µ–π –ø—Ä–æ—è–≤–∏–ª–∏—Å—å –ª—é–±—ã–µ –ø–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–∏–º–ø—Ç–æ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–∂–Ω—ã–π –∑—É–¥, –≤—ã–ø–∞–¥–µ–Ω–∏–µ –≤–æ–ª–æ—Å, —á–∞—Å—Ç–∞—è –∞—Ä–∏—Ç–º–∏—è), —Å–ª–µ–¥—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ."
    ]
  },

  // === –§–∞–∑–∞ 14 ===
  {
    id: 14,
    hoursStart: 120,
    hoursEnd: 144,
    title: "–ü—Ä–µ–¥–µ–ª—å–Ω–∞—è —Ñ–∞–∑–∞ –Ω–∏–∑–∫–æ–≥–æ –≥–ª–∏–∫–µ–º–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è",
    subtitle: "–ö—Ä–∞–π–Ω—è—è —Å—Ç–∞–¥–∏—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏",
    icon: Shield,
    color: "bg-stone-100 text-stone-600",
    details: {
      physiology: "–ù–∞ 6-–µ —Å—É—Ç–∫–∏ –º–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ ¬´–ø—Ä–µ–¥–µ–ª—å–Ω–æ–º¬ª —Å–æ—Å—Ç–æ—è–Ω–∏–∏: –≥–ª—é–∫–æ–∑–∞ –¥–µ—Ä–∂–∏—Ç—Å—è –Ω–∞ –≥—Ä–∞–Ω–∏ –≤—ã–∂–∏–≤–∞–Ω–∏—è (~1‚Äì2 –º–º–æ–ª—å/–ª), –∫–µ—Ç–æ–Ω—ã 6‚Äì8 –º–º–æ–ª—å/–ª. –û—Ä–≥–∞–Ω–∏–∑–º –∫—Ä–∞–π–Ω–µ —ç–∫–æ–Ω–æ–º–∏—Ç —Ä–µ—Å—É—Ä—Å—ã, –≤–æ –º–Ω–æ–≥–æ–º –ø–µ—Ä–µ–π–¥—è –Ω–∞ –Ω–µ–ø–æ–ª–Ω–æ–µ —Å–≥–æ—Ä–∞–Ω–∏–µ –∂–∏—Ä–Ω—ã—Ö –∫–∏—Å–ª–æ—Ç. –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –Ω–∞—á–∏–Ω–∞–µ—Ç —Å–Ω–∏–∂–∞—Ç—å—Å—è —Å–∏–Ω—Ç–µ–∑ –∫–æ—Ä—Ç–∏–∑–æ–ª–∞ (—á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —É–≥–Ω–µ—Ç–µ–Ω–∏–µ –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞), –∏–Ω—Å—É–ª–∏–Ω –∏ –≥–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –Ω–∞ –º–∏–Ω–∏–º—É–º–µ. –í —Ç–æ –∂–µ –≤—Ä–µ–º—è –∑–∞–º–µ—Ç–Ω–æ —Ä–∞—Å—Ç–µ—Ç –Ω–µ—Ä–≤–Ω–æ-–≥—É–º–æ—Ä–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–µ—Å—Å–∞ (–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å–∏–º–ø–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã). –ê—É—Ç–æ—Ñ–∞–≥–∏—è –≤—Å—ë –µ—â—ë –∞–∫—Ç–∏–≤–Ω–∞, –Ω–æ –∑–∞–º–µ–¥–ª—è–µ—Ç—Å—è ‚Äì –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å –æ—Ç—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞.",
      sensations: [
        "–•—Ä–æ–Ω–∏—á–µ—Å–∫–∞—è —Å–ª–∞–±–æ—Å—Ç—å ‚Äì –¥–∞–∂–µ –º–∞–ª–µ–π—à–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —É—Å–∏–ª–∏—è —Ç—Ä–µ–±—É—é—Ç –º–∞–∫—Å–∏–º—É–º–∞ —ç–Ω–µ—Ä–≥–∏–∏",
        "–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–ª–æ—Å—Ç—å ‚Äì –≤–æ–∑–º–æ–∂–Ω–∞ –∞–ø–∞—Ç–∏—è, –ø–æ–¥–∞–≤–ª–µ–Ω–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ",
        "–ü—Ä–æ–±–ª–µ–º—ã —Å–æ —Å–Ω–æ–º (–Ω–∞—Ä—É—à–µ–Ω–∏–µ —Ñ–∞–∑ —Å–Ω–∞) ‚Äì —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ–¥–∞–Ω–∏—è",
        "–ì–æ–ª–æ–≤–Ω—ã–µ –±–æ–ª–∏, –º–µ–ª—å–∫–∞–Ω–∏–µ ¬´–º—É—à–µ–∫¬ª –ø–µ—Ä–µ–¥ –≥–ª–∞–∑–∞–º–∏ ‚Äì –∏–∑-–∑–∞ –æ—á–µ–Ω—å –Ω–∏–∑–∫–æ–π –≥–ª—é–∫–æ–∑—ã –∏ –¥–∞–≤–ª–µ–Ω–∏—è"
      ]
    },
    recommendations: [
      "–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —É–∂–µ —Å–ª–µ–¥—É–µ—Ç –≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –≤—ã—Ö–æ–¥—É –∏–∑ –≥–æ–ª–æ–¥–∞–Ω–∏—è: –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–≤—ã–π –ø—Ä–∏–µ–º –ø–∏—â–∏ (–ª—É—á—à–µ –ª–µ–≥–∫–æ–µ –∏ –æ–±–∏–ª—å–Ω–æ–µ).",
      "–°–æ–±–ª—é–¥–∞–π—Ç–µ –ø–æ—Å—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –∏ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ; –ª—é–±–æ–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ–±–º–æ—Ä–æ–∫—É.",
      "–ü—Ä–∏–∫–ª–∞–¥—ã–≤–∞–π—Ç–µ —Ç–µ–ø–ª–æ (–ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏) –∫ —Å—Ç–æ–ø–∞–º –∏ –∫–æ–Ω–µ—á–Ω–æ—Å—Ç—è–º –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–ø–ª–∞."
    ],
    precautions: [
      "–ê–±—Å–æ–ª—é—Ç–Ω–æ –ª—é–±–æ–π —Ç—Ä–µ–≤–æ–∂–Ω—ã–π —Å–∏–º–ø—Ç–æ–º (—Ä–µ–∑–∫–∞—è –±–æ–ª—å –≤ —Å–µ—Ä–¥—Ü–µ, —Å–∏–ª—å–Ω–∞—è –∞—Ä–∏—Ç–º–∏—è, —Å–ø—É—Ç–∞–Ω–Ω–æ—Å—Ç—å —Å–æ–∑–Ω–∞–Ω–∏—è) ‚Äì —ç—Ç–æ —Å–∏–≥–Ω–∞–ª –∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–º—É –æ–∫–æ–Ω—á–∞–Ω–∏—é –≥–æ–ª–æ–¥–∞–Ω–∏—è.",
      "–ë–µ—Ä–µ–º–µ–Ω–Ω—ã–º, –∫–æ—Ä–º—è—â–∏–º –∏ –ª–∏—Ü–∞–º —Å —Ç—è–∂–µ–ª—ã–º–∏ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–º–∏ –±–æ–ª–µ–∑–Ω—è–º–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–æ ‚Äì –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—á–∏–Ω–∞—Ç—å –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è."
    ]
  },

  // === –§–∞–∑–∞ 15 ===
  {
    id: 15,
    hoursStart: 144,
    hoursEnd: 168,
    title: "–ü–æ–∑–¥–Ω—è—è —Ñ–∞–∑–∞ –Ω–µ–¥–µ–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ–¥–∞–Ω–∏—è",
    subtitle: "–≠—Ç–∞–ø –∑–∞–≤–µ—Ä—à–∞—é—â–µ–≥–æ –º–µ—Ç–∞–±–æ–ª–∏–∑–º–∞",
    icon: Star,
    color: "bg-rose-100 text-rose-600",
    details: {
      physiology: "–ù–∞ 7-–µ —Å—É—Ç–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —É—Å—Ç–æ–π—á–∏–≤–æ–π –∫–µ—Ç–æ—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ì–ª—é–∫–æ–∑–∞ –µ–¥–≤–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è (–º–µ–Ω–µ–µ 1 –º–º–æ–ª—å/–ª), –∫–µ—Ç–æ–Ω—ã 7‚Äì10 –º–º–æ–ª—å/–ª. –ú–µ—Ç–∞–±–æ–ª–∏–∑–º –∑–∞–º–µ–¥–ª–µ–Ω –¥–æ –º–∏–Ω–∏–º—É–º–∞. –ò–Ω—Å—É–ª–∏–Ω–æ–≤—ã–π —Ñ–æ–Ω –ø–æ—á—Ç–∏ –Ω—É–ª–µ–≤–æ–π, –≥–ª—é–∫–∞–≥–æ–Ω-–∫–∞—Ç–µ—Ö–æ–ª–∞–º–∏–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –≤—ã—Å–æ–∫–∏–µ. –ú—ã—à—Ü—ã –∏ –ø–µ—á–µ–Ω—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–∞–∫–æ–ø–∏–≤—à–∏–µ—Å—è –∂–∏—Ä–Ω—ã–µ –∫–∏—Å–ª–æ—Ç—ã. –ì–æ—Ä–º–æ–Ω —Ä–æ—Å—Ç–∞ –∏ IGF-1 —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ —Å–Ω–∏–∂–µ–Ω—ã, —á—Ç–æ –∑–∞–º–µ–¥–ª—è–µ—Ç —Ä–æ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (–æ—Ä–≥–∞–Ω–∏–∑–º –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ). –ê—É—Ç–æ—Ñ–∞–≥–∏—è –∏–¥–µ—Ç –≤ –Ω–∏–∑—à–µ–º —Ç–µ–º–ø–µ (–∫–ª–µ—Ç–∫–∞–º –Ω–µ—á–µ–≥–æ –±–æ–ª–µ–µ –æ—á–∏—â–∞—Ç—å ‚Äì –æ—Å–Ω–æ–≤–Ω—ã–µ ¬´–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è¬ª —É–¥–∞–ª–µ–Ω—ã).",
      sensations: [
        "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —Å–ª–∞–±–æ—Å—Ç—å –∏ –∏—Å—Ç–æ—â–µ–Ω–∏–µ ‚Äì —á–µ–ª–æ–≤–µ–∫ –º–æ–∂–µ—Ç –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é",
        "–ù–µ–≤—ã–Ω–æ—Å–∏–º–∞—è —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å –∏ —Å–±–æ–π —Ü–∏—Ä–∫–∞–¥–Ω—ã—Ö —Ä–∏—Ç–º–æ–≤ ‚Äì —Å–æ–Ω–ª–∏–≤–æ—Å—Ç—å –¥–Ω–µ–º –∏ –±–µ—Å—Å–æ–Ω–Ω–∏—Ü–∞ –Ω–æ—á—å—é",
        "–ú–µ–Ω—Ç–∞–ª—å–Ω–æ–µ –∑–∞—Ç–æ—Ä–º–æ–∂–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤–æ–∑–º–æ–∂–Ω—ã –ª–µ–≥–∫–∏–µ –≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ –∏–ª–∏ —Å–ø—É—Ç–∞–Ω–Ω–æ–µ —Å–æ–∑–Ω–∞–Ω–∏–µ",
        "–ò–Ω–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–ª–∞–±—ã–π –≥–æ–ª–æ–¥, —Å–∏–≥–Ω–∞–ª –æ—Ä–≥–∞–Ω–∏–∑–º–∞ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–∏—Ç–∞–Ω–∏—è"
      ]
    },
    recommendations: [
      "–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –≥–æ–ª–æ–¥–æ–≤–∫–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è ‚Äì –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–≤—É—é –ø–∏—â—É –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ (–ª—É—á—à–µ –≤—Å–µ–≥–æ –ª–µ–≥–∫–∏–º –æ–≤–æ—â–Ω—ã–º —Å—É–ø–æ–º –∏–ª–∏ –Ω–µ—Å–ª–∞–¥–∫–∏–º —Å–æ–∫–æ–º).",
      "–ü–∏—Ç—å —Ç–µ–ø–ª—ã–µ —Ç—Ä–∞–≤—è–Ω—ã–µ –æ—Ç–≤–∞—Ä—ã (–∏–º–±–∏—Ä—å, —Ä–æ–º–∞—à–∫–∞) –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è.",
      "–ü—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–º—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é –ø–∏—Ç–∞–Ω–∏—è: –Ω–µ–±–æ–ª—å—à–∏–µ –ø–æ—Ä—Ü–∏–∏ –ª–µ–≥–∫–æ—É—Å–≤–æ—è–µ–º–æ–π –µ–¥—ã (–≤–∞—Ä–µ–Ω—ã–µ –æ–≤–æ—â–∏, –±—É–ª—å–æ–Ω) –∫–∞–∂–¥—ã–µ 2‚Äì3 —á–∞—Å–∞."
    ],
    precautions: [
      "–õ—é–±–∞—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è –æ—Ä–≥–∞–Ω–∏–∑–º–∞ (–≥–æ–ª–æ–≤–æ–∫—Ä—É–∂–µ–Ω–∏–µ, –æ–±–º–æ—Ä–æ–∫, –æ–±–æ—Å—Ç—Ä–µ–Ω–∏–µ —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏—Ö –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏–π) —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –≥–æ–ª–æ–¥–∞.",
      "–ü–æ—Å–ª–µ 7 —Å—É—Ç–æ–∫ –≥–æ–ª–æ–¥–∞–Ω–∏—è —Å–ª–µ–¥—É–µ—Ç —Å—Ç—Ä–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –≤—ã—Ö–æ–¥: —Ä–µ–∑–∫–∏–π –ø—Ä–∏–µ–º –ø–∏—â–∏ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å —Ä–µ—Ñ–∏–¥-—Å–∏–Ω–¥—Ä–æ–º. –ü—Ä–µ—Ä—ã–≤–∞—Ç—å –≥–æ–ª–æ–¥–∞–Ω–∏–µ –ª—É—á—à–µ –ø–æ–¥ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤."
    ]
  }
]; // <--- –ù–ï –ó–ê–ë–£–î–¨–¢–ï –≠–¢–£ –°–ö–û–ë–ö–£!



================================================================================
FILE: src/features/fasting/data/preparationSteps.ts (103 lines)
================================================================================

import { 
  BrainCircuit, 
  Leaf, 
  FlaskConical, 
  Droplets, 
  Footprints, 
  Flame 
} from 'lucide-react';

export const PREP_STEPS = [
  {
    id: 1,
    title: "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–æ–∑–Ω–∞–Ω–∏—è",
    subtitle: "–û–ø–µ—Ä–∞—Ü–∏—è –±–µ–∑ –Ω–æ–∂–∞",
    theme: "mind",
    icon: BrainCircuit,
    color: "text-violet-600",
    gradient: "from-violet-500/20 to-fuchsia-500/20",
    // –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –¶–∏—Ç–∞—Ç–∞ + –ß–µ–∫-–ª–∏—Å—Ç
    quote: "–ì–æ–ª–æ–¥–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –Ω–µ –ª–∏—à–µ–Ω–∏–µ, –∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –ø—Ä–æ–≤–æ–¥–∏—Ç —Å–∞–º–∞ –ø—Ä–∏—Ä–æ–¥–∞.",
    checklist: [
        "–Ø –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —ç—Ç–æ –ª–µ—á–µ–±–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞, –∞ –Ω–µ –¥–∏–µ—Ç–∞.",
        "–Ø –¥–æ–≥–æ–≤–æ—Ä–∏–ª—Å—è —Å –±–ª–∏–∑–∫–∏–º–∏ –æ –ø–æ–¥–¥–µ—Ä–∂–∫–µ.",
        "–Ø –∏—Å–∫–ª—é—á–∏–ª –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏—è."
    ]
  },
  {
    id: 2,
    title: "–†–∞—Å—Ç–∏—Ç–µ–ª—å–Ω—ã–π –≤—Ö–æ–¥",
    subtitle: "–†–∞–∑–≥—Ä—É–∑–∫–∞ –∑–∞ 3 –¥–Ω—è",
    theme: "grains",
    icon: Leaf,
    color: "text-emerald-600",
    gradient: "from-emerald-500/20 to-teal-500/20",
    quote: "–ë–µ–ª–∫–æ–≤–∞—è –ø–∏—â–∞ –ø–µ—Ä–µ–¥ –≥–æ–ª–æ–¥–æ–º —É—Å–∏–ª–∏–≤–∞–µ—Ç –∏–Ω—Ç–æ–∫—Å–∏–∫–∞—Ü–∏—é. –ß–∏—Å—Ç—ã–π –∫–∏—à–µ—á–Ω–∏–∫ ‚Äî –∑–∞–ª–æ–≥ –ª–µ–≥–∫–æ–≥–æ –≤—Ö–æ–¥–∞.",
    checklist: [
        "–ò—Å–∫–ª—é—á–µ–Ω–æ: –º—è—Å–æ, —Ä—ã–±–∞, —è–π—Ü–∞, –º–æ–ª–æ—á–Ω–æ–µ.",
        "–†–∞—Ü–∏–æ–Ω: –∫–∞—à–∏ –Ω–∞ –≤–æ–¥–µ, –æ–≤–æ—â–∏, —Ñ—Ä—É–∫—Ç—ã.",
        "–ü–æ—Å–ª–µ–¥–Ω–∏–π —É–∂–∏–Ω: –ª–µ–≥–∫–∏–π, –¥–æ 19:00."
    ]
  },
  {
    id: 3,
    title: "–ë–ª–æ–∫–∞–¥–∞ –≥–æ–ª–æ–¥–∞",
    subtitle: "–ú–∞–≥–Ω–µ–∑–∏—è (–°—Ç–∞—Ä—Ç)",
    theme: "chemistry",
    icon: FlaskConical,
    color: "text-blue-600",
    gradient: "from-blue-500/20 to-indigo-500/20",
    quote: "–ü—Ä–∏–µ–º —Å–æ–ª–µ–≤–æ–≥–æ —Å–ª–∞–±–∏—Ç–µ–ª—å–Ω–æ–≥–æ ¬´–≤—ã–∫–ª—é—á–∞–µ—Ç¬ª –ø–∏—â–µ–≤–æ–π —Ü–µ–Ω—Ç—Ä. –ì–æ–ª–æ–¥ –∏—Å—á–µ–∑–∞–µ—Ç, –∫–æ–≥–¥–∞ –∫–∏—à–µ—á–Ω–∏–∫ –ø—É—Å—Ç.",
    checklist: [
        "–ö—É–ø–∏—Ç—å: –°—É–ª—å—Ñ–∞—Ç –º–∞–≥–Ω–∏—è (40-60–≥).",
        "–ü—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å: 300 –º–ª —Ç–µ–ø–ª–æ–π –≤–æ–¥—ã.",
        "–í—ã–ø–∏—Ç—å —Ä–∞—Å—Ç–≤–æ—Ä –∑–∞–ª–ø–æ–º –ø–µ—Ä–µ–¥ —Å–Ω–æ–º –∏–ª–∏ —É—Ç—Ä–æ–º."
    ]
  },
  {
    id: 4,
    title: "–†–µ–∂–∏–º –æ—á–∏—â–µ–Ω–∏—è",
    subtitle: "–ì–∏–≥–∏–µ–Ω–∞ –∏ –ö–ª–∏–∑–º—ã",
    theme: "water",
    icon: Droplets,
    color: "text-cyan-600",
    gradient: "from-cyan-500/20 to-sky-500/20",
    quote: "–ö–æ–∂–∞ –∏ –∫–∏—à–µ—á–Ω–∏–∫ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –≥–ª–∞–≤–Ω—ã–º–∏ –æ—Ä–≥–∞–Ω–∞–º–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è. –ò–º –Ω—É–∂–Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø–æ–º–æ—â—å.",
    checklist: [
        "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ: –û—á–∏—Å—Ç–∏—Ç–µ–ª—å–Ω–∞—è –∫–ª–∏–∑–º–∞ (—É—Ç—Ä–æ).",
        "–ï–∂–µ–¥–Ω–µ–≤–Ω–æ: –¢–µ–ø–ª—ã–π –¥—É—à (—Å–º—ã–≤–∞—Ç—å —Ç–æ–∫—Å–∏–Ω—ã —Å –∫–æ–∂–∏).",
        "–ì–∏–≥–∏–µ–Ω–∞ —Ä—Ç–∞: –ø–æ–ª–æ—Å–∫–∞–Ω–∏–µ –æ—Ç–≤–∞—Ä–∞–º–∏ —Ç—Ä–∞–≤."
    ]
  },
  {
    id: 5,
    title: "–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",
    subtitle: "–î–≤–∏–∂–µ–Ω–∏–µ –∏ –ü–∏—Ç—å–µ",
    theme: "movement",
    icon: Footprints,
    color: "text-orange-600",
    gradient: "from-orange-500/20 to-red-500/20",
    quote: "–õ–µ–∂–∞—Ç—å –Ω–µ–ª—å–∑—è. –¢–æ–∫—Å–∏–Ω—ã ¬´—Å–≥–æ—Ä–∞—é—Ç¬ª –ø—Ä–∏ —Ö–æ–¥—å–±–µ —á–µ—Ä–µ–∑ –ª–µ–≥–∫–∏–µ. –í–æ–¥–∞ ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞—Å—Ç–≤–æ—Ä–∏—Ç–µ–ª—å —è–¥–æ–≤.",
    checklist: [
        "–ü—Ä–æ–≥—É–ª–∫–∏: 10-15 –∫–º –µ–∂–µ–¥–Ω–µ–≤–Ω–æ (–ø–æ —Å–∏–ª–∞–º).",
        "–í–æ–¥–∞: –º–∏–Ω–∏–º—É–º 1.5 - 2 –ª–∏—Ç—Ä–∞ –≤ —Å—É—Ç–∫–∏.",
        "–ú–∏–Ω–µ—Ä–∞–ª–∫–∞: –ë–æ—Ä–∂–æ–º–∏ (–¥–ª—è —Å–Ω—è—Ç–∏—è —Ç–æ—à–Ω–æ—Ç—ã)."
    ]
  },
  {
    id: 6,
    title: "–ê—Ü–∏–¥–æ—Ç–∏—á–µ—Å–∫–∏–π –∫—Ä–∏–∑",
    subtitle: "–ß–µ–≥–æ –æ–∂–∏–¥–∞—Ç—å",
    theme: "medical",
    icon: Flame,
    color: "text-rose-600",
    gradient: "from-rose-500/20 to-pink-500/20",
    quote: "–ù–∞ 6-9 –¥–µ–Ω—å –Ω–∞—Å—Ç—É–ø–∞–µ—Ç –ø–µ—Ä–µ–ª–æ–º. –°–ª–∞–±–æ—Å—Ç—å —Å–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∏–ª–∏–≤–æ–º —Å–∏–ª. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, –æ—Ä–≥–∞–Ω–∏–∑–º –ø–µ—Ä–µ—à–µ–ª –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø–∏—Ç–∞–Ω–∏–µ.",
    checklist: [
        "–Ø –≥–æ—Ç–æ–≤ –∫ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å–ª–∞–±–æ—Å—Ç–∏/—Ç–æ—à–Ω–æ—Ç–µ.",
        "–Ø –∑–Ω–∞—é, —á—Ç–æ —ç—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫ –æ—á–∏—â–µ–Ω–∏—è.",
        "–Ø –¥–æ–≤–µ—Ä—è—é –º—É–¥—Ä–æ—Å—Ç–∏ —Å–≤–æ–µ–≥–æ —Ç–µ–ª–∞."
    ]
  }
];



================================================================================
FILE: src/features/breathing/hooks/useBreathingSession.ts (196 lines)
================================================================================

// src/features/breathing/hooks/useBreathingSession.ts
import { useState, useEffect, useRef, useCallback } from 'react';
import type { BreathLevel } from '../data/patterns';
import dayjs from 'dayjs';
import { soundManager } from '../../../utils/sounds';
import { storageUpdateHistory } from '../../../utils/storage'; // üëà NEW
import type { HistoryRecord } from '../../../utils/types';

const MIN_SESSION_DURATION_SECONDS = 15;
const TIMER_INTERVAL_MS = 250;

export type Phase = 'idle' | 'inhale' | 'hold' | 'exhale' | 'finished';

export const useBreathingSession = (level: BreathLevel, sessionDurationMinutes: number) => {
  const [phase, setPhase] = useState<Phase>('idle');
  const [phaseTimeLeft, setPhaseTimeLeft] = useState(0);
  const [totalTimeLeft, setTotalTimeLeft] = useState(0);
  const [cycles, setCycles] = useState(0);

  const state = useRef({
    status: 'idle' as Phase,
    startTime: null as number | null,     
    phaseEndTime: 0,                      
    sessionEndTime: 0,                    
    isInfinite: false,
    timerId: null as number | null
  });

  const nextPhase = useCallback(() => {
    const current = state.current.status;
    let next: Phase = 'idle';
    let duration = 0;

    if (current === 'inhale') {
      next = 'hold';
      duration = level.hold;
      soundManager.playHold();
    } else if (current === 'hold') {
      next = 'exhale';
      duration = level.exhale;
      soundManager.playExhale();
    } else if (current === 'exhale') {
      next = 'inhale';
      duration = level.inhale;
      setCycles(c => c + 1);
      soundManager.playInhale();
    }

    const now = Date.now();
    state.current.status = next;
    state.current.phaseEndTime = now + (duration * 1000); 
    
    setPhase(next);
    setPhaseTimeLeft(duration);
    
    if (navigator.vibrate) navigator.vibrate(50);
  }, [level]);

  const stopEngine = useCallback(() => {
    if (state.current.timerId) {
      clearInterval(state.current.timerId);
      state.current.timerId = null;
    }
  }, []);

  // –°–û–•–†–ê–ù–ï–ù–ò–ï
  const saveToHistory = useCallback((endTimeStr: string, durationSec: number) => {
    if (durationSec < MIN_SESSION_DURATION_SECONDS) return; 

    const record: HistoryRecord = {
      id: Date.now().toString(),
      type: 'breathing',
      scheme: `–£—Ä–æ–≤–µ–Ω—å ${level.id} (${level.inhale}-${level.hold}-${level.exhale})`,
      startTime: dayjs(state.current.startTime || Date.now()).toISOString(),
      endTime: endTimeStr,
      durationSeconds: durationSec
    };

    // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (fire and forget)
    storageUpdateHistory('history_fasting', record);
  }, [level]);

  const finishSession = useCallback(() => {
    stopEngine();
    
    soundManager.playFinish(); 
    if (navigator.vibrate) navigator.vibrate([200, 100, 200]);

    if (state.current.startTime) {
      const now = Date.now();
      const duration = Math.floor((now - state.current.startTime) / 1000);
      saveToHistory(dayjs(now).toISOString(), duration);
    }

    setPhase('finished');
    state.current.status = 'finished';
  }, [stopEngine, saveToHistory]);

  const tick = useCallback(() => {
    const now = Date.now();
    const s = state.current;

    if (!s.isInfinite && s.sessionEndTime > 0) {
      const remaining = Math.ceil((s.sessionEndTime - now) / 1000);
      if (remaining <= 0) {
        finishSession();
        return;
      }
      setTotalTimeLeft(remaining);
    }

    const phaseRemaining = Math.ceil((s.phaseEndTime - now) / 1000);
    if (phaseRemaining <= 0) {
      nextPhase();
    } else {
      setPhaseTimeLeft(phaseRemaining);
    }
  }, [nextPhase, finishSession]);

  const stopSession = useCallback(() => {
    if (state.current.startTime && state.current.status !== 'idle' && state.current.status !== 'finished') {
      const now = Date.now();
      const duration = Math.floor((now - state.current.startTime) / 1000);
      saveToHistory(dayjs(now).toISOString(), duration);
    }

    stopEngine();
    soundManager.stopSession(); 
    
    state.current.status = 'idle';
    setPhase('idle');
  }, [stopEngine, saveToHistory]);

  const startSession = useCallback(() => {
    stopEngine();
    soundManager.unlock();
    soundManager.startSession(); 
    soundManager.playInhale();   

    const now = Date.now();
    state.current.startTime = now;
    state.current.status = 'inhale';
    state.current.phaseEndTime = now + (level.inhale * 1000);
    state.current.isInfinite = sessionDurationMinutes === 0;
    
    if (sessionDurationMinutes > 0) {
      state.current.sessionEndTime = now + (sessionDurationMinutes * 60 * 1000);
      setTotalTimeLeft(sessionDurationMinutes * 60);
    } else {
      state.current.sessionEndTime = 0;
      setTotalTimeLeft(0);
    }

    setPhase('inhale');
    setPhaseTimeLeft(level.inhale);
    setCycles(0);

    state.current.timerId = window.setInterval(tick, TIMER_INTERVAL_MS);
  }, [level, sessionDurationMinutes, tick, stopEngine]);

  useEffect(() => {
    return () => {
      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
      if (state.current.status !== 'idle' && state.current.status !== 'finished') {
        const now = Date.now();
        const start = state.current.startTime || now;
        const duration = Math.floor((now - start) / 1000);
        
        if (duration > MIN_SESSION_DURATION_SECONDS) {
             const rec: HistoryRecord = {
                id: Date.now().toString(),
                type: 'breathing',
                scheme: `–£—Ä–æ–≤–µ–Ω—å ${level.id}`, 
                startTime: dayjs(start).toISOString(),
                endTime: dayjs(now).toISOString(),
                durationSeconds: duration
             };
             // Fire and forget
             storageUpdateHistory('history_fasting', rec);
        }
      }
      stopEngine();
      soundManager.stopAll(); 
    };
  }, [level, stopEngine]); 

  return { 
    phase, 
    phaseTimeLeft, 
    totalTimeLeft, 
    startSession, 
    stopSession, 
    cycles 
  };
};



================================================================================
FILE: src/features/breathing/BreathingPage.tsx (291 lines)
================================================================================

import { useState, useEffect, useRef } from 'react';
import { BREATH_LEVELS } from './data/patterns';
import { useBreathingSession } from './hooks/useBreathingSession';
import { BreathingCircle } from './components/BreathingCircle';
import { Info, ChevronRight, ChevronLeft, Volume2, Loader2, Timer, CheckCircle2 } from 'lucide-react';
import { cn } from '../../utils/cn';
import { InfoSheet } from './components/InfoSheet';
import { SoundSheet } from './components/SoundSheet';
import { BreathingStartModal } from './components/BreathingStartModal';
import { soundManager } from '../../utils/sounds';
import { motion, AnimatePresence } from 'framer-motion';

const DURATION_OPTIONS = [5, 10, 15, 20, 30, 0];

export const BreathingPage = () => {
  const [levelIndex, setLevelIndex] = useState(0);
  const [showInfo, setShowInfo] = useState(false);
  const [showSound, setShowSound] = useState(false);
  const [showPrepModal, setShowPrepModal] = useState(false);

  const [duration, setDuration] = useState(10);
  const [isAudioReady, setIsAudioReady] = useState(false);
  
  const [musicEnabled, setMusicEnabled] = useState(soundManager.isMusicEnabled);
  const [sfxEnabled, setSfxEnabled] = useState(soundManager.isSfxEnabled);
  const [currentTrack, setCurrentTrack] = useState(soundManager.getCurrentTrackId());
  const [musicVol, setMusicVol] = useState(soundManager.musicVolume);
  const [sfxVol, setSfxVol] = useState(soundManager.sfxVolume);

  const prepTimerRef = useRef<number | null>(null);

  const level = BREATH_LEVELS[levelIndex];
  const { phase, phaseTimeLeft, totalTimeLeft, startSession, stopSession } = useBreathingSession(level, duration);

  useEffect(() => {
      const timer = setTimeout(() => setIsAudioReady(true), 500);
      return () => clearTimeout(timer);
  }, []);

  // üëá –õ–û–ì–ò–ö–ê –ê–í–¢–û-–°–¢–ê–†–¢–ê
  useEffect(() => {
      if (showPrepModal) {
          prepTimerRef.current = window.setTimeout(() => {
              setShowPrepModal(false);
              startSession(); // –°—Ç–∞—Ä—Ç –ø–æ—Å–ª–µ —Ç–∞–π–º–µ—Ä–∞
          }, 5500);
      }
      return () => {
          if (prepTimerRef.current) clearTimeout(prepTimerRef.current);
      };
  }, [showPrepModal, startSession]);

  const handleToggleMusic = () => {
      const newState = !musicEnabled;
      setMusicEnabled(newState);
      soundManager.setMusicEnabled(newState);
  };
  const handleToggleSfx = () => {
      const newState = !sfxEnabled;
      setSfxEnabled(newState);
      soundManager.setSfxEnabled(newState);
  };
  const handleSelectTrack = (id: string) => {
      soundManager.setTrack(id);
      setCurrentTrack(id);
  };
  const handleChangeMusicVol = (val: number) => {
      soundManager.setMusicVolume(val);
      setMusicVol(val);
  };
  const handleChangeSfxVol = (val: number) => {
      soundManager.setSfxVolume(val);
      setSfxVol(val);
  };

  const getTotalDuration = () => {
    if (phase === 'inhale') return level.inhale;
    if (phase === 'hold') return level.hold;
    if (phase === 'exhale') return level.exhale;
    return 0;
  };

  const handleToggle = () => {
    if (!isAudioReady) return;
    
    if (phase !== 'idle' && phase !== 'finished') {
        // –°—Ç–æ–ø
        stopSession();
        setShowPrepModal(false);
        if (prepTimerRef.current) clearTimeout(prepTimerRef.current);
    } else {
        // –°—Ç–∞—Ä—Ç (—á–µ—Ä–µ–∑ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É)
        soundManager.unlock(); 
        setShowPrepModal(true);
    }
  };

  const formatTotalTime = (s: number) => {
      if (duration === 0) return "‚àû";
      const m = Math.floor(s / 60);
      const sec = s % 60;
      return `${m}:${sec.toString().padStart(2, '0')}`;
  };

  const isRunning = phase !== 'idle' && phase !== 'finished';

  return (
    <div className="min-h-full flex flex-col pb-6 relative z-0">
        
        {/* –ú–æ–¥–∞–ª–∫–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ (–ë–ï–ó onComplete) */}
        <BreathingStartModal 
            isOpen={showPrepModal} 
            onClose={() => {
                setShowPrepModal(false);
                if (prepTimerRef.current) clearTimeout(prepTimerRef.current);
            }} 
        />

        <div className="bg-white dark:bg-[#2C2C2E] rounded-[3rem] shadow-sm shadow-slate-200/50 dark:shadow-black/20 relative overflow-hidden flex-1 flex flex-col z-10 border border-white/60 dark:border-white/10">

            <div className="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/graphy.png')] opacity-[0.03] dark:opacity-[0.05] pointer-events-none" />

            {/* HEADER */}
            <div className="px-8 pt-8 pb-4 flex justify-between items-start relative z-20 shrink-0">
                <div className="flex-1 min-w-0 pr-2">
                    <h1 className="text-3xl font-[900] text-slate-800 dark:text-white leading-tight">
                        –ü—Ä–∞–Ω–∞—è–º–∞
                    </h1>
                    <div className="flex items-center gap-2 mt-1">
                        <span className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest">
                            –ì–∏–ø–æ–≤–µ–Ω—Ç–∏–ª—è—Ü–∏—è
                        </span>
                        {isRunning && (
                            <span className="text-[10px] font-bold text-slate-500 dark:text-slate-400 bg-slate-100 dark:bg-[#3A3A3C] px-2 py-0.5 rounded-md font-mono flex items-center gap-1 animate-in fade-in">
                                <Timer className="w-3 h-3" />
                                {formatTotalTime(totalTimeLeft)}
                            </span>
                        )}
                    </div>
                </div>

                <div className="flex gap-2 relative">
                    <button onClick={() => setShowSound(true)} className="p-2 text-slate-300 dark:text-slate-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors">
                        <Volume2 className="w-6 h-6" />
                    </button>
                    <button onClick={() => setShowInfo(true)} className="p-2 text-slate-300 dark:text-slate-600 hover:text-blue-500 dark:hover:text-blue-400 transition-colors">
                        <Info className="w-6 h-6" />
                    </button>
                </div>
            </div>

            {/* CIRCLE & STATUS */}
            <div className="flex-1 flex flex-col items-center justify-center relative z-10 py-6">
                
                <div 
                    onClick={handleToggle} 
                    className={cn(
                        "cursor-pointer relative transform-gpu transition-all duration-500",
                        !isAudioReady && "opacity-50 pointer-events-none",
                        isRunning ? "scale-110" : "hover:scale-105 active:scale-95"
                    )}
                >
                    {!isAudioReady ? (
                        <div className="w-64 h-64 flex flex-col items-center justify-center bg-slate-50 dark:bg-[#3A3A3C] rounded-full border border-slate-100 dark:border-white/10">
                            <Loader2 className="w-8 h-8 text-slate-300 dark:text-slate-600 animate-spin mb-2" />
                            <span className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        </div>
                    ) : phase === 'finished' ? (
                        <div className="w-64 h-64 flex flex-col items-center justify-center bg-white dark:bg-[#2C2C2E] rounded-full border-4 border-green-50 dark:border-green-900/30 shadow-sm animate-in zoom-in duration-300">
                            <CheckCircle2 className="w-16 h-16 text-green-500 mb-2" />
                            <span className="text-xl font-bold text-slate-700 dark:text-slate-200">–û—Ç–ª–∏—á–Ω–æ!</span>
                            <button onClick={(e) => { e.stopPropagation(); stopSession(); }} className="mt-4 text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest bg-slate-50 dark:bg-[#3A3A3C] px-4 py-2 rounded-xl hover:bg-slate-100 dark:hover:bg-[#4A4A4C]">
                                –ó–∞–∫—Ä—ã—Ç—å
                            </button>
                        </div>
                    ) : (
                        <div className="relative flex items-center justify-center scale-110">
                            <BreathingCircle
                                phase={phase}
                                timeLeft={phaseTimeLeft}
                                totalDuration={getTotalDuration()}
                            />

                            {!isRunning && !showPrepModal && (
                                <div className="absolute inset-0 flex items-center justify-center z-20 pointer-events-none">
                                    <span className="text-sm font-black text-slate-300 dark:text-slate-600 uppercase tracking-[0.2em] ml-1 animate-pulse">
                                        –°–¢–ê–†–¢
                                    </span>
                                </div>
                            )}
                        </div>
                    )}
                </div>

                {/* PATTERN INFO */}
                <div className="w-full px-10 mt-12 flex justify-between items-center text-center max-w-sm">
                    <div className={cn("transition-all duration-500", phase === 'inhale' ? "scale-110 opacity-100" : "opacity-30 blur-[0.5px]")}>
                        <span className="text-[9px] font-bold text-slate-400 dark:text-slate-500 uppercase block mb-1">–í–¥–æ—Ö</span>
                        <span className={cn("text-2xl font-black tabular-nums", phase === 'inhale' ? "text-cyan-600 dark:text-cyan-400" : "text-slate-300 dark:text-slate-600")}>{level.inhale}</span>
                    </div>
                    <div className={cn("transition-all duration-500", phase === 'hold' ? "scale-110 opacity-100" : "opacity-30 blur-[0.5px]")}>
                        <span className="text-[9px] font-bold text-slate-400 dark:text-slate-500 uppercase block mb-1">–ó–∞–¥–µ—Ä–∂–∫–∞</span>
                        <span className={cn("text-3xl font-black leading-none tabular-nums", phase === 'hold' ? "text-violet-600 dark:text-violet-400" : "text-slate-300 dark:text-slate-600")}>{level.hold}</span>
                    </div>
                    <div className={cn("transition-all duration-500", phase === 'exhale' ? "scale-110 opacity-100" : "opacity-30 blur-[0.5px]")}>
                        <span className="text-[9px] font-bold text-slate-400 dark:text-slate-500 uppercase block mb-1">–í—ã–¥–æ—Ö</span>
                        <span className={cn("text-3xl font-black leading-none tabular-nums", phase === 'exhale' ? "text-blue-600 dark:text-blue-400" : "text-slate-300 dark:text-slate-600")}>{level.exhale}</span>
                    </div>
                </div>
            </div>

            {/* CONTROLS */}
            <AnimatePresence>
                {!isRunning && (
                    <motion.div
                        initial={{ height: 'auto', opacity: 1 }}
                        exit={{ height: 0, opacity: 0 }}
                        className="px-6 pb-8 pt-4 space-y-6 bg-white/50 dark:bg-[#2C2C2E]/50 backdrop-blur-sm rounded-b-[3rem] overflow-hidden"
                    >
                        <div className="space-y-2">
                            <p className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest pl-1">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</p>
                            <div className="flex items-center gap-2 overflow-x-auto scrollbar-hide pb-2 -mx-6 px-6">
                                {DURATION_OPTIONS.map((opt) => (
                                    <button
                                        key={opt}
                                        onClick={() => setDuration(opt)}
                                        className={cn(
                                            "shrink-0 px-4 py-2 rounded-xl text-xs font-bold transition-all border touch-manipulation",
                                            duration === opt
                                                ? "bg-slate-800 dark:bg-slate-100 text-white dark:text-slate-900 border-slate-800 dark:border-slate-100 shadow-md"
                                                : "bg-slate-50 dark:bg-[#3A3A3C] text-slate-400 dark:text-slate-500 border-slate-100 dark:border-white/10 hover:bg-slate-100 dark:hover:bg-[#4A4A4C]"
                                        )}
                                    >
                                        {opt === 0 ? "‚àû" : `${opt}–º`}
                                    </button>
                                ))}
                            </div>
                        </div>

                        <div className="flex items-center justify-between bg-slate-50 dark:bg-[#3A3A3C] p-2 rounded-[1.5rem] border border-slate-100 dark:border-white/10">
                            <button
                                disabled={levelIndex === 0}
                                onClick={() => setLevelIndex(i => i - 1)}
                                className="p-3 hover:bg-slate-100 dark:hover:bg-[#4A4A4C] rounded-xl disabled:opacity-30 transition-colors touch-manipulation"
                            >
                                <ChevronLeft className="w-5 h-5 text-slate-400 dark:text-slate-500" />
                            </button>
                            <div className="text-center w-32">
                                <span className="text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest block mb-0.5">
                                    –°–ª–æ–∂–Ω–æ—Å—Ç—å
                                </span>
                                <span className="text-xl font-black text-slate-800 dark:text-white leading-none">
                                    {level.id}
                                </span>
                            </div>
                            <button
                                disabled={levelIndex === BREATH_LEVELS.length - 1}
                                onClick={() => setLevelIndex(i => i + 1)}
                                className="p-3 hover:bg-slate-100 dark:hover:bg-[#4A4A4C] rounded-xl disabled:opacity-30 transition-colors touch-manipulation"
                            >
                                <ChevronRight className="w-5 h-5 text-slate-400 dark:text-slate-500" />
                            </button>
                        </div>
                    </motion.div>
                )}
            </AnimatePresence>

        </div>

        {/* MODALS */}
        {showInfo && <InfoSheet onClose={() => setShowInfo(false)} />}
        {showSound && (
            <SoundSheet 
                onClose={() => setShowSound(false)}
                musicEnabled={musicEnabled}
                sfxEnabled={sfxEnabled}
                currentTrackId={currentTrack}
                musicVolume={musicVol}
                sfxVolume={sfxVol}
                onToggleMusic={handleToggleMusic}
                onToggleSfx={handleToggleSfx}
                onSelectTrack={handleSelectTrack}
                onChangeMusicVolume={handleChangeMusicVol}
                onChangeSfxVolume={handleChangeSfxVol}
            />
        )}

    </div>
  );
};



================================================================================
FILE: src/features/breathing/components/BreathingCircle.tsx (72 lines)
================================================================================

import { motion } from 'framer-motion';
import { cn } from '../../../utils/cn'; // 3 —Ç–æ—á–∫–∏
import type { Phase } from '../hooks/useBreathingSession'; // 1 —Ç–æ—á–∫–∞

interface Props {
  phase: Phase;
  timeLeft: number;
  totalDuration: number; 
}

type ConfigType = {
  [key in Phase]: { text: string; color: string; scale: number };
};

export const BreathingCircle = ({ phase, timeLeft, totalDuration }: Props) => {

  const config: ConfigType = {
    idle: { text: "", color: "bg-slate-50 dark:bg-[#3A3A3C] border-4 border-white dark:border-white/10 shadow-inner", scale: 1 },
    inhale: { text: "–í–¥–æ—Ö", color: "bg-cyan-100 dark:bg-cyan-900/30 text-cyan-600 dark:text-cyan-400", scale: 1.5 },
    hold: { text: "–ó–∞–¥–µ—Ä–∂–∫–∞", color: "bg-violet-100 dark:bg-violet-900/30 text-violet-600 dark:text-violet-400", scale: 1.5 },
    exhale: { text: "–í—ã–¥–æ—Ö", color: "bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400", scale: 1 },
    finished: { text: "–ì–æ—Ç–æ–≤–æ", color: "bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400", scale: 1 },
  };

  const current = config[phase];

  return (
    <div className="relative w-64 h-64 flex items-center justify-center">

      {phase !== 'finished' && phase !== 'idle' && (
        <motion.div
            animate={{
                scale: current.scale,
                backgroundColor: phase === 'hold' ? '#ede9fe' : phase === 'inhale' ? '#cffafe' : '#dbeafe'
            }}
            transition={{
                duration: totalDuration > 0 ? totalDuration : 0.5,
                ease: "linear"
            }}
            className="absolute inset-0 rounded-full opacity-50 blur-2xl dark:opacity-30"
        />
      )}

      <motion.div
        animate={{ scale: current.scale }}
        transition={{ duration: totalDuration > 0 ? totalDuration : 0.5, ease: "linear" }}
        className={cn(
            "w-32 h-32 rounded-full flex flex-col items-center justify-center shadow-lg relative z-10 transition-colors duration-500",
            current.color
        )}
      >
        {phase !== 'idle' && (
            <>
                <span className="text-sm font-bold uppercase tracking-widest">{current.text}</span>
                {phase !== 'finished' && (
                    <motion.span
                        key={timeLeft}
                        initial={{ opacity: 0, y: 5 }}
                        animate={{ opacity: 1, y: 0 }}
                        className="text-2xl font-mono font-black mt-1"
                    >
                        {timeLeft}
                    </motion.span>
                )}
            </>
        )}
      </motion.div>

    </div>
  );
};



================================================================================
FILE: src/features/breathing/components/BreathingStartModal.tsx (106 lines)
================================================================================

import { createPortal } from 'react-dom';
import { motion, AnimatePresence } from 'framer-motion';
import { X, Wind } from 'lucide-react';
import { useEffect, useState } from 'react';

interface Props {
  isOpen: boolean;
  onClose: () => void;
}

export const BreathingStartModal = ({ isOpen, onClose }: Props) => {
  const [count, setCount] = useState(5);

  useEffect(() => {
    if (isOpen) {
        setCount(5);
        const timer = setInterval(() => {
            setCount((c) => (c > 1 ? c - 1 : 1));
        }, 1000);
        return () => clearInterval(timer);
    }
  }, [isOpen]);

  const content = (
    <AnimatePresence>
      {isOpen && (
        <>
          <motion.div
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            className="fixed inset-0 bg-black/60 backdrop-blur-md z-[10000]"
          />

          <div className="fixed inset-0 z-[10001] flex items-center justify-center p-6 pointer-events-none">
              <motion.div
                initial={{ opacity: 0, scale: 0.9 }}
                animate={{ opacity: 1, scale: 1 }}
                exit={{ opacity: 0, scale: 0.9 }}
                transition={{ type: "spring", damping: 25, stiffness: 300 }}
                className="w-full max-w-xs bg-white dark:bg-[#2C2C2E] rounded-[3rem] shadow-2xl p-8 relative pointer-events-auto"
              >
                  <button
                    onClick={onClose}
                    className="absolute top-6 right-6 p-2 text-slate-300 dark:text-slate-600 hover:text-slate-500 dark:hover:text-slate-400 transition-colors z-20"
                  >
                    <X className="w-6 h-6" />
                  </button>

                  <div className="flex flex-col items-center text-center pt-6">

                    {/* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—Ä—É–≥ —Å —Ç–∞–π–º–µ—Ä–æ–º */}
                    <div className="relative w-40 h-40 flex items-center justify-center mb-10">
                        <motion.div
                            animate={{ scale: [1, 1.3, 1], opacity: [0.3, 0.6, 0.3] }}
                            transition={{ duration: 5, ease: "easeInOut", repeat: Infinity }}
                            className="absolute inset-0 bg-indigo-200 dark:bg-indigo-900/40 rounded-full blur-2xl"
                        />

                        <motion.div
                            animate={{ scale: [1, 1.05, 1] }}
                            transition={{ duration: 5, ease: "easeInOut", repeat: Infinity }}
                            className="w-28 h-28 bg-white dark:bg-[#2C2C2E] rounded-full shadow-lg flex items-center justify-center relative z-10 border-4 border-indigo-50 dark:border-indigo-500/30"
                        >
                            <motion.span
                                key={count}
                                initial={{ opacity: 0, scale: 0.5 }}
                                animate={{ opacity: 1, scale: 1 }}
                                className="text-5xl font-[900] text-indigo-600 dark:text-indigo-400 tabular-nums"
                            >
                                {count}
                            </motion.span>

                            <svg className="absolute inset-[-4px] w-[calc(100%+8px)] h-[calc(100%+8px)] -rotate-90 pointer-events-none overflow-visible">
                                <motion.circle
                                    cx="50%" cy="50%" r="48%" fill="none"
                                    stroke="#6366f1" strokeWidth="4" strokeLinecap="round"
                                    initial={{ pathLength: 0 }}
                                    animate={{ pathLength: 1 }}
                                    transition={{ duration: 5.5, ease: "linear" }}
                                />
                            </svg>
                        </motion.div>
                    </div>

                    <div className="flex flex-col items-center gap-2">
                        <div className="p-3 bg-indigo-50 dark:bg-indigo-900/30 rounded-2xl text-indigo-600 dark:text-indigo-400 mb-2">
                            <Wind className="w-6 h-6 animate-pulse" />
                        </div>
                        <p className="text-base font-bold text-slate-600 dark:text-slate-300 leading-relaxed max-w-[220px]">
                            –ó–∞–π–º–∏—Ç–µ —É–¥–æ–±–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ. <br/>
                            –†–∞—Å—Å–ª–∞–±—å—Ç–µ —Ç–µ–ª–æ.
                        </p>
                    </div>

                  </div>
              </motion.div>
          </div>
        </>
      )}
    </AnimatePresence>
  );

  return createPortal(content, document.body);
};



================================================================================
FILE: src/features/breathing/components/SoundMixer.tsx (102 lines)
================================================================================

import { motion } from 'framer-motion';
import { Music, Bell, Flame, Wind, CloudRain, Star } from 'lucide-react';
import { cn } from '../../../utils/cn';
import { AMBIENT_TRACKS } from '../../../utils/sounds';

interface Props {
  musicEnabled: boolean;
  sfxEnabled: boolean;
  currentTrackId: string;
  onToggleMusic: () => void;
  onToggleSfx: () => void;
  onSelectTrack: (id: string) => void;
  onClose: () => void;
}

// –ú–∞–ø–ø–∏–Ω–≥ –∏–∫–æ–Ω–æ–∫
const icons = {
    fire: Flame,
    wind: Wind,
    rain: CloudRain,
    space: Star
};

export const SoundMixer = ({ 
    musicEnabled, sfxEnabled, currentTrackId, 
    onToggleMusic, onToggleSfx, onSelectTrack, onClose 
}: Props) => {
  return (
    <>
      <div className="fixed inset-0 z-40" onClick={onClose} />

      <motion.div
        initial={{ opacity: 0, scale: 0.9, y: 10 }}
        animate={{ opacity: 1, scale: 1, y: 0 }}
        exit={{ opacity: 0, scale: 0.9, y: 10 }}
        className="absolute top-16 right-0 z-50 bg-white/95 backdrop-blur-xl border border-white/50 p-4 rounded-[1.5rem] shadow-xl w-64 origin-top-right"
      >
        
        {/* 1. –ì–õ–ê–í–ù–´–ï –ü–ï–†–ï–ö–õ–Æ–ß–ê–¢–ï–õ–ò */}
        <div className="flex gap-2 mb-4">
            <button 
                onClick={onToggleMusic}
                className={cn(
                    "flex-1 flex flex-col items-center justify-center p-3 rounded-xl border transition-all",
                    musicEnabled ? "bg-violet-50 border-violet-100" : "bg-slate-50 border-transparent opacity-60"
                )}
            >
                <Music className={cn("w-5 h-5 mb-1", musicEnabled ? "text-violet-600" : "text-slate-400")} />
                <span className="text-[9px] font-bold uppercase tracking-wide text-slate-500">–ú—É–∑—ã–∫–∞</span>
            </button>

            <button 
                onClick={onToggleSfx}
                className={cn(
                    "flex-1 flex flex-col items-center justify-center p-3 rounded-xl border transition-all",
                    sfxEnabled ? "bg-blue-50 border-blue-100" : "bg-slate-50 border-transparent opacity-60"
                )}
            >
                <Bell className={cn("w-5 h-5 mb-1", sfxEnabled ? "text-blue-600" : "text-slate-400")} />
                <span className="text-[9px] font-bold uppercase tracking-wide text-slate-500">–ó–≤—É–∫–∏</span>
            </button>
        </div>

        {/* 2. –í–´–ë–û–† –ê–¢–ú–û–°–§–ï–†–´ (–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ –º—É–∑—ã–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞) */}
        {musicEnabled && (
            <div className="space-y-2 animate-in fade-in slide-in-from-top-2">
                <h4 className="text-[9px] font-bold text-slate-400 uppercase tracking-widest pl-1">
                    –ê—Ç–º–æ—Å—Ñ–µ—Ä–∞
                </h4>
                
                <div className="grid grid-cols-4 gap-2">
                    {AMBIENT_TRACKS.map((track) => {
                        const Icon = icons[track.icon];
                        const isSelected = currentTrackId === track.id;
                        
                        return (
                            <button
                                key={track.id}
                                onClick={() => onSelectTrack(track.id)}
                                className={cn(
                                    "flex flex-col items-center justify-center p-2 rounded-xl transition-all border",
                                    isSelected 
                                        ? "bg-slate-800 text-white border-slate-800 shadow-md scale-105" 
                                        : "bg-white border-slate-100 text-slate-400 hover:bg-slate-50"
                                )}
                            >
                                <Icon className="w-4 h-4 mb-1" />
                                <span className="text-[8px] font-bold truncate w-full text-center">
                                    {track.name}
                                </span>
                            </button>
                        );
                    })}
                </div>
            </div>
        )}

      </motion.div>
    </>
  );
};



================================================================================
FILE: src/features/breathing/data/patterns.ts (35 lines)
================================================================================

export interface BreathLevel {
  id: number;
  name: string;
  inhale: number;
  hold: number;
  exhale: number;
}

export const BREATH_LEVELS: BreathLevel[] = [
  { id: 0, name: "–£—Ä–æ–≤–µ–Ω—å 0 (–ù–∞—á–∞–ª—å–Ω—ã–π)", inhale: 4, hold: 16, exhale: 8 },
  { id: 1, name: "–£—Ä–æ–≤–µ–Ω—å 1", inhale: 5, hold: 20, exhale: 10 },
  { id: 2, name: "–£—Ä–æ–≤–µ–Ω—å 2", inhale: 6, hold: 24, exhale: 12 },
  { id: 3, name: "–£—Ä–æ–≤–µ–Ω—å 3", inhale: 7, hold: 28, exhale: 14 },
  { id: 4, name: "–£—Ä–æ–≤–µ–Ω—å 4", inhale: 8, hold: 32, exhale: 16 },
  { id: 5, name: "–£—Ä–æ–≤–µ–Ω—å 5", inhale: 9, hold: 36, exhale: 18 },
  { id: 6, name: "–£—Ä–æ–≤–µ–Ω—å 6", inhale: 10, hold: 40, exhale: 20 },
  { id: 7, name: "–£—Ä–æ–≤–µ–Ω—å 7", inhale: 12, hold: 48, exhale: 24 },
  { id: 8, name: "–£—Ä–æ–≤–µ–Ω—å 8", inhale: 13, hold: 52, exhale: 26 },
  { id: 9, name: "–£—Ä–æ–≤–µ–Ω—å 9", inhale: 15, hold: 60, exhale: 30 },
  { id: 10, name: "–£—Ä–æ–≤–µ–Ω—å 10 (–ú–∞—Å—Ç–µ—Ä)", inhale: 20, hold: 80, exhale: 40 },
  { id: 11, name: "–£—Ä–æ–≤–µ–Ω—å 11 (–ì—É—Ä—É)", inhale: 24, hold: 96, exhale: 48 },
  { id: 12, name: "–£—Ä–æ–≤–µ–Ω—å 12 (–ê–±—Å–æ–ª—é—Ç)", inhale: 36, hold: 144, exhale: 72 },
];

export const BREATH_INFO = {
  title: "–ì–∏–ø–æ–≤–µ–Ω—Ç–∏–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞",
  description: `–î–ª—è –ø—Ä–∞–∫—Ç–∏–∫–∏ - –Ω–æ–∑–¥—Ä–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Å—Ç—ã–º–∏. –¢–∞–∫ –∂–µ —á–∏—Å—Ç—ã–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∂–µ–ª—É–¥–æ–∫. –ù–µ –∑–∞–Ω–∏–º–∞–π—Ç–µ—Å—å, –µ—Å–ª–∏ –≤—ã –ø—Ä–æ—Å—Ç—É–∂–µ–Ω—ã –∏ –Ω–µ –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥—ã—à–∞—Ç—å —á–µ—Ä–µ–∑ –Ω–æ—Å. –ù–µ –∑–∞–Ω–∏–º–∞–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ —Å–∏–ª—É, –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Ä–∞–¥–æ—Å—Ç—å. –†–∞—Å—Å–ª–∞–±—å—Ç–µ –≤—Å–µ –º—ã—à—Ü—ã —Ç–µ–ª–∞.

–ü—Ä–∞–∫—Ç–∏–∫–∞ –æ—á–∏—â–∞–µ—Ç –∏ —Ç–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É. –ù–∞–≤–µ—Ä–Ω–æ–µ, –Ω–∏ –æ–¥–Ω–∞ –¥—Ä—É–≥–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ –Ω–µ –º–æ–∂–µ—Ç —Ç–∞–∫ –±—ã—Å—Ç—Ä–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–∑–Ω–∞–Ω–∏—è –∏ —É–º–∞ –æ—Ç –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–∞ –∫ —É–º–∏—Ä–æ—Ç–≤–æ—Ä–µ–Ω–∏—é. –í—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–µ–Ω–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏, –∏ –≤–æ—Ç –≤—ã —É–∂–µ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –¥—Ä—É–≥–æ–π —á–µ–ª–æ–≤–µ–∫. –ò –≤—Å–µ —ç—Ç–æ –±–µ–∑ –ª–µ–∫–∞—Ä—Å—Ç–≤ –∏ –ø—Ä–æ—á–∏—Ö —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–π.

–ö–æ–Ω–µ—á–Ω–æ, –º–æ—â–Ω—ã–π —É—Å–ø–æ–∫–æ–∏—Ç–µ–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø—Ä–∞–∫—Ç–∏–∫–∏ —ç—Ç–æ —Ö–æ—Ä–æ—à–∏–π –ø–ª—é—Å. –ù–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤–æ–∑–¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ —Å–æ–∑–Ω–∞–Ω–∏–µ –∏ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —á–µ–ª–æ–≤–µ–∫–∞ –≥–æ—Ä–∞–∑–¥–æ –≥–ª—É–±–∂–µ. –ù–∞–º–Ω–æ–≥–æ –≥–ª—É–±–∂–µ, —á–µ–º –≤—ã –º–æ–∂–µ—Ç–µ —Å–µ–±–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å.

–¢–µ—Ö–Ω–∏–∫–∞ –¥—ã—Ö–∞–Ω–∏—è –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –≥–∏–ø–æ–≤–µ–Ω—Ç–∏–ª—è—Ü–∏–æ–Ω–Ω—ã–º —Ç–µ—Ö–Ω–∏–∫–∞–º. –¢–æ –µ—Å—Ç—å –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—ä—ë–º –≤–æ–∑–¥—É—Ö–∞, –ø—Ä–æ—Ö–æ–¥—è—â–∏–π —á–µ—Ä–µ–∑ –ª—ë–≥–∫–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –æ–±—ã—á–Ω—ã–º –¥—ã—Ö–∞–Ω–∏–µ–º. –≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≥–∏–ø–æ–∫—Å–∏–∏ - –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫—É –∫–∏—Å–ª–æ—Ä–æ–¥–∞ –≤ –æ—Ä–≥–∞–Ω–∏–∑–º–µ. –ú–µ–¥–∏—Ü–∏–Ω–µ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –≥–∏–ø–æ–∫—Å–∏—è —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ–≤—ã—à–∞–µ—Ç —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è–µ–º–æ—Å—Ç—å –æ—Ä–≥–∞–Ω–∏–∑–º–∞ –±–æ–ª–µ–∑–Ω—è–º –∏ –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ —Å–∏–ª—ã –¥–ª—è —Å–∞–º–æ–æ–∑–¥–æ—Ä–æ–≤–ª–µ–Ω–∏—è –∏ –æ—á–∏—â–µ–Ω–∏—è.`
};



================================================================================
FILE: src/features/biorhythm/hooks/useBiorhythms.ts (67 lines)
================================================================================

// src/features/biorhythm/hooks/useBiorhythms.ts
import { useState, useMemo } from 'react';
import dayjs from 'dayjs';
import { useStorage } from '../../../hooks/useStorage'; // üëà NEW

const CYCLES = {
  PHYSICAL: 23,
  EMOTIONAL: 28,
  INTELLECTUAL: 33,
};

export const useBiorhythms = () => {
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º useStorage –≤–º–µ—Å—Ç–æ useState + localStorage
  const { value: birthDate, setValue: setBirthDate } = useStorage<string>(
    'bio_birthDate', 
    '2000-01-01'
  );
  
  const [targetDate, setTargetDate] = useState(dayjs().format('YYYY-MM-DD'));

  const handleBirthDateChange = (date: string) => {
    setBirthDate(date); // –≠—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç –∏ –≤ —Å—Ç–µ–π—Ç, –∏ –≤ –æ–±–ª–∞–∫–æ
  };

  const calculate = (birth: string, target: string) => {
    const b = dayjs(birth);
    const t = dayjs(target);
    const diff = t.diff(b, 'day');

    return {
      physical: Math.sin((2 * Math.PI * diff) / CYCLES.PHYSICAL),
      emotional: Math.sin((2 * Math.PI * diff) / CYCLES.EMOTIONAL),
      intellectual: Math.sin((2 * Math.PI * diff) / CYCLES.INTELLECTUAL),
    };
  };

  // –î–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è
  const todayStats = useMemo(() => {
    const data = calculate(birthDate, targetDate);
    return {
      physical: Math.round(data.physical * 100),
      emotional: Math.round(data.emotional * 100),
      intellectual: Math.round(data.intellectual * 100),
    };
  }, [birthDate, targetDate]);

  // –î–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ (15 –¥–Ω–µ–π)
  const chartData = useMemo(() => {
    const data = [];
    const start = dayjs(targetDate).subtract(3, 'day');
    
    for (let i = 0; i < 15; i++) {
      const current = start.add(i, 'day');
      const val = calculate(birthDate, current.toISOString());
      data.push({
        date: current.format('D.MM'),
        physical: parseFloat((val.physical * 100).toFixed(0)),
        emotional: parseFloat((val.emotional * 100).toFixed(0)),
        intellectual: parseFloat((val.intellectual * 100).toFixed(0)),
      });
    }
    return data;
  }, [birthDate, targetDate]);

  return { birthDate, setBirthDate: handleBirthDateChange, targetDate, setTargetDate, todayStats, chartData };
};



================================================================================
FILE: src/features/biorhythm/BiorhythmPage.tsx (35 lines)
================================================================================

import { useBiorhythms } from './hooks/useBiorhythms';
import { BiorhythmChart } from './components/BiorhythmChart';
import { StatsGrid } from './components/StatsGrid';
import { Calendar } from 'lucide-react';

export const BiorhythmPage = () => {
  const { birthDate, setBirthDate, todayStats, chartData } = useBiorhythms();

  return (
    <div className="pb-8 animate-in fade-in duration-500">
      <div className="bg-white dark:bg-[#2C2C2E] p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-white/10 flex items-center justify-between mb-4 mx-4 mt-2">
        <div className="flex items-center gap-3">
          <div className="p-2 bg-blue-50 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded-lg"><Calendar className="w-5 h-5" /></div>
          <div>
            <p className="text-xs text-slate-400 dark:text-slate-500 font-bold uppercase">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</p>
            <input
              type="date"
              value={birthDate}
              onChange={(e) => setBirthDate(e.target.value)}
              className="font-bold text-slate-700 dark:text-slate-200 bg-transparent outline-none text-sm w-32 [&::-webkit-calendar-picker-indicator]:filter dark:[&::-webkit-calendar-picker-indicator]:invert"
            />
          </div>
        </div>
      </div>
      <div className="px-4">
        <h2 className="text-lg font-bold text-slate-800 dark:text-white ml-1">–≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ª–Ω—ã</h2>
        <BiorhythmChart data={chartData} />
      </div>
      <div className="px-4">
        <StatsGrid stats={todayStats} />
      </div>
    </div>
  );
};



================================================================================
FILE: src/features/biorhythm/components/BiorhythmChart.tsx (47 lines)
================================================================================

import { ResponsiveContainer, LineChart, Line, XAxis, YAxis, CartesianGrid, ReferenceLine, Tooltip } from 'recharts';

export interface BiorhythmDataPoint {
  date: string;
  physical: number;
  emotional: number;
  intellectual: number;
}

interface Props {
  data: BiorhythmDataPoint[];
}

export const BiorhythmChart = ({ data }: Props) => {
  return (
    <div className="w-full h-64 mt-4 bg-white dark:bg-[#2C2C2E] rounded-2xl p-2 shadow-sm border border-slate-100 dark:border-white/10">
      <ResponsiveContainer width="100%" height="100%">
        <LineChart data={data} margin={{ top: 5, right: 10, left: -20, bottom: 0 }}>
          <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#f3f4f6" className="dark:stroke-[#38383A]" />
          <XAxis dataKey="date" tick={{fontSize: 10, fill: '#9ca3af'}} axisLine={false} tickLine={false} interval={2} />
          <YAxis domain={[-100, 100]} hide />
          <ReferenceLine y={0} stroke="#e5e7eb" className="dark:stroke-[#38383A]" strokeDasharray="3 3" />
          <Tooltip
            contentStyle={{
              borderRadius: '12px',
              border: 'none',
              boxShadow: '0 10px 15px -3px rgba(0,0,0,0.1)',
              backgroundColor: 'rgba(255, 255, 255, 0.95)',
              color: '#0F172A'
            }}
            contentStyle-dark={{
              backgroundColor: 'rgba(44, 44, 46, 0.95)',
              color: '#FFFFFF'
            }}
            labelStyle={{ color: '#6b7280', fontSize: '12px' }}
            itemStyle={{ color: '#0F172A' }}
            itemStyle-dark={{ color: '#FFFFFF' }}
          />
          <Line type="monotone" dataKey="physical" stroke="#ef4444" className="dark:stroke-[#FF6B6B]" strokeWidth={3} dot={false} name="–§–∏–∑–∏–∫–∞" />
          <Line type="monotone" dataKey="emotional" stroke="#22c55e" className="dark:stroke-[#4ADE80]" strokeWidth={3} dot={false} name="–≠–º–æ—Ü–∏–∏" />
          <Line type="monotone" dataKey="intellectual" stroke="#3b82f6" className="dark:stroke-[#60A5FA]" strokeWidth={3} dot={false} name="–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç" />
        </LineChart>
      </ResponsiveContainer>
    </div>
  );
};


